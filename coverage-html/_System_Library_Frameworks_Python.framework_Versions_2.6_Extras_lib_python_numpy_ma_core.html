<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<title>Coverage for /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy/ma/core</title>
<link rel='stylesheet' href='style.css' type='text/css'>
<script type='text/javascript' src='jquery-1.3.2.min.js'></script>
<script type='text/javascript'>
function toggle_lines(btn, cls) {
    var btn = $(btn);
    var hide = "hide_"+cls;
    if (btn.hasClass(hide)) {
        $("#source ."+cls).removeClass(hide);
        btn.removeClass(hide);
    }
    else {
        $("#source ."+cls).addClass(hide);
        btn.addClass(hide);
    }
}
</script>
</head>
<body>
<div id='header'>
    <div class='content'>
        <h1>Coverage for <b>/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy/ma/core</b> :
            <span class='pc_cov'>27%</span>
        </h1>
        <h2 class='stats'>
            1864 statements
            <span class='run hide_run' onclick='toggle_lines(this, "run")'>494 run</span>
            <span class='exc' onclick='toggle_lines(this, "exc")'>0 excluded</span>
            <span class='mis' onclick='toggle_lines(this, "mis")'>1370 missing</span>
            
        </h2>
    </div>
</div>

<div id='source'>
<table cellspacing='0' cellpadding='0'>
<tr>
<td class='linenos' valign='top'>
<p class='pln'>1</p>
<p class='stm run hide_run'>2</p>
<p class='pln'>3</p>
<p class='pln'>4</p>
<p class='pln'>5</p>
<p class='pln'>6</p>
<p class='pln'>7</p>
<p class='pln'>8</p>
<p class='pln'>9</p>
<p class='pln'>10</p>
<p class='pln'>11</p>
<p class='pln'>12</p>
<p class='pln'>13</p>
<p class='pln'>14</p>
<p class='pln'>15</p>
<p class='pln'>16</p>
<p class='pln'>17</p>
<p class='stm run hide_run'>18</p>
<p class='stm run hide_run'>19</p>
<p class='pln'>20</p>
<p class='stm run hide_run'>21</p>
<p class='pln'>22</p>
<p class='pln'>23</p>
<p class='pln'>24</p>
<p class='pln'>25</p>
<p class='pln'>26</p>
<p class='pln'>27</p>
<p class='pln'>28</p>
<p class='pln'>29</p>
<p class='pln'>30</p>
<p class='pln'>31</p>
<p class='pln'>32</p>
<p class='pln'>33</p>
<p class='pln'>34</p>
<p class='pln'>35</p>
<p class='pln'>36</p>
<p class='pln'>37</p>
<p class='pln'>38</p>
<p class='pln'>39</p>
<p class='pln'>40</p>
<p class='pln'>41</p>
<p class='pln'>42</p>
<p class='pln'>43</p>
<p class='pln'>44</p>
<p class='pln'>45</p>
<p class='pln'>46</p>
<p class='pln'>47</p>
<p class='pln'>48</p>
<p class='pln'>49</p>
<p class='pln'>50</p>
<p class='pln'>51</p>
<p class='pln'>52</p>
<p class='pln'>53</p>
<p class='pln'>54</p>
<p class='pln'>55</p>
<p class='pln'>56</p>
<p class='pln'>57</p>
<p class='pln'>58</p>
<p class='pln'>59</p>
<p class='stm run hide_run'>60</p>
<p class='stm run hide_run'>61</p>
<p class='pln'>62</p>
<p class='stm run hide_run'>63</p>
<p class='stm run hide_run'>64</p>
<p class='pln'>65</p>
<p class='stm run hide_run'>66</p>
<p class='pln'>67</p>
<p class='stm run hide_run'>68</p>
<p class='stm run hide_run'>69</p>
<p class='stm run hide_run'>70</p>
<p class='stm run hide_run'>71</p>
<p class='pln'>72</p>
<p class='pln'>73</p>
<p class='stm run hide_run'>74</p>
<p class='stm run hide_run'>75</p>
<p class='pln'>76</p>
<p class='stm run hide_run'>77</p>
<p class='pln'>78</p>
<p class='pln'>79</p>
<p class='pln'>80</p>
<p class='stm run hide_run'>81</p>
<p class='stm run hide_run'>82</p>
<p class='stm mis'>83</p>
<p class='stm run hide_run'>84</p>
<p class='pln'>85</p>
<p class='pln'>86</p>
<p class='pln'>87</p>
<p class='pln'>88</p>
<p class='pln'>89</p>
<p class='pln'>90</p>
<p class='stm run hide_run'>91</p>
<p class='pln'>92</p>
<p class='pln'>93</p>
<p class='pln'>94</p>
<p class='pln'>95</p>
<p class='stm run hide_run'>96</p>
<p class='pln'>97</p>
<p class='stm run hide_run'>98</p>
<p class='pln'>99</p>
<p class='stm mis'>100</p>
<p class='stm mis'>101</p>
<p class='stm run hide_run'>102</p>
<p class='pln'>103</p>
<p class='stm mis'>104</p>
<p class='stm run hide_run'>105</p>
<p class='pln'>106</p>
<p class='pln'>107</p>
<p class='pln'>108</p>
<p class='pln'>109</p>
<p class='pln'>110</p>
<p class='stm run hide_run'>111</p>
<p class='pln'>112</p>
<p class='pln'>113</p>
<p class='pln'>114</p>
<p class='pln'>115</p>
<p class='pln'>116</p>
<p class='pln'>117</p>
<p class='pln'>118</p>
<p class='pln'>119</p>
<p class='stm run hide_run'>120</p>
<p class='stm run hide_run'>121</p>
<p class='stm run hide_run'>122</p>
<p class='stm run hide_run'>123</p>
<p class='stm run hide_run'>124</p>
<p class='stm run hide_run'>125</p>
<p class='stm run hide_run'>126</p>
<p class='pln'>127</p>
<p class='pln'>128</p>
<p class='stm run hide_run'>129</p>
<p class='pln'>130</p>
<p class='pln'>131</p>
<p class='pln'>132</p>
<p class='stm mis'>133</p>
<p class='stm mis'>134</p>
<p class='stm mis'>135</p>
<p class='stm mis'>136</p>
<p class='stm mis'>137</p>
<p class='pln'>138</p>
<p class='stm mis'>139</p>
<p class='stm mis'>140</p>
<p class='stm mis'>141</p>
<p class='stm mis'>142</p>
<p class='stm mis'>143</p>
<p class='stm mis'>144</p>
<p class='stm mis'>145</p>
<p class='stm mis'>146</p>
<p class='stm mis'>147</p>
<p class='pln'>148</p>
<p class='stm mis'>149</p>
<p class='stm mis'>150</p>
<p class='pln'>151</p>
<p class='stm run hide_run'>152</p>
<p class='pln'>153</p>
<p class='pln'>154</p>
<p class='pln'>155</p>
<p class='pln'>156</p>
<p class='stm mis'>157</p>
<p class='stm mis'>158</p>
<p class='stm mis'>159</p>
<p class='stm mis'>160</p>
<p class='stm mis'>161</p>
<p class='stm mis'>162</p>
<p class='stm mis'>163</p>
<p class='stm mis'>164</p>
<p class='stm mis'>165</p>
<p class='stm mis'>166</p>
<p class='stm mis'>167</p>
<p class='stm mis'>168</p>
<p class='stm mis'>169</p>
<p class='stm mis'>170</p>
<p class='pln'>171</p>
<p class='stm mis'>172</p>
<p class='pln'>173</p>
<p class='stm run hide_run'>174</p>
<p class='pln'>175</p>
<p class='pln'>176</p>
<p class='pln'>177</p>
<p class='pln'>178</p>
<p class='stm mis'>179</p>
<p class='stm mis'>180</p>
<p class='stm mis'>181</p>
<p class='stm mis'>182</p>
<p class='stm mis'>183</p>
<p class='stm mis'>184</p>
<p class='stm mis'>185</p>
<p class='stm mis'>186</p>
<p class='stm mis'>187</p>
<p class='stm mis'>188</p>
<p class='stm mis'>189</p>
<p class='stm mis'>190</p>
<p class='stm mis'>191</p>
<p class='stm mis'>192</p>
<p class='pln'>193</p>
<p class='stm mis'>194</p>
<p class='pln'>195</p>
<p class='pln'>196</p>
<p class='stm run hide_run'>197</p>
<p class='stm mis'>198</p>
<p class='stm mis'>199</p>
<p class='stm mis'>200</p>
<p class='stm mis'>201</p>
<p class='stm mis'>202</p>
<p class='stm mis'>203</p>
<p class='pln'>204</p>
<p class='pln'>205</p>
<p class='pln'>206</p>
<p class='stm mis'>207</p>
<p class='stm mis'>208</p>
<p class='stm mis'>209</p>
<p class='stm mis'>210</p>
<p class='stm mis'>211</p>
<p class='stm mis'>212</p>
<p class='stm mis'>213</p>
<p class='stm mis'>214</p>
<p class='stm mis'>215</p>
<p class='pln'>216</p>
<p class='stm mis'>217</p>
<p class='stm mis'>218</p>
<p class='pln'>219</p>
<p class='stm mis'>220</p>
<p class='pln'>221</p>
<p class='stm mis'>222</p>
<p class='stm mis'>223</p>
<p class='pln'>224</p>
<p class='pln'>225</p>
<p class='stm mis'>226</p>
<p class='stm mis'>227</p>
<p class='stm mis'>228</p>
<p class='stm mis'>229</p>
<p class='stm mis'>230</p>
<p class='pln'>231</p>
<p class='pln'>232</p>
<p class='stm run hide_run'>233</p>
<p class='pln'>234</p>
<p class='pln'>235</p>
<p class='pln'>236</p>
<p class='pln'>237</p>
<p class='pln'>238</p>
<p class='pln'>239</p>
<p class='pln'>240</p>
<p class='pln'>241</p>
<p class='stm mis'>242</p>
<p class='stm mis'>243</p>
<p class='stm mis'>244</p>
<p class='pln'>245</p>
<p class='stm run hide_run'>246</p>
<p class='pln'>247</p>
<p class='pln'>248</p>
<p class='pln'>249</p>
<p class='pln'>250</p>
<p class='stm mis'>251</p>
<p class='stm mis'>252</p>
<p class='pln'>253</p>
<p class='stm mis'>254</p>
<p class='stm mis'>255</p>
<p class='pln'>256</p>
<p class='stm run hide_run'>257</p>
<p class='pln'>258</p>
<p class='pln'>259</p>
<p class='pln'>260</p>
<p class='pln'>261</p>
<p class='stm mis'>262</p>
<p class='stm mis'>263</p>
<p class='stm mis'>264</p>
<p class='stm mis'>265</p>
<p class='stm mis'>266</p>
<p class='pln'>267</p>
<p class='pln'>268</p>
<p class='pln'>269</p>
<p class='stm run hide_run'>270</p>
<p class='pln'>271</p>
<p class='pln'>272</p>
<p class='pln'>273</p>
<p class='pln'>274</p>
<p class='pln'>275</p>
<p class='pln'>276</p>
<p class='pln'>277</p>
<p class='pln'>278</p>
<p class='pln'>279</p>
<p class='pln'>280</p>
<p class='pln'>281</p>
<p class='pln'>282</p>
<p class='pln'>283</p>
<p class='pln'>284</p>
<p class='pln'>285</p>
<p class='pln'>286</p>
<p class='pln'>287</p>
<p class='stm mis'>288</p>
<p class='stm mis'>289</p>
<p class='stm mis'>290</p>
<p class='pln'>291</p>
<p class='stm mis'>292</p>
<p class='stm mis'>293</p>
<p class='stm mis'>294</p>
<p class='pln'>295</p>
<p class='stm mis'>296</p>
<p class='pln'>297</p>
<p class='pln'>298</p>
<p class='stm run hide_run'>299</p>
<p class='pln'>300</p>
<p class='pln'>301</p>
<p class='pln'>302</p>
<p class='pln'>303</p>
<p class='stm mis'>304</p>
<p class='stm mis'>305</p>
<p class='stm mis'>306</p>
<p class='stm mis'>307</p>
<p class='pln'>308</p>
<p class='stm mis'>309</p>
<p class='pln'>310</p>
<p class='stm mis'>311</p>
<p class='stm mis'>312</p>
<p class='stm mis'>313</p>
<p class='stm mis'>314</p>
<p class='stm mis'>315</p>
<p class='stm mis'>316</p>
<p class='stm mis'>317</p>
<p class='stm mis'>318</p>
<p class='pln'>319</p>
<p class='pln'>320</p>
<p class='stm run hide_run'>321</p>
<p class='pln'>322</p>
<p class='pln'>323</p>
<p class='pln'>324</p>
<p class='pln'>325</p>
<p class='pln'>326</p>
<p class='pln'>327</p>
<p class='pln'>328</p>
<p class='pln'>329</p>
<p class='pln'>330</p>
<p class='pln'>331</p>
<p class='pln'>332</p>
<p class='stm mis'>333</p>
<p class='stm mis'>334</p>
<p class='stm mis'>335</p>
<p class='stm mis'>336</p>
<p class='pln'>337</p>
<p class='stm run hide_run'>338</p>
<p class='pln'>339</p>
<p class='stm run hide_run'>340</p>
<p class='pln'>341</p>
<p class='pln'>342</p>
<p class='pln'>343</p>
<p class='pln'>344</p>
<p class='pln'>345</p>
<p class='pln'>346</p>
<p class='pln'>347</p>
<p class='pln'>348</p>
<p class='pln'>349</p>
<p class='pln'>350</p>
<p class='pln'>351</p>
<p class='pln'>352</p>
<p class='pln'>353</p>
<p class='pln'>354</p>
<p class='pln'>355</p>
<p class='pln'>356</p>
<p class='pln'>357</p>
<p class='pln'>358</p>
<p class='pln'>359</p>
<p class='pln'>360</p>
<p class='stm mis'>361</p>
<p class='pln'>362</p>
<p class='stm mis'>363</p>
<p class='stm mis'>364</p>
<p class='stm mis'>365</p>
<p class='stm mis'>366</p>
<p class='stm mis'>367</p>
<p class='stm mis'>368</p>
<p class='stm mis'>369</p>
<p class='stm mis'>370</p>
<p class='pln'>371</p>
<p class='pln'>372</p>
<p class='pln'>373</p>
<p class='pln'>374</p>
<p class='pln'>375</p>
<p class='pln'>376</p>
<p class='stm run hide_run'>377</p>
<p class='stm run hide_run'>378</p>
<p class='pln'>379</p>
<p class='stm run hide_run'>380</p>
<p class='pln'>381</p>
<p class='pln'>382</p>
<p class='pln'>383</p>
<p class='pln'>384</p>
<p class='pln'>385</p>
<p class='pln'>386</p>
<p class='stm run hide_run'>387</p>
<p class='pln'>388</p>
<p class='stm run hide_run'>389</p>
<p class='stm mis'>390</p>
<p class='stm run hide_run'>391</p>
<p class='stm run hide_run'>392</p>
<p class='pln'>393</p>
<p class='stm run hide_run'>394</p>
<p class='pln'>395</p>
<p class='stm mis'>396</p>
<p class='pln'>397</p>
<p class='pln'>398</p>
<p class='stm run hide_run'>399</p>
<p class='pln'>400</p>
<p class='pln'>401</p>
<p class='pln'>402</p>
<p class='pln'>403</p>
<p class='pln'>404</p>
<p class='stm run hide_run'>405</p>
<p class='pln'>406</p>
<p class='stm run hide_run'>407</p>
<p class='stm run hide_run'>408</p>
<p class='pln'>409</p>
<p class='stm mis'>410</p>
<p class='pln'>411</p>
<p class='stm run hide_run'>412</p>
<p class='pln'>413</p>
<p class='stm run hide_run'>414</p>
<p class='stm run hide_run'>415</p>
<p class='stm run hide_run'>416</p>
<p class='pln'>417</p>
<p class='pln'>418</p>
<p class='pln'>419</p>
<p class='stm mis'>420</p>
<p class='stm mis'>421</p>
<p class='stm mis'>422</p>
<p class='pln'>423</p>
<p class='stm run hide_run'>424</p>
<p class='pln'>425</p>
<p class='stm run hide_run'>426</p>
<p class='pln'>427</p>
<p class='stm run hide_run'>428</p>
<p class='pln'>429</p>
<p class='stm run hide_run'>430</p>
<p class='pln'>431</p>
<p class='stm mis'>432</p>
<p class='pln'>433</p>
<p class='stm run hide_run'>434</p>
<p class='pln'>435</p>
<p class='stm run hide_run'>436</p>
<p class='pln'>437</p>
<p class='stm run hide_run'>438</p>
<p class='pln'>439</p>
<p class='stm run hide_run'>440</p>
<p class='pln'>441</p>
<p class='stm mis'>442</p>
<p class='pln'>443</p>
<p class='pln'>444</p>
<p class='stm run hide_run'>445</p>
<p class='pln'>446</p>
<p class='pln'>447</p>
<p class='pln'>448</p>
<p class='pln'>449</p>
<p class='pln'>450</p>
<p class='pln'>451</p>
<p class='pln'>452</p>
<p class='pln'>453</p>
<p class='pln'>454</p>
<p class='pln'>455</p>
<p class='pln'>456</p>
<p class='pln'>457</p>
<p class='stm run hide_run'>458</p>
<p class='pln'>459</p>
<p class='pln'>460</p>
<p class='pln'>461</p>
<p class='pln'>462</p>
<p class='pln'>463</p>
<p class='stm run hide_run'>464</p>
<p class='stm run hide_run'>465</p>
<p class='stm run hide_run'>466</p>
<p class='stm run hide_run'>467</p>
<p class='stm run hide_run'>468</p>
<p class='stm run hide_run'>469</p>
<p class='stm run hide_run'>470</p>
<p class='pln'>471</p>
<p class='stm run hide_run'>472</p>
<p class='pln'>473</p>
<p class='pln'>474</p>
<p class='stm mis'>475</p>
<p class='stm mis'>476</p>
<p class='pln'>477</p>
<p class='stm mis'>478</p>
<p class='stm mis'>479</p>
<p class='stm mis'>480</p>
<p class='pln'>481</p>
<p class='stm mis'>482</p>
<p class='pln'>483</p>
<p class='pln'>484</p>
<p class='stm mis'>485</p>
<p class='pln'>486</p>
<p class='stm mis'>487</p>
<p class='stm mis'>488</p>
<p class='pln'>489</p>
<p class='stm mis'>490</p>
<p class='stm mis'>491</p>
<p class='pln'>492</p>
<p class='stm mis'>493</p>
<p class='pln'>494</p>
<p class='stm mis'>495</p>
<p class='pln'>496</p>
<p class='stm mis'>497</p>
<p class='stm mis'>498</p>
<p class='stm mis'>499</p>
<p class='stm mis'>500</p>
<p class='pln'>501</p>
<p class='stm run hide_run'>502</p>
<p class='stm mis'>503</p>
<p class='pln'>504</p>
<p class='pln'>505</p>
<p class='stm run hide_run'>506</p>
<p class='pln'>507</p>
<p class='pln'>508</p>
<p class='pln'>509</p>
<p class='pln'>510</p>
<p class='pln'>511</p>
<p class='pln'>512</p>
<p class='pln'>513</p>
<p class='pln'>514</p>
<p class='pln'>515</p>
<p class='pln'>516</p>
<p class='pln'>517</p>
<p class='pln'>518</p>
<p class='pln'>519</p>
<p class='pln'>520</p>
<p class='stm run hide_run'>521</p>
<p class='pln'>522</p>
<p class='pln'>523</p>
<p class='pln'>524</p>
<p class='stm run hide_run'>525</p>
<p class='stm run hide_run'>526</p>
<p class='stm run hide_run'>527</p>
<p class='stm run hide_run'>528</p>
<p class='stm run hide_run'>529</p>
<p class='stm run hide_run'>530</p>
<p class='stm run hide_run'>531</p>
<p class='pln'>532</p>
<p class='stm run hide_run'>533</p>
<p class='pln'>534</p>
<p class='stm mis'>535</p>
<p class='stm mis'>536</p>
<p class='stm mis'>537</p>
<p class='stm mis'>538</p>
<p class='stm mis'>539</p>
<p class='stm mis'>540</p>
<p class='stm mis'>541</p>
<p class='stm mis'>542</p>
<p class='stm mis'>543</p>
<p class='stm mis'>544</p>
<p class='stm mis'>545</p>
<p class='stm mis'>546</p>
<p class='stm mis'>547</p>
<p class='stm mis'>548</p>
<p class='pln'>549</p>
<p class='stm run hide_run'>550</p>
<p class='pln'>551</p>
<p class='stm mis'>552</p>
<p class='stm mis'>553</p>
<p class='pln'>554</p>
<p class='stm mis'>555</p>
<p class='stm mis'>556</p>
<p class='stm mis'>557</p>
<p class='stm mis'>558</p>
<p class='stm mis'>559</p>
<p class='stm mis'>560</p>
<p class='stm mis'>561</p>
<p class='stm mis'>562</p>
<p class='stm mis'>563</p>
<p class='stm mis'>564</p>
<p class='stm mis'>565</p>
<p class='stm mis'>566</p>
<p class='stm mis'>567</p>
<p class='stm mis'>568</p>
<p class='stm mis'>569</p>
<p class='stm mis'>570</p>
<p class='stm mis'>571</p>
<p class='stm mis'>572</p>
<p class='stm mis'>573</p>
<p class='stm mis'>574</p>
<p class='stm mis'>575</p>
<p class='pln'>576</p>
<p class='stm run hide_run'>577</p>
<p class='pln'>578</p>
<p class='pln'>579</p>
<p class='pln'>580</p>
<p class='stm mis'>581</p>
<p class='stm mis'>582</p>
<p class='stm mis'>583</p>
<p class='stm mis'>584</p>
<p class='pln'>585</p>
<p class='stm mis'>586</p>
<p class='stm mis'>587</p>
<p class='stm mis'>588</p>
<p class='stm mis'>589</p>
<p class='stm mis'>590</p>
<p class='stm mis'>591</p>
<p class='pln'>592</p>
<p class='pln'>593</p>
<p class='stm mis'>594</p>
<p class='stm mis'>595</p>
<p class='stm mis'>596</p>
<p class='stm mis'>597</p>
<p class='pln'>598</p>
<p class='stm run hide_run'>599</p>
<p class='pln'>600</p>
<p class='pln'>601</p>
<p class='pln'>602</p>
<p class='pln'>603</p>
<p class='stm mis'>604</p>
<p class='stm mis'>605</p>
<p class='pln'>606</p>
<p class='stm mis'>607</p>
<p class='stm mis'>608</p>
<p class='stm mis'>609</p>
<p class='pln'>610</p>
<p class='stm run hide_run'>611</p>
<p class='stm mis'>612</p>
<p class='pln'>613</p>
<p class='pln'>614</p>
<p class='stm run hide_run'>615</p>
<p class='pln'>616</p>
<p class='pln'>617</p>
<p class='pln'>618</p>
<p class='pln'>619</p>
<p class='pln'>620</p>
<p class='pln'>621</p>
<p class='pln'>622</p>
<p class='pln'>623</p>
<p class='pln'>624</p>
<p class='pln'>625</p>
<p class='pln'>626</p>
<p class='pln'>627</p>
<p class='stm run hide_run'>628</p>
<p class='pln'>629</p>
<p class='pln'>630</p>
<p class='pln'>631</p>
<p class='stm run hide_run'>632</p>
<p class='stm run hide_run'>633</p>
<p class='stm run hide_run'>634</p>
<p class='stm run hide_run'>635</p>
<p class='stm run hide_run'>636</p>
<p class='stm run hide_run'>637</p>
<p class='stm run hide_run'>638</p>
<p class='stm run hide_run'>639</p>
<p class='pln'>640</p>
<p class='stm run hide_run'>641</p>
<p class='pln'>642</p>
<p class='stm mis'>643</p>
<p class='stm mis'>644</p>
<p class='stm mis'>645</p>
<p class='stm mis'>646</p>
<p class='stm mis'>647</p>
<p class='stm mis'>648</p>
<p class='stm mis'>649</p>
<p class='pln'>650</p>
<p class='stm mis'>651</p>
<p class='stm mis'>652</p>
<p class='pln'>653</p>
<p class='stm mis'>654</p>
<p class='stm mis'>655</p>
<p class='stm mis'>656</p>
<p class='stm mis'>657</p>
<p class='stm mis'>658</p>
<p class='stm mis'>659</p>
<p class='stm mis'>660</p>
<p class='stm mis'>661</p>
<p class='stm mis'>662</p>
<p class='stm mis'>663</p>
<p class='stm mis'>664</p>
<p class='stm mis'>665</p>
<p class='pln'>666</p>
<p class='stm run hide_run'>667</p>
<p class='stm mis'>668</p>
<p class='pln'>669</p>
<p class='pln'>670</p>
<p class='pln'>671</p>
<p class='stm run hide_run'>672</p>
<p class='stm run hide_run'>673</p>
<p class='stm run hide_run'>674</p>
<p class='stm run hide_run'>675</p>
<p class='stm run hide_run'>676</p>
<p class='stm run hide_run'>677</p>
<p class='stm run hide_run'>678</p>
<p class='stm run hide_run'>679</p>
<p class='stm run hide_run'>680</p>
<p class='stm run hide_run'>681</p>
<p class='stm run hide_run'>682</p>
<p class='stm run hide_run'>683</p>
<p class='stm run hide_run'>684</p>
<p class='stm run hide_run'>685</p>
<p class='stm run hide_run'>686</p>
<p class='stm run hide_run'>687</p>
<p class='stm run hide_run'>688</p>
<p class='pln'>689</p>
<p class='stm run hide_run'>690</p>
<p class='pln'>691</p>
<p class='stm run hide_run'>692</p>
<p class='pln'>693</p>
<p class='stm run hide_run'>694</p>
<p class='pln'>695</p>
<p class='stm run hide_run'>696</p>
<p class='pln'>697</p>
<p class='stm run hide_run'>698</p>
<p class='pln'>699</p>
<p class='stm run hide_run'>700</p>
<p class='pln'>701</p>
<p class='stm run hide_run'>702</p>
<p class='pln'>703</p>
<p class='stm run hide_run'>704</p>
<p class='pln'>705</p>
<p class='pln'>706</p>
<p class='stm run hide_run'>707</p>
<p class='stm run hide_run'>708</p>
<p class='stm run hide_run'>709</p>
<p class='stm run hide_run'>710</p>
<p class='stm run hide_run'>711</p>
<p class='stm run hide_run'>712</p>
<p class='stm run hide_run'>713</p>
<p class='stm run hide_run'>714</p>
<p class='stm run hide_run'>715</p>
<p class='stm run hide_run'>716</p>
<p class='stm run hide_run'>717</p>
<p class='stm run hide_run'>718</p>
<p class='stm run hide_run'>719</p>
<p class='stm run hide_run'>720</p>
<p class='stm run hide_run'>721</p>
<p class='stm run hide_run'>722</p>
<p class='stm run hide_run'>723</p>
<p class='stm run hide_run'>724</p>
<p class='stm run hide_run'>725</p>
<p class='stm run hide_run'>726</p>
<p class='stm run hide_run'>727</p>
<p class='stm run hide_run'>728</p>
<p class='stm run hide_run'>729</p>
<p class='stm run hide_run'>730</p>
<p class='stm run hide_run'>731</p>
<p class='pln'>732</p>
<p class='stm run hide_run'>733</p>
<p class='stm run hide_run'>734</p>
<p class='pln'>735</p>
<p class='stm run hide_run'>736</p>
<p class='pln'>737</p>
<p class='stm run hide_run'>738</p>
<p class='pln'>739</p>
<p class='stm run hide_run'>740</p>
<p class='pln'>741</p>
<p class='pln'>742</p>
<p class='pln'>743</p>
<p class='pln'>744</p>
<p class='pln'>745</p>
<p class='pln'>746</p>
<p class='stm run hide_run'>747</p>
<p class='pln'>748</p>
<p class='pln'>749</p>
<p class='pln'>750</p>
<p class='pln'>751</p>
<p class='pln'>752</p>
<p class='stm mis'>753</p>
<p class='stm mis'>754</p>
<p class='pln'>755</p>
<p class='stm mis'>756</p>
<p class='stm mis'>757</p>
<p class='stm mis'>758</p>
<p class='stm mis'>759</p>
<p class='stm mis'>760</p>
<p class='pln'>761</p>
<p class='stm mis'>762</p>
<p class='stm mis'>763</p>
<p class='stm mis'>764</p>
<p class='stm mis'>765</p>
<p class='pln'>766</p>
<p class='stm mis'>767</p>
<p class='pln'>768</p>
<p class='stm run hide_run'>769</p>
<p class='pln'>770</p>
<p class='pln'>771</p>
<p class='pln'>772</p>
<p class='pln'>773</p>
<p class='pln'>774</p>
<p class='pln'>775</p>
<p class='stm mis'>776</p>
<p class='stm run hide_run'>777</p>
<p class='pln'>778</p>
<p class='stm run hide_run'>779</p>
<p class='pln'>780</p>
<p class='pln'>781</p>
<p class='pln'>782</p>
<p class='pln'>783</p>
<p class='stm mis'>784</p>
<p class='stm mis'>785</p>
<p class='stm mis'>786</p>
<p class='stm mis'>787</p>
<p class='pln'>788</p>
<p class='stm run hide_run'>789</p>
<p class='pln'>790</p>
<p class='pln'>791</p>
<p class='pln'>792</p>
<p class='pln'>793</p>
<p class='pln'>794</p>
<p class='stm mis'>795</p>
<p class='stm mis'>796</p>
<p class='stm mis'>797</p>
<p class='stm mis'>798</p>
<p class='pln'>799</p>
<p class='stm run hide_run'>800</p>
<p class='pln'>801</p>
<p class='pln'>802</p>
<p class='pln'>803</p>
<p class='pln'>804</p>
<p class='pln'>805</p>
<p class='pln'>806</p>
<p class='pln'>807</p>
<p class='pln'>808</p>
<p class='pln'>809</p>
<p class='pln'>810</p>
<p class='pln'>811</p>
<p class='pln'>812</p>
<p class='pln'>813</p>
<p class='pln'>814</p>
<p class='pln'>815</p>
<p class='stm mis'>816</p>
<p class='stm mis'>817</p>
<p class='pln'>818</p>
<p class='stm mis'>819</p>
<p class='stm mis'>820</p>
<p class='stm mis'>821</p>
<p class='stm mis'>822</p>
<p class='stm mis'>823</p>
<p class='stm mis'>824</p>
<p class='stm mis'>825</p>
<p class='stm mis'>826</p>
<p class='pln'>827</p>
<p class='stm mis'>828</p>
<p class='pln'>829</p>
<p class='stm mis'>830</p>
<p class='pln'>831</p>
<p class='stm mis'>832</p>
<p class='pln'>833</p>
<p class='stm mis'>834</p>
<p class='stm mis'>835</p>
<p class='pln'>836</p>
<p class='stm mis'>837</p>
<p class='pln'>838</p>
<p class='stm run hide_run'>839</p>
<p class='pln'>840</p>
<p class='pln'>841</p>
<p class='pln'>842</p>
<p class='pln'>843</p>
<p class='pln'>844</p>
<p class='pln'>845</p>
<p class='pln'>846</p>
<p class='pln'>847</p>
<p class='pln'>848</p>
<p class='pln'>849</p>
<p class='stm mis'>850</p>
<p class='stm mis'>851</p>
<p class='pln'>852</p>
<p class='stm mis'>853</p>
<p class='stm mis'>854</p>
<p class='pln'>855</p>
<p class='stm run hide_run'>856</p>
<p class='pln'>857</p>
<p class='pln'>858</p>
<p class='pln'>859</p>
<p class='pln'>860</p>
<p class='pln'>861</p>
<p class='pln'>862</p>
<p class='pln'>863</p>
<p class='pln'>864</p>
<p class='pln'>865</p>
<p class='pln'>866</p>
<p class='pln'>867</p>
<p class='pln'>868</p>
<p class='pln'>869</p>
<p class='pln'>870</p>
<p class='pln'>871</p>
<p class='pln'>872</p>
<p class='pln'>873</p>
<p class='pln'>874</p>
<p class='stm mis'>875</p>
<p class='stm mis'>876</p>
<p class='stm mis'>877</p>
<p class='stm mis'>878</p>
<p class='stm mis'>879</p>
<p class='stm mis'>880</p>
<p class='stm mis'>881</p>
<p class='pln'>882</p>
<p class='pln'>883</p>
<p class='pln'>884</p>
<p class='pln'>885</p>
<p class='pln'>886</p>
<p class='pln'>887</p>
<p class='stm run hide_run'>888</p>
<p class='pln'>889</p>
<p class='pln'>890</p>
<p class='pln'>891</p>
<p class='pln'>892</p>
<p class='pln'>893</p>
<p class='pln'>894</p>
<p class='pln'>895</p>
<p class='pln'>896</p>
<p class='pln'>897</p>
<p class='pln'>898</p>
<p class='pln'>899</p>
<p class='pln'>900</p>
<p class='pln'>901</p>
<p class='pln'>902</p>
<p class='stm mis'>903</p>
<p class='stm mis'>904</p>
<p class='pln'>905</p>
<p class='stm mis'>906</p>
<p class='stm mis'>907</p>
<p class='stm mis'>908</p>
<p class='pln'>909</p>
<p class='stm mis'>910</p>
<p class='stm mis'>911</p>
<p class='stm mis'>912</p>
<p class='pln'>913</p>
<p class='stm mis'>914</p>
<p class='stm mis'>915</p>
<p class='stm mis'>916</p>
<p class='stm mis'>917</p>
<p class='pln'>918</p>
<p class='stm run hide_run'>919</p>
<p class='pln'>920</p>
<p class='stm mis'>921</p>
<p class='pln'>922</p>
<p class='stm run hide_run'>923</p>
<p class='pln'>924</p>
<p class='stm mis'>925</p>
<p class='pln'>926</p>
<p class='stm run hide_run'>927</p>
<p class='pln'>928</p>
<p class='stm mis'>929</p>
<p class='pln'>930</p>
<p class='stm run hide_run'>931</p>
<p class='pln'>932</p>
<p class='stm mis'>933</p>
<p class='pln'>934</p>
<p class='stm run hide_run'>935</p>
<p class='pln'>936</p>
<p class='stm mis'>937</p>
<p class='pln'>938</p>
<p class='stm run hide_run'>939</p>
<p class='pln'>940</p>
<p class='pln'>941</p>
<p class='pln'>942</p>
<p class='pln'>943</p>
<p class='pln'>944</p>
<p class='pln'>945</p>
<p class='pln'>946</p>
<p class='pln'>947</p>
<p class='pln'>948</p>
<p class='pln'>949</p>
<p class='stm mis'>950</p>
<p class='pln'>951</p>
<p class='stm run hide_run'>952</p>
<p class='pln'>953</p>
<p class='pln'>954</p>
<p class='pln'>955</p>
<p class='pln'>956</p>
<p class='pln'>957</p>
<p class='pln'>958</p>
<p class='pln'>959</p>
<p class='pln'>960</p>
<p class='pln'>961</p>
<p class='pln'>962</p>
<p class='stm mis'>963</p>
<p class='stm mis'>964</p>
<p class='stm mis'>965</p>
<p class='stm mis'>966</p>
<p class='stm mis'>967</p>
<p class='pln'>968</p>
<p class='stm run hide_run'>969</p>
<p class='pln'>970</p>
<p class='pln'>971</p>
<p class='pln'>972</p>
<p class='pln'>973</p>
<p class='pln'>974</p>
<p class='pln'>975</p>
<p class='pln'>976</p>
<p class='pln'>977</p>
<p class='pln'>978</p>
<p class='pln'>979</p>
<p class='stm mis'>980</p>
<p class='stm mis'>981</p>
<p class='stm mis'>982</p>
<p class='stm mis'>983</p>
<p class='stm mis'>984</p>
<p class='pln'>985</p>
<p class='pln'>986</p>
<p class='stm run hide_run'>987</p>
<p class='pln'>988</p>
<p class='pln'>989</p>
<p class='pln'>990</p>
<p class='pln'>991</p>
<p class='pln'>992</p>
<p class='pln'>993</p>
<p class='pln'>994</p>
<p class='pln'>995</p>
<p class='pln'>996</p>
<p class='pln'>997</p>
<p class='pln'>998</p>
<p class='pln'>999</p>
<p class='pln'>1000</p>
<p class='pln'>1001</p>
<p class='pln'>1002</p>
<p class='pln'>1003</p>
<p class='pln'>1004</p>
<p class='pln'>1005</p>
<p class='stm mis'>1006</p>
<p class='stm mis'>1007</p>
<p class='stm mis'>1008</p>
<p class='pln'>1009</p>
<p class='stm mis'>1010</p>
<p class='stm mis'>1011</p>
<p class='stm mis'>1012</p>
<p class='stm mis'>1013</p>
<p class='pln'>1014</p>
<p class='stm run hide_run'>1015</p>
<p class='pln'>1016</p>
<p class='pln'>1017</p>
<p class='pln'>1018</p>
<p class='pln'>1019</p>
<p class='pln'>1020</p>
<p class='pln'>1021</p>
<p class='pln'>1022</p>
<p class='pln'>1023</p>
<p class='pln'>1024</p>
<p class='pln'>1025</p>
<p class='pln'>1026</p>
<p class='pln'>1027</p>
<p class='pln'>1028</p>
<p class='pln'>1029</p>
<p class='pln'>1030</p>
<p class='pln'>1031</p>
<p class='pln'>1032</p>
<p class='pln'>1033</p>
<p class='pln'>1034</p>
<p class='pln'>1035</p>
<p class='pln'>1036</p>
<p class='pln'>1037</p>
<p class='pln'>1038</p>
<p class='pln'>1039</p>
<p class='pln'>1040</p>
<p class='stm mis'>1041</p>
<p class='stm mis'>1042</p>
<p class='stm mis'>1043</p>
<p class='stm mis'>1044</p>
<p class='stm mis'>1045</p>
<p class='pln'>1046</p>
<p class='stm mis'>1047</p>
<p class='stm mis'>1048</p>
<p class='stm mis'>1049</p>
<p class='stm mis'>1050</p>
<p class='pln'>1051</p>
<p class='stm run hide_run'>1052</p>
<p class='pln'>1053</p>
<p class='pln'>1054</p>
<p class='pln'>1055</p>
<p class='pln'>1056</p>
<p class='pln'>1057</p>
<p class='stm mis'>1058</p>
<p class='stm mis'>1059</p>
<p class='stm mis'>1060</p>
<p class='stm mis'>1061</p>
<p class='stm mis'>1062</p>
<p class='pln'>1063</p>
<p class='stm mis'>1064</p>
<p class='stm mis'>1065</p>
<p class='stm mis'>1066</p>
<p class='stm mis'>1067</p>
<p class='pln'>1068</p>
<p class='pln'>1069</p>
<p class='pln'>1070</p>
<p class='pln'>1071</p>
<p class='pln'>1072</p>
<p class='stm run hide_run'>1073</p>
<p class='pln'>1074</p>
<p class='pln'>1075</p>
<p class='pln'>1076</p>
<p class='pln'>1077</p>
<p class='stm run hide_run'>1078</p>
<p class='pln'>1079</p>
<p class='stm run hide_run'>1080</p>
<p class='stm run hide_run'>1081</p>
<p class='pln'>1082</p>
<p class='stm run hide_run'>1083</p>
<p class='pln'>1084</p>
<p class='stm mis'>1085</p>
<p class='pln'>1086</p>
<p class='stm run hide_run'>1087</p>
<p class='pln'>1088</p>
<p class='stm mis'>1089</p>
<p class='pln'>1090</p>
<p class='stm run hide_run'>1091</p>
<p class='pln'>1092</p>
<p class='stm mis'>1093</p>
<p class='pln'>1094</p>
<p class='stm run hide_run'>1095</p>
<p class='pln'>1096</p>
<p class='stm mis'>1097</p>
<p class='pln'>1098</p>
<p class='stm run hide_run'>1099</p>
<p class='stm mis'>1100</p>
<p class='pln'>1101</p>
<p class='stm run hide_run'>1102</p>
<p class='pln'>1103</p>
<p class='pln'>1104</p>
<p class='stm run hide_run'>1105</p>
<p class='pln'>1106</p>
<p class='pln'>1107</p>
<p class='pln'>1108</p>
<p class='pln'>1109</p>
<p class='pln'>1110</p>
<p class='pln'>1111</p>
<p class='stm run hide_run'>1112</p>
<p class='pln'>1113</p>
<p class='pln'>1114</p>
<p class='pln'>1115</p>
<p class='pln'>1116</p>
<p class='pln'>1117</p>
<p class='pln'>1118</p>
<p class='pln'>1119</p>
<p class='pln'>1120</p>
<p class='pln'>1121</p>
<p class='pln'>1122</p>
<p class='pln'>1123</p>
<p class='pln'>1124</p>
<p class='pln'>1125</p>
<p class='pln'>1126</p>
<p class='pln'>1127</p>
<p class='pln'>1128</p>
<p class='pln'>1129</p>
<p class='pln'>1130</p>
<p class='pln'>1131</p>
<p class='pln'>1132</p>
<p class='pln'>1133</p>
<p class='pln'>1134</p>
<p class='stm run hide_run'>1135</p>
<p class='stm run hide_run'>1136</p>
<p class='stm run hide_run'>1137</p>
<p class='stm run hide_run'>1138</p>
<p class='stm run hide_run'>1139</p>
<p class='pln'>1140</p>
<p class='stm run hide_run'>1141</p>
<p class='pln'>1142</p>
<p class='stm run hide_run'>1143</p>
<p class='stm run hide_run'>1144</p>
<p class='stm run hide_run'>1145</p>
<p class='stm run hide_run'>1146</p>
<p class='pln'>1147</p>
<p class='stm run hide_run'>1148</p>
<p class='stm run hide_run'>1149</p>
<p class='stm run hide_run'>1150</p>
<p class='pln'>1151</p>
<p class='stm run hide_run'>1152</p>
<p class='stm mis'>1153</p>
<p class='stm mis'>1154</p>
<p class='stm mis'>1155</p>
<p class='stm mis'>1156</p>
<p class='stm mis'>1157</p>
<p class='stm mis'>1158</p>
<p class='stm mis'>1159</p>
<p class='stm mis'>1160</p>
<p class='stm mis'>1161</p>
<p class='stm mis'>1162</p>
<p class='stm mis'>1163</p>
<p class='pln'>1164</p>
<p class='stm mis'>1165</p>
<p class='stm mis'>1166</p>
<p class='stm mis'>1167</p>
<p class='pln'>1168</p>
<p class='pln'>1169</p>
<p class='stm run hide_run'>1170</p>
<p class='pln'>1171</p>
<p class='stm run hide_run'>1172</p>
<p class='stm mis'>1173</p>
<p class='stm mis'>1174</p>
<p class='pln'>1175</p>
<p class='stm mis'>1176</p>
<p class='stm mis'>1177</p>
<p class='pln'>1178</p>
<p class='stm mis'>1179</p>
<p class='pln'>1180</p>
<p class='stm run hide_run'>1181</p>
<p class='stm mis'>1182</p>
<p class='pln'>1183</p>
<p class='pln'>1184</p>
<p class='stm run hide_run'>1185</p>
<p class='stm mis'>1186</p>
<p class='stm mis'>1187</p>
<p class='pln'>1188</p>
<p class='stm run hide_run'>1189</p>
<p class='stm mis'>1190</p>
<p class='stm mis'>1191</p>
<p class='stm mis'>1192</p>
<p class='stm mis'>1193</p>
<p class='pln'>1194</p>
<p class='pln'>1195</p>
<p class='stm run hide_run'>1196</p>
<p class='pln'>1197</p>
<p class='pln'>1198</p>
<p class='pln'>1199</p>
<p class='pln'>1200</p>
<p class='pln'>1201</p>
<p class='pln'>1202</p>
<p class='pln'>1203</p>
<p class='pln'>1204</p>
<p class='pln'>1205</p>
<p class='pln'>1206</p>
<p class='pln'>1207</p>
<p class='pln'>1208</p>
<p class='pln'>1209</p>
<p class='pln'>1210</p>
<p class='pln'>1211</p>
<p class='pln'>1212</p>
<p class='pln'>1213</p>
<p class='pln'>1214</p>
<p class='pln'>1215</p>
<p class='pln'>1216</p>
<p class='pln'>1217</p>
<p class='pln'>1218</p>
<p class='pln'>1219</p>
<p class='pln'>1220</p>
<p class='pln'>1221</p>
<p class='pln'>1222</p>
<p class='pln'>1223</p>
<p class='pln'>1224</p>
<p class='pln'>1225</p>
<p class='pln'>1226</p>
<p class='pln'>1227</p>
<p class='pln'>1228</p>
<p class='pln'>1229</p>
<p class='pln'>1230</p>
<p class='pln'>1231</p>
<p class='pln'>1232</p>
<p class='pln'>1233</p>
<p class='pln'>1234</p>
<p class='pln'>1235</p>
<p class='pln'>1236</p>
<p class='pln'>1237</p>
<p class='pln'>1238</p>
<p class='stm run hide_run'>1239</p>
<p class='stm run hide_run'>1240</p>
<p class='stm run hide_run'>1241</p>
<p class='stm run hide_run'>1242</p>
<p class='pln'>1243</p>
<p class='stm run hide_run'>1244</p>
<p class='pln'>1245</p>
<p class='pln'>1246</p>
<p class='pln'>1247</p>
<p class='pln'>1248</p>
<p class='pln'>1249</p>
<p class='pln'>1250</p>
<p class='pln'>1251</p>
<p class='pln'>1252</p>
<p class='pln'>1253</p>
<p class='stm run hide_run'>1254</p>
<p class='stm mis'>1255</p>
<p class='pln'>1256</p>
<p class='stm mis'>1257</p>
<p class='pln'>1258</p>
<p class='stm run hide_run'>1259</p>
<p class='stm run hide_run'>1260</p>
<p class='pln'>1261</p>
<p class='stm run hide_run'>1262</p>
<p class='stm mis'>1263</p>
<p class='pln'>1264</p>
<p class='stm run hide_run'>1265</p>
<p class='stm run hide_run'>1266</p>
<p class='pln'>1267</p>
<p class='stm mis'>1268</p>
<p class='pln'>1269</p>
<p class='stm run hide_run'>1270</p>
<p class='stm mis'>1271</p>
<p class='stm mis'>1272</p>
<p class='pln'>1273</p>
<p class='pln'>1274</p>
<p class='stm run hide_run'>1275</p>
<p class='pln'>1276</p>
<p class='stm run hide_run'>1277</p>
<p class='stm mis'>1278</p>
<p class='pln'>1279</p>
<p class='stm run hide_run'>1280</p>
<p class='pln'>1281</p>
<p class='stm run hide_run'>1282</p>
<p class='pln'>1283</p>
<p class='stm mis'>1284</p>
<p class='pln'>1285</p>
<p class='stm mis'>1286</p>
<p class='stm mis'>1287</p>
<p class='pln'>1288</p>
<p class='pln'>1289</p>
<p class='stm mis'>1290</p>
<p class='pln'>1291</p>
<p class='stm mis'>1292</p>
<p class='stm mis'>1293</p>
<p class='pln'>1294</p>
<p class='stm mis'>1295</p>
<p class='stm mis'>1296</p>
<p class='stm mis'>1297</p>
<p class='pln'>1298</p>
<p class='stm mis'>1299</p>
<p class='stm mis'>1300</p>
<p class='stm mis'>1301</p>
<p class='pln'>1302</p>
<p class='stm mis'>1303</p>
<p class='stm mis'>1304</p>
<p class='pln'>1305</p>
<p class='stm mis'>1306</p>
<p class='pln'>1307</p>
<p class='pln'>1308</p>
<p class='pln'>1309</p>
<p class='stm run hide_run'>1310</p>
<p class='stm run hide_run'>1311</p>
<p class='pln'>1312</p>
<p class='stm mis'>1313</p>
<p class='stm mis'>1314</p>
<p class='pln'>1315</p>
<p class='pln'>1316</p>
<p class='stm run hide_run'>1317</p>
<p class='stm mis'>1318</p>
<p class='stm mis'>1319</p>
<p class='stm mis'>1320</p>
<p class='stm mis'>1321</p>
<p class='stm mis'>1322</p>
<p class='pln'>1323</p>
<p class='stm mis'>1324</p>
<p class='pln'>1325</p>
<p class='stm mis'>1326</p>
<p class='stm mis'>1327</p>
<p class='pln'>1328</p>
<p class='stm run hide_run'>1329</p>
<p class='stm run hide_run'>1330</p>
<p class='stm run hide_run'>1331</p>
<p class='pln'>1332</p>
<p class='stm mis'>1333</p>
<p class='stm mis'>1334</p>
<p class='stm mis'>1335</p>
<p class='pln'>1336</p>
<p class='stm mis'>1337</p>
<p class='stm mis'>1338</p>
<p class='stm mis'>1339</p>
<p class='pln'>1340</p>
<p class='stm mis'>1341</p>
<p class='stm mis'>1342</p>
<p class='pln'>1343</p>
<p class='stm run hide_run'>1344</p>
<p class='stm run hide_run'>1345</p>
<p class='pln'>1346</p>
<p class='stm run hide_run'>1347</p>
<p class='stm mis'>1348</p>
<p class='pln'>1349</p>
<p class='stm run hide_run'>1350</p>
<p class='stm run hide_run'>1351</p>
<p class='pln'>1352</p>
<p class='stm mis'>1353</p>
<p class='stm run hide_run'>1354</p>
<p class='stm run hide_run'>1355</p>
<p class='pln'>1356</p>
<p class='stm run hide_run'>1357</p>
<p class='pln'>1358</p>
<p class='pln'>1359</p>
<p class='stm run hide_run'>1360</p>
<p class='stm run hide_run'>1361</p>
<p class='pln'>1362</p>
<p class='stm mis'>1363</p>
<p class='pln'>1364</p>
<p class='stm run hide_run'>1365</p>
<p class='stm run hide_run'>1366</p>
<p class='stm run hide_run'>1367</p>
<p class='stm run hide_run'>1368</p>
<p class='stm run hide_run'>1369</p>
<p class='stm run hide_run'>1370</p>
<p class='pln'>1371</p>
<p class='pln'>1372</p>
<p class='pln'>1373</p>
<p class='pln'>1374</p>
<p class='pln'>1375</p>
<p class='pln'>1376</p>
<p class='stm run hide_run'>1377</p>
<p class='stm run hide_run'>1378</p>
<p class='stm run hide_run'>1379</p>
<p class='pln'>1380</p>
<p class='stm run hide_run'>1381</p>
<p class='pln'>1382</p>
<p class='pln'>1383</p>
<p class='pln'>1384</p>
<p class='stm run hide_run'>1385</p>
<p class='stm run hide_run'>1386</p>
<p class='stm run hide_run'>1387</p>
<p class='stm run hide_run'>1388</p>
<p class='stm mis'>1389</p>
<p class='pln'>1390</p>
<p class='stm run hide_run'>1391</p>
<p class='pln'>1392</p>
<p class='stm mis'>1393</p>
<p class='stm run hide_run'>1394</p>
<p class='pln'>1395</p>
<p class='stm run hide_run'>1396</p>
<p class='stm mis'>1397</p>
<p class='stm run hide_run'>1398</p>
<p class='pln'>1399</p>
<p class='stm run hide_run'>1400</p>
<p class='pln'>1401</p>
<p class='pln'>1402</p>
<p class='pln'>1403</p>
<p class='stm mis'>1404</p>
<p class='stm mis'>1405</p>
<p class='pln'>1406</p>
<p class='stm mis'>1407</p>
<p class='stm mis'>1408</p>
<p class='stm mis'>1409</p>
<p class='stm mis'>1410</p>
<p class='pln'>1411</p>
<p class='stm mis'>1412</p>
<p class='stm mis'>1413</p>
<p class='stm mis'>1414</p>
<p class='stm mis'>1415</p>
<p class='pln'>1416</p>
<p class='stm mis'>1417</p>
<p class='pln'>1418</p>
<p class='stm mis'>1419</p>
<p class='pln'>1420</p>
<p class='stm mis'>1421</p>
<p class='stm mis'>1422</p>
<p class='pln'>1423</p>
<p class='stm mis'>1424</p>
<p class='stm mis'>1425</p>
<p class='pln'>1426</p>
<p class='stm mis'>1427</p>
<p class='stm mis'>1428</p>
<p class='stm mis'>1429</p>
<p class='pln'>1430</p>
<p class='stm mis'>1431</p>
<p class='stm mis'>1432</p>
<p class='stm mis'>1433</p>
<p class='pln'>1434</p>
<p class='stm mis'>1435</p>
<p class='pln'>1436</p>
<p class='stm mis'>1437</p>
<p class='stm mis'>1438</p>
<p class='pln'>1439</p>
<p class='stm mis'>1440</p>
<p class='stm mis'>1441</p>
<p class='pln'>1442</p>
<p class='stm mis'>1443</p>
<p class='pln'>1444</p>
<p class='stm run hide_run'>1445</p>
<p class='stm mis'>1446</p>
<p class='stm mis'>1447</p>
<p class='stm mis'>1448</p>
<p class='pln'>1449</p>
<p class='stm mis'>1450</p>
<p class='stm mis'>1451</p>
<p class='stm mis'>1452</p>
<p class='stm mis'>1453</p>
<p class='stm mis'>1454</p>
<p class='stm mis'>1455</p>
<p class='pln'>1456</p>
<p class='stm mis'>1457</p>
<p class='stm mis'>1458</p>
<p class='stm mis'>1459</p>
<p class='pln'>1460</p>
<p class='stm mis'>1461</p>
<p class='pln'>1462</p>
<p class='stm mis'>1463</p>
<p class='stm mis'>1464</p>
<p class='stm mis'>1465</p>
<p class='stm mis'>1466</p>
<p class='pln'>1467</p>
<p class='stm mis'>1468</p>
<p class='stm mis'>1469</p>
<p class='pln'>1470</p>
<p class='stm mis'>1471</p>
<p class='stm mis'>1472</p>
<p class='stm mis'>1473</p>
<p class='stm run hide_run'>1474</p>
<p class='pln'>1475</p>
<p class='stm run hide_run'>1476</p>
<p class='pln'>1477</p>
<p class='pln'>1478</p>
<p class='pln'>1479</p>
<p class='pln'>1480</p>
<p class='pln'>1481</p>
<p class='pln'>1482</p>
<p class='pln'>1483</p>
<p class='pln'>1484</p>
<p class='pln'>1485</p>
<p class='pln'>1486</p>
<p class='pln'>1487</p>
<p class='pln'>1488</p>
<p class='pln'>1489</p>
<p class='pln'>1490</p>
<p class='pln'>1491</p>
<p class='pln'>1492</p>
<p class='pln'>1493</p>
<p class='pln'>1494</p>
<p class='pln'>1495</p>
<p class='pln'>1496</p>
<p class='pln'>1497</p>
<p class='pln'>1498</p>
<p class='stm mis'>1499</p>
<p class='stm mis'>1500</p>
<p class='stm mis'>1501</p>
<p class='stm mis'>1502</p>
<p class='stm mis'>1503</p>
<p class='stm mis'>1504</p>
<p class='pln'>1505</p>
<p class='stm mis'>1506</p>
<p class='stm mis'>1507</p>
<p class='pln'>1508</p>
<p class='stm mis'>1509</p>
<p class='pln'>1510</p>
<p class='stm mis'>1511</p>
<p class='stm mis'>1512</p>
<p class='stm mis'>1513</p>
<p class='pln'>1514</p>
<p class='stm run hide_run'>1515</p>
<p class='pln'>1516</p>
<p class='pln'>1517</p>
<p class='pln'>1518</p>
<p class='pln'>1519</p>
<p class='pln'>1520</p>
<p class='pln'>1521</p>
<p class='pln'>1522</p>
<p class='pln'>1523</p>
<p class='pln'>1524</p>
<p class='stm mis'>1525</p>
<p class='pln'>1526</p>
<p class='pln'>1527</p>
<p class='pln'>1528</p>
<p class='pln'>1529</p>
<p class='stm mis'>1530</p>
<p class='stm mis'>1531</p>
<p class='pln'>1532</p>
<p class='stm mis'>1533</p>
<p class='stm mis'>1534</p>
<p class='stm mis'>1535</p>
<p class='stm mis'>1536</p>
<p class='pln'>1537</p>
<p class='stm mis'>1538</p>
<p class='pln'>1539</p>
<p class='stm mis'>1540</p>
<p class='stm mis'>1541</p>
<p class='pln'>1542</p>
<p class='pln'>1543</p>
<p class='stm mis'>1544</p>
<p class='pln'>1545</p>
<p class='stm mis'>1546</p>
<p class='pln'>1547</p>
<p class='stm mis'>1548</p>
<p class='stm mis'>1549</p>
<p class='stm mis'>1550</p>
<p class='stm mis'>1551</p>
<p class='pln'>1552</p>
<p class='stm mis'>1553</p>
<p class='stm mis'>1554</p>
<p class='stm mis'>1555</p>
<p class='pln'>1556</p>
<p class='stm mis'>1557</p>
<p class='pln'>1558</p>
<p class='stm run hide_run'>1559</p>
<p class='pln'>1560</p>
<p class='pln'>1561</p>
<p class='pln'>1562</p>
<p class='pln'>1563</p>
<p class='pln'>1564</p>
<p class='pln'>1565</p>
<p class='stm mis'>1566</p>
<p class='stm mis'>1567</p>
<p class='pln'>1568</p>
<p class='pln'>1569</p>
<p class='pln'>1570</p>
<p class='pln'>1571</p>
<p class='stm mis'>1572</p>
<p class='stm mis'>1573</p>
<p class='stm mis'>1574</p>
<p class='stm mis'>1575</p>
<p class='stm mis'>1576</p>
<p class='stm mis'>1577</p>
<p class='pln'>1578</p>
<p class='pln'>1579</p>
<p class='stm mis'>1580</p>
<p class='stm mis'>1581</p>
<p class='stm mis'>1582</p>
<p class='stm mis'>1583</p>
<p class='pln'>1584</p>
<p class='stm mis'>1585</p>
<p class='pln'>1586</p>
<p class='stm mis'>1587</p>
<p class='stm mis'>1588</p>
<p class='pln'>1589</p>
<p class='stm mis'>1590</p>
<p class='stm mis'>1591</p>
<p class='pln'>1592</p>
<p class='stm mis'>1593</p>
<p class='stm mis'>1594</p>
<p class='stm mis'>1595</p>
<p class='stm mis'>1596</p>
<p class='pln'>1597</p>
<p class='pln'>1598</p>
<p class='stm mis'>1599</p>
<p class='pln'>1600</p>
<p class='stm mis'>1601</p>
<p class='stm mis'>1602</p>
<p class='stm mis'>1603</p>
<p class='stm mis'>1604</p>
<p class='pln'>1605</p>
<p class='stm mis'>1606</p>
<p class='stm mis'>1607</p>
<p class='stm mis'>1608</p>
<p class='stm mis'>1609</p>
<p class='stm mis'>1610</p>
<p class='pln'>1611</p>
<p class='stm mis'>1612</p>
<p class='stm mis'>1613</p>
<p class='stm mis'>1614</p>
<p class='pln'>1615</p>
<p class='stm mis'>1616</p>
<p class='stm mis'>1617</p>
<p class='stm mis'>1618</p>
<p class='stm mis'>1619</p>
<p class='stm mis'>1620</p>
<p class='pln'>1621</p>
<p class='stm mis'>1622</p>
<p class='stm mis'>1623</p>
<p class='stm mis'>1624</p>
<p class='stm mis'>1625</p>
<p class='stm mis'>1626</p>
<p class='stm mis'>1627</p>
<p class='stm mis'>1628</p>
<p class='stm mis'>1629</p>
<p class='stm mis'>1630</p>
<p class='stm mis'>1631</p>
<p class='stm mis'>1632</p>
<p class='stm mis'>1633</p>
<p class='pln'>1634</p>
<p class='stm run hide_run'>1635</p>
<p class='pln'>1636</p>
<p class='pln'>1637</p>
<p class='pln'>1638</p>
<p class='pln'>1639</p>
<p class='pln'>1640</p>
<p class='pln'>1641</p>
<p class='stm mis'>1642</p>
<p class='pln'>1643</p>
<p class='stm run hide_run'>1644</p>
<p class='pln'>1645</p>
<p class='pln'>1646</p>
<p class='pln'>1647</p>
<p class='pln'>1648</p>
<p class='pln'>1649</p>
<p class='pln'>1650</p>
<p class='stm mis'>1651</p>
<p class='pln'>1652</p>
<p class='stm run hide_run'>1653</p>
<p class='pln'>1654</p>
<p class='pln'>1655</p>
<p class='pln'>1656</p>
<p class='stm mis'>1657</p>
<p class='stm mis'>1658</p>
<p class='stm mis'>1659</p>
<p class='stm mis'>1660</p>
<p class='pln'>1661</p>
<p class='stm mis'>1662</p>
<p class='pln'>1663</p>
<p class='stm mis'>1664</p>
<p class='stm mis'>1665</p>
<p class='stm mis'>1666</p>
<p class='pln'>1667</p>
<p class='stm mis'>1668</p>
<p class='pln'>1669</p>
<p class='stm mis'>1670</p>
<p class='stm mis'>1671</p>
<p class='pln'>1672</p>
<p class='pln'>1673</p>
<p class='stm mis'>1674</p>
<p class='pln'>1675</p>
<p class='pln'>1676</p>
<p class='stm mis'>1677</p>
<p class='stm mis'>1678</p>
<p class='pln'>1679</p>
<p class='stm mis'>1680</p>
<p class='pln'>1681</p>
<p class='stm mis'>1682</p>
<p class='stm mis'>1683</p>
<p class='pln'>1684</p>
<p class='pln'>1685</p>
<p class='pln'>1686</p>
<p class='stm mis'>1687</p>
<p class='pln'>1688</p>
<p class='pln'>1689</p>
<p class='pln'>1690</p>
<p class='stm mis'>1691</p>
<p class='stm mis'>1692</p>
<p class='pln'>1693</p>
<p class='stm mis'>1694</p>
<p class='stm mis'>1695</p>
<p class='pln'>1696</p>
<p class='pln'>1697</p>
<p class='stm mis'>1698</p>
<p class='stm mis'>1699</p>
<p class='stm mis'>1700</p>
<p class='pln'>1701</p>
<p class='pln'>1702</p>
<p class='stm mis'>1703</p>
<p class='pln'>1704</p>
<p class='stm mis'>1705</p>
<p class='stm mis'>1706</p>
<p class='stm mis'>1707</p>
<p class='stm run hide_run'>1708</p>
<p class='pln'>1709</p>
<p class='stm run hide_run'>1710</p>
<p class='pln'>1711</p>
<p class='pln'>1712</p>
<p class='pln'>1713</p>
<p class='pln'>1714</p>
<p class='pln'>1715</p>
<p class='stm mis'>1716</p>
<p class='stm run hide_run'>1717</p>
<p class='pln'>1718</p>
<p class='stm run hide_run'>1719</p>
<p class='pln'>1720</p>
<p class='pln'>1721</p>
<p class='pln'>1722</p>
<p class='pln'>1723</p>
<p class='stm mis'>1724</p>
<p class='stm mis'>1725</p>
<p class='stm mis'>1726</p>
<p class='stm mis'>1727</p>
<p class='stm mis'>1728</p>
<p class='pln'>1729</p>
<p class='stm mis'>1730</p>
<p class='pln'>1731</p>
<p class='stm mis'>1732</p>
<p class='stm mis'>1733</p>
<p class='stm mis'>1734</p>
<p class='stm mis'>1735</p>
<p class='pln'>1736</p>
<p class='pln'>1737</p>
<p class='stm run hide_run'>1738</p>
<p class='pln'>1739</p>
<p class='pln'>1740</p>
<p class='pln'>1741</p>
<p class='pln'>1742</p>
<p class='stm mis'>1743</p>
<p class='stm run hide_run'>1744</p>
<p class='pln'>1745</p>
<p class='stm run hide_run'>1746</p>
<p class='pln'>1747</p>
<p class='pln'>1748</p>
<p class='pln'>1749</p>
<p class='stm mis'>1750</p>
<p class='pln'>1751</p>
<p class='stm run hide_run'>1752</p>
<p class='pln'>1753</p>
<p class='pln'>1754</p>
<p class='pln'>1755</p>
<p class='stm mis'>1756</p>
<p class='pln'>1757</p>
<p class='stm run hide_run'>1758</p>
<p class='pln'>1759</p>
<p class='pln'>1760</p>
<p class='pln'>1761</p>
<p class='stm mis'>1762</p>
<p class='stm mis'>1763</p>
<p class='stm mis'>1764</p>
<p class='pln'>1765</p>
<p class='stm run hide_run'>1766</p>
<p class='pln'>1767</p>
<p class='pln'>1768</p>
<p class='pln'>1769</p>
<p class='stm mis'>1770</p>
<p class='stm mis'>1771</p>
<p class='stm mis'>1772</p>
<p class='pln'>1773</p>
<p class='pln'>1774</p>
<p class='stm run hide_run'>1775</p>
<p class='pln'>1776</p>
<p class='pln'>1777</p>
<p class='pln'>1778</p>
<p class='pln'>1779</p>
<p class='stm mis'>1780</p>
<p class='stm run hide_run'>1781</p>
<p class='stm run hide_run'>1782</p>
<p class='pln'>1783</p>
<p class='stm run hide_run'>1784</p>
<p class='pln'>1785</p>
<p class='pln'>1786</p>
<p class='pln'>1787</p>
<p class='pln'>1788</p>
<p class='pln'>1789</p>
<p class='stm mis'>1790</p>
<p class='stm mis'>1791</p>
<p class='pln'>1792</p>
<p class='stm run hide_run'>1793</p>
<p class='pln'>1794</p>
<p class='pln'>1795</p>
<p class='pln'>1796</p>
<p class='stm mis'>1797</p>
<p class='pln'>1798</p>
<p class='stm run hide_run'>1799</p>
<p class='pln'>1800</p>
<p class='pln'>1801</p>
<p class='pln'>1802</p>
<p class='stm mis'>1803</p>
<p class='stm mis'>1804</p>
<p class='pln'>1805</p>
<p class='stm run hide_run'>1806</p>
<p class='pln'>1807</p>
<p class='pln'>1808</p>
<p class='stm run hide_run'>1809</p>
<p class='pln'>1810</p>
<p class='pln'>1811</p>
<p class='pln'>1812</p>
<p class='stm mis'>1813</p>
<p class='stm mis'>1814</p>
<p class='stm mis'>1815</p>
<p class='pln'>1816</p>
<p class='stm run hide_run'>1817</p>
<p class='pln'>1818</p>
<p class='pln'>1819</p>
<p class='pln'>1820</p>
<p class='pln'>1821</p>
<p class='pln'>1822</p>
<p class='stm mis'>1823</p>
<p class='pln'>1824</p>
<p class='stm run hide_run'>1825</p>
<p class='pln'>1826</p>
<p class='pln'>1827</p>
<p class='stm run hide_run'>1828</p>
<p class='pln'>1829</p>
<p class='pln'>1830</p>
<p class='pln'>1831</p>
<p class='pln'>1832</p>
<p class='pln'>1833</p>
<p class='pln'>1834</p>
<p class='pln'>1835</p>
<p class='pln'>1836</p>
<p class='pln'>1837</p>
<p class='pln'>1838</p>
<p class='pln'>1839</p>
<p class='pln'>1840</p>
<p class='pln'>1841</p>
<p class='pln'>1842</p>
<p class='pln'>1843</p>
<p class='pln'>1844</p>
<p class='pln'>1845</p>
<p class='pln'>1846</p>
<p class='pln'>1847</p>
<p class='stm mis'>1848</p>
<p class='stm mis'>1849</p>
<p class='stm mis'>1850</p>
<p class='pln'>1851</p>
<p class='stm mis'>1852</p>
<p class='stm mis'>1853</p>
<p class='pln'>1854</p>
<p class='stm mis'>1855</p>
<p class='pln'>1856</p>
<p class='stm mis'>1857</p>
<p class='stm mis'>1858</p>
<p class='pln'>1859</p>
<p class='stm mis'>1860</p>
<p class='stm mis'>1861</p>
<p class='stm mis'>1862</p>
<p class='stm mis'>1863</p>
<p class='stm mis'>1864</p>
<p class='stm mis'>1865</p>
<p class='stm mis'>1866</p>
<p class='pln'>1867</p>
<p class='stm mis'>1868</p>
<p class='stm mis'>1869</p>
<p class='stm mis'>1870</p>
<p class='stm mis'>1871</p>
<p class='stm mis'>1872</p>
<p class='stm mis'>1873</p>
<p class='stm mis'>1874</p>
<p class='stm mis'>1875</p>
<p class='pln'>1876</p>
<p class='stm mis'>1877</p>
<p class='stm mis'>1878</p>
<p class='stm mis'>1879</p>
<p class='stm mis'>1880</p>
<p class='pln'>1881</p>
<p class='stm mis'>1882</p>
<p class='stm mis'>1883</p>
<p class='pln'>1884</p>
<p class='stm run hide_run'>1885</p>
<p class='pln'>1886</p>
<p class='pln'>1887</p>
<p class='pln'>1888</p>
<p class='pln'>1889</p>
<p class='pln'>1890</p>
<p class='pln'>1891</p>
<p class='pln'>1892</p>
<p class='pln'>1893</p>
<p class='pln'>1894</p>
<p class='pln'>1895</p>
<p class='pln'>1896</p>
<p class='pln'>1897</p>
<p class='pln'>1898</p>
<p class='pln'>1899</p>
<p class='pln'>1900</p>
<p class='pln'>1901</p>
<p class='pln'>1902</p>
<p class='pln'>1903</p>
<p class='pln'>1904</p>
<p class='pln'>1905</p>
<p class='pln'>1906</p>
<p class='stm mis'>1907</p>
<p class='stm mis'>1908</p>
<p class='stm mis'>1909</p>
<p class='stm mis'>1910</p>
<p class='pln'>1911</p>
<p class='pln'>1912</p>
<p class='stm run hide_run'>1913</p>
<p class='pln'>1914</p>
<p class='pln'>1915</p>
<p class='pln'>1916</p>
<p class='pln'>1917</p>
<p class='pln'>1918</p>
<p class='pln'>1919</p>
<p class='pln'>1920</p>
<p class='pln'>1921</p>
<p class='pln'>1922</p>
<p class='pln'>1923</p>
<p class='pln'>1924</p>
<p class='pln'>1925</p>
<p class='pln'>1926</p>
<p class='pln'>1927</p>
<p class='pln'>1928</p>
<p class='pln'>1929</p>
<p class='pln'>1930</p>
<p class='pln'>1931</p>
<p class='pln'>1932</p>
<p class='pln'>1933</p>
<p class='pln'>1934</p>
<p class='pln'>1935</p>
<p class='pln'>1936</p>
<p class='pln'>1937</p>
<p class='pln'>1938</p>
<p class='pln'>1939</p>
<p class='pln'>1940</p>
<p class='pln'>1941</p>
<p class='pln'>1942</p>
<p class='stm mis'>1943</p>
<p class='pln'>1944</p>
<p class='stm mis'>1945</p>
<p class='pln'>1946</p>
<p class='stm mis'>1947</p>
<p class='stm mis'>1948</p>
<p class='stm mis'>1949</p>
<p class='stm mis'>1950</p>
<p class='stm mis'>1951</p>
<p class='pln'>1952</p>
<p class='pln'>1953</p>
<p class='stm run hide_run'>1954</p>
<p class='pln'>1955</p>
<p class='pln'>1956</p>
<p class='pln'>1957</p>
<p class='stm mis'>1958</p>
<p class='stm mis'>1959</p>
<p class='stm mis'>1960</p>
<p class='stm mis'>1961</p>
<p class='stm mis'>1962</p>
<p class='stm mis'>1963</p>
<p class='stm mis'>1964</p>
<p class='pln'>1965</p>
<p class='stm mis'>1966</p>
<p class='stm mis'>1967</p>
<p class='stm mis'>1968</p>
<p class='stm mis'>1969</p>
<p class='stm mis'>1970</p>
<p class='stm mis'>1971</p>
<p class='stm mis'>1972</p>
<p class='pln'>1973</p>
<p class='stm mis'>1974</p>
<p class='stm mis'>1975</p>
<p class='stm mis'>1976</p>
<p class='pln'>1977</p>
<p class='stm mis'>1978</p>
<p class='pln'>1979</p>
<p class='stm mis'>1980</p>
<p class='stm mis'>1981</p>
<p class='stm mis'>1982</p>
<p class='stm mis'>1983</p>
<p class='pln'>1984</p>
<p class='stm mis'>1985</p>
<p class='stm mis'>1986</p>
<p class='stm mis'>1987</p>
<p class='stm mis'>1988</p>
<p class='stm mis'>1989</p>
<p class='stm mis'>1990</p>
<p class='stm mis'>1991</p>
<p class='pln'>1992</p>
<p class='stm mis'>1993</p>
<p class='stm mis'>1994</p>
<p class='pln'>1995</p>
<p class='stm run hide_run'>1996</p>
<p class='pln'>1997</p>
<p class='pln'>1998</p>
<p class='pln'>1999</p>
<p class='stm mis'>2000</p>
<p class='pln'>2001</p>
<p class='pln'>2002</p>
<p class='pln'>2003</p>
<p class='pln'>2004</p>
<p class='pln'>2005</p>
<p class='pln'>2006</p>
<p class='stm mis'>2007</p>
<p class='pln'>2008</p>
<p class='pln'>2009</p>
<p class='pln'>2010</p>
<p class='pln'>2011</p>
<p class='stm mis'>2012</p>
<p class='pln'>2013</p>
<p class='pln'>2014</p>
<p class='pln'>2015</p>
<p class='pln'>2016</p>
<p class='pln'>2017</p>
<p class='pln'>2018</p>
<p class='pln'>2019</p>
<p class='stm mis'>2020</p>
<p class='pln'>2021</p>
<p class='pln'>2022</p>
<p class='pln'>2023</p>
<p class='pln'>2024</p>
<p class='pln'>2025</p>
<p class='stm mis'>2026</p>
<p class='stm mis'>2027</p>
<p class='stm mis'>2028</p>
<p class='pln'>2029</p>
<p class='stm mis'>2030</p>
<p class='stm mis'>2031</p>
<p class='stm mis'>2032</p>
<p class='stm mis'>2033</p>
<p class='stm mis'>2034</p>
<p class='stm mis'>2035</p>
<p class='stm mis'>2036</p>
<p class='pln'>2037</p>
<p class='stm run hide_run'>2038</p>
<p class='pln'>2039</p>
<p class='stm mis'>2040</p>
<p class='pln'>2041</p>
<p class='stm run hide_run'>2042</p>
<p class='pln'>2043</p>
<p class='stm mis'>2044</p>
<p class='pln'>2045</p>
<p class='stm run hide_run'>2046</p>
<p class='pln'>2047</p>
<p class='stm mis'>2048</p>
<p class='pln'>2049</p>
<p class='stm run hide_run'>2050</p>
<p class='pln'>2051</p>
<p class='stm mis'>2052</p>
<p class='pln'>2053</p>
<p class='stm run hide_run'>2054</p>
<p class='pln'>2055</p>
<p class='stm mis'>2056</p>
<p class='pln'>2057</p>
<p class='stm run hide_run'>2058</p>
<p class='pln'>2059</p>
<p class='stm mis'>2060</p>
<p class='pln'>2061</p>
<p class='stm run hide_run'>2062</p>
<p class='pln'>2063</p>
<p class='stm mis'>2064</p>
<p class='pln'>2065</p>
<p class='stm run hide_run'>2066</p>
<p class='pln'>2067</p>
<p class='stm mis'>2068</p>
<p class='pln'>2069</p>
<p class='stm run hide_run'>2070</p>
<p class='pln'>2071</p>
<p class='stm mis'>2072</p>
<p class='pln'>2073</p>
<p class='stm run hide_run'>2074</p>
<p class='pln'>2075</p>
<p class='stm mis'>2076</p>
<p class='pln'>2077</p>
<p class='stm run hide_run'>2078</p>
<p class='pln'>2079</p>
<p class='stm mis'>2080</p>
<p class='stm mis'>2081</p>
<p class='stm mis'>2082</p>
<p class='stm mis'>2083</p>
<p class='stm mis'>2084</p>
<p class='stm mis'>2085</p>
<p class='stm mis'>2086</p>
<p class='pln'>2087</p>
<p class='stm run hide_run'>2088</p>
<p class='pln'>2089</p>
<p class='stm mis'>2090</p>
<p class='stm mis'>2091</p>
<p class='stm mis'>2092</p>
<p class='stm mis'>2093</p>
<p class='stm mis'>2094</p>
<p class='stm mis'>2095</p>
<p class='stm mis'>2096</p>
<p class='pln'>2097</p>
<p class='stm run hide_run'>2098</p>
<p class='pln'>2099</p>
<p class='stm mis'>2100</p>
<p class='stm mis'>2101</p>
<p class='stm mis'>2102</p>
<p class='stm mis'>2103</p>
<p class='stm mis'>2104</p>
<p class='stm mis'>2105</p>
<p class='stm mis'>2106</p>
<p class='pln'>2107</p>
<p class='stm run hide_run'>2108</p>
<p class='pln'>2109</p>
<p class='stm mis'>2110</p>
<p class='stm mis'>2111</p>
<p class='stm mis'>2112</p>
<p class='stm mis'>2113</p>
<p class='pln'>2114</p>
<p class='stm mis'>2115</p>
<p class='stm mis'>2116</p>
<p class='stm mis'>2117</p>
<p class='stm mis'>2118</p>
<p class='stm mis'>2119</p>
<p class='stm mis'>2120</p>
<p class='pln'>2121</p>
<p class='stm run hide_run'>2122</p>
<p class='pln'>2123</p>
<p class='stm mis'>2124</p>
<p class='stm mis'>2125</p>
<p class='stm mis'>2126</p>
<p class='stm mis'>2127</p>
<p class='stm mis'>2128</p>
<p class='stm mis'>2129</p>
<p class='stm mis'>2130</p>
<p class='pln'>2131</p>
<p class='stm mis'>2132</p>
<p class='stm mis'>2133</p>
<p class='pln'>2134</p>
<p class='stm run hide_run'>2135</p>
<p class='pln'>2136</p>
<p class='stm mis'>2137</p>
<p class='stm mis'>2138</p>
<p class='pln'>2139</p>
<p class='stm mis'>2140</p>
<p class='stm mis'>2141</p>
<p class='stm mis'>2142</p>
<p class='stm mis'>2143</p>
<p class='pln'>2144</p>
<p class='stm run hide_run'>2145</p>
<p class='pln'>2146</p>
<p class='stm mis'>2147</p>
<p class='stm mis'>2148</p>
<p class='pln'>2149</p>
<p class='stm mis'>2150</p>
<p class='stm mis'>2151</p>
<p class='stm mis'>2152</p>
<p class='pln'>2153</p>
<p class='stm run hide_run'>2154</p>
<p class='stm mis'>2155</p>
<p class='stm mis'>2156</p>
<p class='stm mis'>2157</p>
<p class='stm run hide_run'>2158</p>
<p class='pln'>2159</p>
<p class='stm run hide_run'>2160</p>
<p class='stm mis'>2161</p>
<p class='stm mis'>2162</p>
<p class='stm mis'>2163</p>
<p class='stm run hide_run'>2164</p>
<p class='pln'>2165</p>
<p class='pln'>2166</p>
<p class='pln'>2167</p>
<p class='stm run hide_run'>2168</p>
<p class='pln'>2169</p>
<p class='pln'>2170</p>
<p class='pln'>2171</p>
<p class='pln'>2172</p>
<p class='pln'>2173</p>
<p class='pln'>2174</p>
<p class='pln'>2175</p>
<p class='pln'>2176</p>
<p class='pln'>2177</p>
<p class='pln'>2178</p>
<p class='pln'>2179</p>
<p class='pln'>2180</p>
<p class='pln'>2181</p>
<p class='pln'>2182</p>
<p class='pln'>2183</p>
<p class='pln'>2184</p>
<p class='pln'>2185</p>
<p class='stm mis'>2186</p>
<p class='stm mis'>2187</p>
<p class='stm mis'>2188</p>
<p class='stm mis'>2189</p>
<p class='stm mis'>2190</p>
<p class='stm mis'>2191</p>
<p class='stm mis'>2192</p>
<p class='stm mis'>2193</p>
<p class='stm mis'>2194</p>
<p class='stm mis'>2195</p>
<p class='pln'>2196</p>
<p class='stm mis'>2197</p>
<p class='stm mis'>2198</p>
<p class='stm mis'>2199</p>
<p class='stm mis'>2200</p>
<p class='stm mis'>2201</p>
<p class='stm mis'>2202</p>
<p class='stm mis'>2203</p>
<p class='stm mis'>2204</p>
<p class='pln'>2205</p>
<p class='stm mis'>2206</p>
<p class='pln'>2207</p>
<p class='stm run hide_run'>2208</p>
<p class='pln'>2209</p>
<p class='stm run hide_run'>2210</p>
<p class='pln'>2211</p>
<p class='pln'>2212</p>
<p class='pln'>2213</p>
<p class='pln'>2214</p>
<p class='pln'>2215</p>
<p class='pln'>2216</p>
<p class='pln'>2217</p>
<p class='pln'>2218</p>
<p class='pln'>2219</p>
<p class='pln'>2220</p>
<p class='pln'>2221</p>
<p class='pln'>2222</p>
<p class='pln'>2223</p>
<p class='pln'>2224</p>
<p class='pln'>2225</p>
<p class='pln'>2226</p>
<p class='pln'>2227</p>
<p class='pln'>2228</p>
<p class='pln'>2229</p>
<p class='pln'>2230</p>
<p class='stm mis'>2231</p>
<p class='stm mis'>2232</p>
<p class='stm mis'>2233</p>
<p class='stm mis'>2234</p>
<p class='pln'>2235</p>
<p class='stm mis'>2236</p>
<p class='stm mis'>2237</p>
<p class='pln'>2238</p>
<p class='stm run hide_run'>2239</p>
<p class='pln'>2240</p>
<p class='stm run hide_run'>2241</p>
<p class='pln'>2242</p>
<p class='pln'>2243</p>
<p class='pln'>2244</p>
<p class='pln'>2245</p>
<p class='pln'>2246</p>
<p class='pln'>2247</p>
<p class='pln'>2248</p>
<p class='pln'>2249</p>
<p class='pln'>2250</p>
<p class='pln'>2251</p>
<p class='pln'>2252</p>
<p class='pln'>2253</p>
<p class='pln'>2254</p>
<p class='pln'>2255</p>
<p class='pln'>2256</p>
<p class='pln'>2257</p>
<p class='pln'>2258</p>
<p class='pln'>2259</p>
<p class='pln'>2260</p>
<p class='pln'>2261</p>
<p class='pln'>2262</p>
<p class='pln'>2263</p>
<p class='pln'>2264</p>
<p class='pln'>2265</p>
<p class='pln'>2266</p>
<p class='pln'>2267</p>
<p class='pln'>2268</p>
<p class='pln'>2269</p>
<p class='pln'>2270</p>
<p class='pln'>2271</p>
<p class='pln'>2272</p>
<p class='pln'>2273</p>
<p class='pln'>2274</p>
<p class='pln'>2275</p>
<p class='pln'>2276</p>
<p class='pln'>2277</p>
<p class='pln'>2278</p>
<p class='stm mis'>2279</p>
<p class='stm mis'>2280</p>
<p class='stm mis'>2281</p>
<p class='stm mis'>2282</p>
<p class='stm mis'>2283</p>
<p class='stm mis'>2284</p>
<p class='stm mis'>2285</p>
<p class='pln'>2286</p>
<p class='stm run hide_run'>2287</p>
<p class='pln'>2288</p>
<p class='pln'>2289</p>
<p class='pln'>2290</p>
<p class='pln'>2291</p>
<p class='pln'>2292</p>
<p class='pln'>2293</p>
<p class='pln'>2294</p>
<p class='pln'>2295</p>
<p class='pln'>2296</p>
<p class='pln'>2297</p>
<p class='stm mis'>2298</p>
<p class='stm mis'>2299</p>
<p class='stm mis'>2300</p>
<p class='stm mis'>2301</p>
<p class='stm mis'>2302</p>
<p class='stm mis'>2303</p>
<p class='pln'>2304</p>
<p class='pln'>2305</p>
<p class='stm mis'>2306</p>
<p class='pln'>2307</p>
<p class='stm run hide_run'>2308</p>
<p class='pln'>2309</p>
<p class='pln'>2310</p>
<p class='pln'>2311</p>
<p class='pln'>2312</p>
<p class='pln'>2313</p>
<p class='pln'>2314</p>
<p class='pln'>2315</p>
<p class='pln'>2316</p>
<p class='pln'>2317</p>
<p class='pln'>2318</p>
<p class='pln'>2319</p>
<p class='pln'>2320</p>
<p class='pln'>2321</p>
<p class='pln'>2322</p>
<p class='pln'>2323</p>
<p class='pln'>2324</p>
<p class='pln'>2325</p>
<p class='pln'>2326</p>
<p class='pln'>2327</p>
<p class='pln'>2328</p>
<p class='pln'>2329</p>
<p class='pln'>2330</p>
<p class='pln'>2331</p>
<p class='pln'>2332</p>
<p class='pln'>2333</p>
<p class='pln'>2334</p>
<p class='pln'>2335</p>
<p class='pln'>2336</p>
<p class='pln'>2337</p>
<p class='pln'>2338</p>
<p class='pln'>2339</p>
<p class='pln'>2340</p>
<p class='pln'>2341</p>
<p class='pln'>2342</p>
<p class='pln'>2343</p>
<p class='pln'>2344</p>
<p class='pln'>2345</p>
<p class='pln'>2346</p>
<p class='pln'>2347</p>
<p class='pln'>2348</p>
<p class='pln'>2349</p>
<p class='pln'>2350</p>
<p class='pln'>2351</p>
<p class='pln'>2352</p>
<p class='stm mis'>2353</p>
<p class='pln'>2354</p>
<p class='stm mis'>2355</p>
<p class='stm mis'>2356</p>
<p class='stm mis'>2357</p>
<p class='stm mis'>2358</p>
<p class='stm mis'>2359</p>
<p class='stm mis'>2360</p>
<p class='stm mis'>2361</p>
<p class='pln'>2362</p>
<p class='stm mis'>2363</p>
<p class='pln'>2364</p>
<p class='stm mis'>2365</p>
<p class='stm mis'>2366</p>
<p class='pln'>2367</p>
<p class='stm mis'>2368</p>
<p class='stm mis'>2369</p>
<p class='stm mis'>2370</p>
<p class='pln'>2371</p>
<p class='stm mis'>2372</p>
<p class='stm mis'>2373</p>
<p class='stm mis'>2374</p>
<p class='pln'>2375</p>
<p class='stm run hide_run'>2376</p>
<p class='pln'>2377</p>
<p class='stm mis'>2378</p>
<p class='stm mis'>2379</p>
<p class='stm mis'>2380</p>
<p class='pln'>2381</p>
<p class='stm run hide_run'>2382</p>
<p class='pln'>2383</p>
<p class='stm mis'>2384</p>
<p class='pln'>2385</p>
<p class='pln'>2386</p>
<p class='stm run hide_run'>2387</p>
<p class='pln'>2388</p>
<p class='pln'>2389</p>
<p class='pln'>2390</p>
<p class='pln'>2391</p>
<p class='pln'>2392</p>
<p class='pln'>2393</p>
<p class='pln'>2394</p>
<p class='pln'>2395</p>
<p class='pln'>2396</p>
<p class='pln'>2397</p>
<p class='pln'>2398</p>
<p class='pln'>2399</p>
<p class='pln'>2400</p>
<p class='pln'>2401</p>
<p class='pln'>2402</p>
<p class='pln'>2403</p>
<p class='pln'>2404</p>
<p class='pln'>2405</p>
<p class='pln'>2406</p>
<p class='pln'>2407</p>
<p class='pln'>2408</p>
<p class='pln'>2409</p>
<p class='pln'>2410</p>
<p class='pln'>2411</p>
<p class='pln'>2412</p>
<p class='pln'>2413</p>
<p class='pln'>2414</p>
<p class='pln'>2415</p>
<p class='pln'>2416</p>
<p class='pln'>2417</p>
<p class='pln'>2418</p>
<p class='stm mis'>2419</p>
<p class='stm mis'>2420</p>
<p class='stm mis'>2421</p>
<p class='stm mis'>2422</p>
<p class='stm mis'>2423</p>
<p class='stm mis'>2424</p>
<p class='stm mis'>2425</p>
<p class='stm mis'>2426</p>
<p class='stm mis'>2427</p>
<p class='stm mis'>2428</p>
<p class='stm mis'>2429</p>
<p class='stm mis'>2430</p>
<p class='stm mis'>2431</p>
<p class='pln'>2432</p>
<p class='pln'>2433</p>
<p class='stm run hide_run'>2434</p>
<p class='pln'>2435</p>
<p class='pln'>2436</p>
<p class='pln'>2437</p>
<p class='pln'>2438</p>
<p class='pln'>2439</p>
<p class='pln'>2440</p>
<p class='pln'>2441</p>
<p class='pln'>2442</p>
<p class='pln'>2443</p>
<p class='pln'>2444</p>
<p class='pln'>2445</p>
<p class='pln'>2446</p>
<p class='pln'>2447</p>
<p class='pln'>2448</p>
<p class='pln'>2449</p>
<p class='pln'>2450</p>
<p class='pln'>2451</p>
<p class='pln'>2452</p>
<p class='pln'>2453</p>
<p class='pln'>2454</p>
<p class='stm mis'>2455</p>
<p class='stm mis'>2456</p>
<p class='stm mis'>2457</p>
<p class='stm mis'>2458</p>
<p class='stm mis'>2459</p>
<p class='stm mis'>2460</p>
<p class='stm mis'>2461</p>
<p class='stm mis'>2462</p>
<p class='stm mis'>2463</p>
<p class='stm mis'>2464</p>
<p class='stm mis'>2465</p>
<p class='stm mis'>2466</p>
<p class='stm mis'>2467</p>
<p class='pln'>2468</p>
<p class='pln'>2469</p>
<p class='stm run hide_run'>2470</p>
<p class='pln'>2471</p>
<p class='pln'>2472</p>
<p class='pln'>2473</p>
<p class='pln'>2474</p>
<p class='pln'>2475</p>
<p class='pln'>2476</p>
<p class='pln'>2477</p>
<p class='pln'>2478</p>
<p class='pln'>2479</p>
<p class='pln'>2480</p>
<p class='pln'>2481</p>
<p class='pln'>2482</p>
<p class='pln'>2483</p>
<p class='pln'>2484</p>
<p class='pln'>2485</p>
<p class='stm mis'>2486</p>
<p class='pln'>2487</p>
<p class='pln'>2488</p>
<p class='stm run hide_run'>2489</p>
<p class='pln'>2490</p>
<p class='pln'>2491</p>
<p class='pln'>2492</p>
<p class='pln'>2493</p>
<p class='pln'>2494</p>
<p class='pln'>2495</p>
<p class='stm mis'>2496</p>
<p class='stm mis'>2497</p>
<p class='stm mis'>2498</p>
<p class='pln'>2499</p>
<p class='stm mis'>2500</p>
<p class='pln'>2501</p>
<p class='stm mis'>2502</p>
<p class='stm mis'>2503</p>
<p class='pln'>2504</p>
<p class='pln'>2505</p>
<p class='stm run hide_run'>2506</p>
<p class='pln'>2507</p>
<p class='pln'>2508</p>
<p class='pln'>2509</p>
<p class='pln'>2510</p>
<p class='pln'>2511</p>
<p class='pln'>2512</p>
<p class='pln'>2513</p>
<p class='pln'>2514</p>
<p class='pln'>2515</p>
<p class='pln'>2516</p>
<p class='pln'>2517</p>
<p class='pln'>2518</p>
<p class='pln'>2519</p>
<p class='pln'>2520</p>
<p class='pln'>2521</p>
<p class='pln'>2522</p>
<p class='pln'>2523</p>
<p class='pln'>2524</p>
<p class='pln'>2525</p>
<p class='pln'>2526</p>
<p class='pln'>2527</p>
<p class='pln'>2528</p>
<p class='pln'>2529</p>
<p class='pln'>2530</p>
<p class='pln'>2531</p>
<p class='pln'>2532</p>
<p class='pln'>2533</p>
<p class='pln'>2534</p>
<p class='pln'>2535</p>
<p class='pln'>2536</p>
<p class='pln'>2537</p>
<p class='pln'>2538</p>
<p class='pln'>2539</p>
<p class='pln'>2540</p>
<p class='pln'>2541</p>
<p class='pln'>2542</p>
<p class='pln'>2543</p>
<p class='pln'>2544</p>
<p class='pln'>2545</p>
<p class='pln'>2546</p>
<p class='pln'>2547</p>
<p class='pln'>2548</p>
<p class='pln'>2549</p>
<p class='pln'>2550</p>
<p class='pln'>2551</p>
<p class='stm mis'>2552</p>
<p class='stm mis'>2553</p>
<p class='pln'>2554</p>
<p class='stm mis'>2555</p>
<p class='stm mis'>2556</p>
<p class='stm mis'>2557</p>
<p class='stm mis'>2558</p>
<p class='stm mis'>2559</p>
<p class='stm mis'>2560</p>
<p class='stm mis'>2561</p>
<p class='pln'>2562</p>
<p class='stm mis'>2563</p>
<p class='stm mis'>2564</p>
<p class='stm mis'>2565</p>
<p class='stm mis'>2566</p>
<p class='stm mis'>2567</p>
<p class='stm mis'>2568</p>
<p class='stm mis'>2569</p>
<p class='pln'>2570</p>
<p class='pln'>2571</p>
<p class='stm run hide_run'>2572</p>
<p class='pln'>2573</p>
<p class='pln'>2574</p>
<p class='pln'>2575</p>
<p class='pln'>2576</p>
<p class='pln'>2577</p>
<p class='pln'>2578</p>
<p class='pln'>2579</p>
<p class='pln'>2580</p>
<p class='pln'>2581</p>
<p class='pln'>2582</p>
<p class='pln'>2583</p>
<p class='pln'>2584</p>
<p class='pln'>2585</p>
<p class='pln'>2586</p>
<p class='pln'>2587</p>
<p class='pln'>2588</p>
<p class='pln'>2589</p>
<p class='pln'>2590</p>
<p class='pln'>2591</p>
<p class='pln'>2592</p>
<p class='pln'>2593</p>
<p class='pln'>2594</p>
<p class='pln'>2595</p>
<p class='pln'>2596</p>
<p class='pln'>2597</p>
<p class='pln'>2598</p>
<p class='pln'>2599</p>
<p class='pln'>2600</p>
<p class='pln'>2601</p>
<p class='pln'>2602</p>
<p class='pln'>2603</p>
<p class='pln'>2604</p>
<p class='pln'>2605</p>
<p class='pln'>2606</p>
<p class='pln'>2607</p>
<p class='pln'>2608</p>
<p class='pln'>2609</p>
<p class='pln'>2610</p>
<p class='pln'>2611</p>
<p class='pln'>2612</p>
<p class='pln'>2613</p>
<p class='pln'>2614</p>
<p class='pln'>2615</p>
<p class='pln'>2616</p>
<p class='pln'>2617</p>
<p class='pln'>2618</p>
<p class='pln'>2619</p>
<p class='pln'>2620</p>
<p class='pln'>2621</p>
<p class='stm mis'>2622</p>
<p class='stm mis'>2623</p>
<p class='stm mis'>2624</p>
<p class='stm mis'>2625</p>
<p class='stm mis'>2626</p>
<p class='stm mis'>2627</p>
<p class='stm mis'>2628</p>
<p class='stm mis'>2629</p>
<p class='pln'>2630</p>
<p class='pln'>2631</p>
<p class='stm run hide_run'>2632</p>
<p class='pln'>2633</p>
<p class='pln'>2634</p>
<p class='pln'>2635</p>
<p class='pln'>2636</p>
<p class='pln'>2637</p>
<p class='pln'>2638</p>
<p class='pln'>2639</p>
<p class='pln'>2640</p>
<p class='pln'>2641</p>
<p class='pln'>2642</p>
<p class='pln'>2643</p>
<p class='pln'>2644</p>
<p class='pln'>2645</p>
<p class='pln'>2646</p>
<p class='pln'>2647</p>
<p class='pln'>2648</p>
<p class='pln'>2649</p>
<p class='pln'>2650</p>
<p class='pln'>2651</p>
<p class='pln'>2652</p>
<p class='pln'>2653</p>
<p class='pln'>2654</p>
<p class='pln'>2655</p>
<p class='pln'>2656</p>
<p class='pln'>2657</p>
<p class='pln'>2658</p>
<p class='pln'>2659</p>
<p class='pln'>2660</p>
<p class='pln'>2661</p>
<p class='pln'>2662</p>
<p class='pln'>2663</p>
<p class='pln'>2664</p>
<p class='pln'>2665</p>
<p class='pln'>2666</p>
<p class='pln'>2667</p>
<p class='pln'>2668</p>
<p class='pln'>2669</p>
<p class='pln'>2670</p>
<p class='pln'>2671</p>
<p class='pln'>2672</p>
<p class='pln'>2673</p>
<p class='pln'>2674</p>
<p class='pln'>2675</p>
<p class='pln'>2676</p>
<p class='pln'>2677</p>
<p class='pln'>2678</p>
<p class='pln'>2679</p>
<p class='pln'>2680</p>
<p class='stm mis'>2681</p>
<p class='stm mis'>2682</p>
<p class='pln'>2683</p>
<p class='stm mis'>2684</p>
<p class='stm mis'>2685</p>
<p class='stm mis'>2686</p>
<p class='stm mis'>2687</p>
<p class='stm mis'>2688</p>
<p class='stm mis'>2689</p>
<p class='stm mis'>2690</p>
<p class='pln'>2691</p>
<p class='stm mis'>2692</p>
<p class='stm mis'>2693</p>
<p class='stm mis'>2694</p>
<p class='stm mis'>2695</p>
<p class='stm mis'>2696</p>
<p class='stm mis'>2697</p>
<p class='stm mis'>2698</p>
<p class='pln'>2699</p>
<p class='stm run hide_run'>2700</p>
<p class='pln'>2701</p>
<p class='stm run hide_run'>2702</p>
<p class='pln'>2703</p>
<p class='pln'>2704</p>
<p class='pln'>2705</p>
<p class='pln'>2706</p>
<p class='pln'>2707</p>
<p class='pln'>2708</p>
<p class='pln'>2709</p>
<p class='pln'>2710</p>
<p class='pln'>2711</p>
<p class='pln'>2712</p>
<p class='pln'>2713</p>
<p class='pln'>2714</p>
<p class='pln'>2715</p>
<p class='pln'>2716</p>
<p class='pln'>2717</p>
<p class='pln'>2718</p>
<p class='pln'>2719</p>
<p class='pln'>2720</p>
<p class='pln'>2721</p>
<p class='pln'>2722</p>
<p class='pln'>2723</p>
<p class='pln'>2724</p>
<p class='pln'>2725</p>
<p class='pln'>2726</p>
<p class='pln'>2727</p>
<p class='pln'>2728</p>
<p class='pln'>2729</p>
<p class='pln'>2730</p>
<p class='pln'>2731</p>
<p class='pln'>2732</p>
<p class='pln'>2733</p>
<p class='pln'>2734</p>
<p class='pln'>2735</p>
<p class='pln'>2736</p>
<p class='pln'>2737</p>
<p class='pln'>2738</p>
<p class='pln'>2739</p>
<p class='pln'>2740</p>
<p class='pln'>2741</p>
<p class='pln'>2742</p>
<p class='pln'>2743</p>
<p class='stm mis'>2744</p>
<p class='stm mis'>2745</p>
<p class='stm mis'>2746</p>
<p class='stm mis'>2747</p>
<p class='stm mis'>2748</p>
<p class='stm mis'>2749</p>
<p class='stm mis'>2750</p>
<p class='stm mis'>2751</p>
<p class='pln'>2752</p>
<p class='pln'>2753</p>
<p class='stm run hide_run'>2754</p>
<p class='pln'>2755</p>
<p class='stm mis'>2756</p>
<p class='stm mis'>2757</p>
<p class='pln'>2758</p>
<p class='stm mis'>2759</p>
<p class='stm mis'>2760</p>
<p class='stm mis'>2761</p>
<p class='stm mis'>2762</p>
<p class='stm mis'>2763</p>
<p class='stm mis'>2764</p>
<p class='stm mis'>2765</p>
<p class='stm mis'>2766</p>
<p class='stm mis'>2767</p>
<p class='stm mis'>2768</p>
<p class='stm mis'>2769</p>
<p class='stm mis'>2770</p>
<p class='stm run hide_run'>2771</p>
<p class='pln'>2772</p>
<p class='stm run hide_run'>2773</p>
<p class='pln'>2774</p>
<p class='pln'>2775</p>
<p class='pln'>2776</p>
<p class='pln'>2777</p>
<p class='pln'>2778</p>
<p class='pln'>2779</p>
<p class='pln'>2780</p>
<p class='pln'>2781</p>
<p class='pln'>2782</p>
<p class='pln'>2783</p>
<p class='pln'>2784</p>
<p class='pln'>2785</p>
<p class='pln'>2786</p>
<p class='stm mis'>2787</p>
<p class='stm mis'>2788</p>
<p class='stm mis'>2789</p>
<p class='pln'>2790</p>
<p class='stm mis'>2791</p>
<p class='pln'>2792</p>
<p class='stm run hide_run'>2793</p>
<p class='pln'>2794</p>
<p class='pln'>2795</p>
<p class='stm mis'>2796</p>
<p class='stm mis'>2797</p>
<p class='pln'>2798</p>
<p class='stm mis'>2799</p>
<p class='stm mis'>2800</p>
<p class='stm mis'>2801</p>
<p class='stm mis'>2802</p>
<p class='pln'>2803</p>
<p class='stm mis'>2804</p>
<p class='stm mis'>2805</p>
<p class='pln'>2806</p>
<p class='stm mis'>2807</p>
<p class='stm mis'>2808</p>
<p class='stm mis'>2809</p>
<p class='stm mis'>2810</p>
<p class='pln'>2811</p>
<p class='stm mis'>2812</p>
<p class='stm mis'>2813</p>
<p class='stm mis'>2814</p>
<p class='stm mis'>2815</p>
<p class='pln'>2816</p>
<p class='stm mis'>2817</p>
<p class='stm mis'>2818</p>
<p class='pln'>2819</p>
<p class='stm mis'>2820</p>
<p class='pln'>2821</p>
<p class='stm mis'>2822</p>
<p class='pln'>2823</p>
<p class='stm mis'>2824</p>
<p class='stm mis'>2825</p>
<p class='stm mis'>2826</p>
<p class='stm mis'>2827</p>
<p class='stm run hide_run'>2828</p>
<p class='pln'>2829</p>
<p class='pln'>2830</p>
<p class='stm run hide_run'>2831</p>
<p class='pln'>2832</p>
<p class='stm mis'>2833</p>
<p class='stm mis'>2834</p>
<p class='stm mis'>2835</p>
<p class='stm mis'>2836</p>
<p class='stm mis'>2837</p>
<p class='stm mis'>2838</p>
<p class='stm mis'>2839</p>
<p class='stm run hide_run'>2840</p>
<p class='pln'>2841</p>
<p class='pln'>2842</p>
<p class='stm run hide_run'>2843</p>
<p class='pln'>2844</p>
<p class='pln'>2845</p>
<p class='pln'>2846</p>
<p class='pln'>2847</p>
<p class='pln'>2848</p>
<p class='pln'>2849</p>
<p class='pln'>2850</p>
<p class='pln'>2851</p>
<p class='pln'>2852</p>
<p class='pln'>2853</p>
<p class='stm mis'>2854</p>
<p class='stm mis'>2855</p>
<p class='stm mis'>2856</p>
<p class='pln'>2857</p>
<p class='stm mis'>2858</p>
<p class='stm mis'>2859</p>
<p class='stm mis'>2860</p>
<p class='stm mis'>2861</p>
<p class='stm mis'>2862</p>
<p class='stm run hide_run'>2863</p>
<p class='pln'>2864</p>
<p class='pln'>2865</p>
<p class='stm run hide_run'>2866</p>
<p class='pln'>2867</p>
<p class='pln'>2868</p>
<p class='pln'>2869</p>
<p class='pln'>2870</p>
<p class='pln'>2871</p>
<p class='pln'>2872</p>
<p class='pln'>2873</p>
<p class='pln'>2874</p>
<p class='pln'>2875</p>
<p class='pln'>2876</p>
<p class='pln'>2877</p>
<p class='pln'>2878</p>
<p class='pln'>2879</p>
<p class='pln'>2880</p>
<p class='pln'>2881</p>
<p class='pln'>2882</p>
<p class='pln'>2883</p>
<p class='pln'>2884</p>
<p class='pln'>2885</p>
<p class='pln'>2886</p>
<p class='pln'>2887</p>
<p class='pln'>2888</p>
<p class='pln'>2889</p>
<p class='pln'>2890</p>
<p class='pln'>2891</p>
<p class='pln'>2892</p>
<p class='pln'>2893</p>
<p class='pln'>2894</p>
<p class='pln'>2895</p>
<p class='pln'>2896</p>
<p class='pln'>2897</p>
<p class='pln'>2898</p>
<p class='pln'>2899</p>
<p class='pln'>2900</p>
<p class='pln'>2901</p>
<p class='pln'>2902</p>
<p class='pln'>2903</p>
<p class='pln'>2904</p>
<p class='pln'>2905</p>
<p class='pln'>2906</p>
<p class='pln'>2907</p>
<p class='pln'>2908</p>
<p class='pln'>2909</p>
<p class='pln'>2910</p>
<p class='stm mis'>2911</p>
<p class='stm mis'>2912</p>
<p class='stm mis'>2913</p>
<p class='stm mis'>2914</p>
<p class='pln'>2915</p>
<p class='pln'>2916</p>
<p class='stm run hide_run'>2917</p>
<p class='pln'>2918</p>
<p class='pln'>2919</p>
<p class='pln'>2920</p>
<p class='pln'>2921</p>
<p class='pln'>2922</p>
<p class='pln'>2923</p>
<p class='pln'>2924</p>
<p class='pln'>2925</p>
<p class='pln'>2926</p>
<p class='pln'>2927</p>
<p class='pln'>2928</p>
<p class='pln'>2929</p>
<p class='pln'>2930</p>
<p class='pln'>2931</p>
<p class='pln'>2932</p>
<p class='pln'>2933</p>
<p class='pln'>2934</p>
<p class='pln'>2935</p>
<p class='pln'>2936</p>
<p class='pln'>2937</p>
<p class='pln'>2938</p>
<p class='pln'>2939</p>
<p class='pln'>2940</p>
<p class='pln'>2941</p>
<p class='pln'>2942</p>
<p class='pln'>2943</p>
<p class='pln'>2944</p>
<p class='pln'>2945</p>
<p class='pln'>2946</p>
<p class='pln'>2947</p>
<p class='pln'>2948</p>
<p class='pln'>2949</p>
<p class='pln'>2950</p>
<p class='pln'>2951</p>
<p class='pln'>2952</p>
<p class='stm mis'>2953</p>
<p class='stm mis'>2954</p>
<p class='stm mis'>2955</p>
<p class='stm mis'>2956</p>
<p class='pln'>2957</p>
<p class='pln'>2958</p>
<p class='stm run hide_run'>2959</p>
<p class='pln'>2960</p>
<p class='pln'>2961</p>
<p class='pln'>2962</p>
<p class='pln'>2963</p>
<p class='pln'>2964</p>
<p class='pln'>2965</p>
<p class='pln'>2966</p>
<p class='pln'>2967</p>
<p class='pln'>2968</p>
<p class='pln'>2969</p>
<p class='pln'>2970</p>
<p class='pln'>2971</p>
<p class='pln'>2972</p>
<p class='pln'>2973</p>
<p class='pln'>2974</p>
<p class='pln'>2975</p>
<p class='pln'>2976</p>
<p class='pln'>2977</p>
<p class='pln'>2978</p>
<p class='pln'>2979</p>
<p class='pln'>2980</p>
<p class='pln'>2981</p>
<p class='pln'>2982</p>
<p class='pln'>2983</p>
<p class='pln'>2984</p>
<p class='pln'>2985</p>
<p class='pln'>2986</p>
<p class='pln'>2987</p>
<p class='pln'>2988</p>
<p class='pln'>2989</p>
<p class='pln'>2990</p>
<p class='stm mis'>2991</p>
<p class='stm mis'>2992</p>
<p class='stm mis'>2993</p>
<p class='stm mis'>2994</p>
<p class='pln'>2995</p>
<p class='pln'>2996</p>
<p class='stm run hide_run'>2997</p>
<p class='pln'>2998</p>
<p class='pln'>2999</p>
<p class='pln'>3000</p>
<p class='pln'>3001</p>
<p class='pln'>3002</p>
<p class='pln'>3003</p>
<p class='pln'>3004</p>
<p class='pln'>3005</p>
<p class='pln'>3006</p>
<p class='pln'>3007</p>
<p class='pln'>3008</p>
<p class='pln'>3009</p>
<p class='pln'>3010</p>
<p class='pln'>3011</p>
<p class='pln'>3012</p>
<p class='pln'>3013</p>
<p class='pln'>3014</p>
<p class='pln'>3015</p>
<p class='pln'>3016</p>
<p class='pln'>3017</p>
<p class='pln'>3018</p>
<p class='pln'>3019</p>
<p class='pln'>3020</p>
<p class='pln'>3021</p>
<p class='pln'>3022</p>
<p class='pln'>3023</p>
<p class='pln'>3024</p>
<p class='pln'>3025</p>
<p class='pln'>3026</p>
<p class='pln'>3027</p>
<p class='pln'>3028</p>
<p class='pln'>3029</p>
<p class='pln'>3030</p>
<p class='pln'>3031</p>
<p class='pln'>3032</p>
<p class='pln'>3033</p>
<p class='pln'>3034</p>
<p class='pln'>3035</p>
<p class='pln'>3036</p>
<p class='pln'>3037</p>
<p class='pln'>3038</p>
<p class='pln'>3039</p>
<p class='pln'>3040</p>
<p class='pln'>3041</p>
<p class='pln'>3042</p>
<p class='pln'>3043</p>
<p class='pln'>3044</p>
<p class='pln'>3045</p>
<p class='pln'>3046</p>
<p class='stm mis'>3047</p>
<p class='stm mis'>3048</p>
<p class='pln'>3049</p>
<p class='stm mis'>3050</p>
<p class='stm mis'>3051</p>
<p class='stm mis'>3052</p>
<p class='pln'>3053</p>
<p class='stm mis'>3054</p>
<p class='pln'>3055</p>
<p class='stm mis'>3056</p>
<p class='stm mis'>3057</p>
<p class='stm mis'>3058</p>
<p class='stm mis'>3059</p>
<p class='stm mis'>3060</p>
<p class='stm mis'>3061</p>
<p class='stm mis'>3062</p>
<p class='stm mis'>3063</p>
<p class='stm mis'>3064</p>
<p class='pln'>3065</p>
<p class='pln'>3066</p>
<p class='stm run hide_run'>3067</p>
<p class='pln'>3068</p>
<p class='pln'>3069</p>
<p class='pln'>3070</p>
<p class='pln'>3071</p>
<p class='pln'>3072</p>
<p class='pln'>3073</p>
<p class='pln'>3074</p>
<p class='pln'>3075</p>
<p class='pln'>3076</p>
<p class='pln'>3077</p>
<p class='pln'>3078</p>
<p class='pln'>3079</p>
<p class='pln'>3080</p>
<p class='pln'>3081</p>
<p class='pln'>3082</p>
<p class='pln'>3083</p>
<p class='pln'>3084</p>
<p class='pln'>3085</p>
<p class='pln'>3086</p>
<p class='pln'>3087</p>
<p class='pln'>3088</p>
<p class='pln'>3089</p>
<p class='pln'>3090</p>
<p class='pln'>3091</p>
<p class='pln'>3092</p>
<p class='pln'>3093</p>
<p class='pln'>3094</p>
<p class='stm mis'>3095</p>
<p class='stm mis'>3096</p>
<p class='stm mis'>3097</p>
<p class='stm mis'>3098</p>
<p class='pln'>3099</p>
<p class='stm mis'>3100</p>
<p class='stm mis'>3101</p>
<p class='stm mis'>3102</p>
<p class='pln'>3103</p>
<p class='stm mis'>3104</p>
<p class='pln'>3105</p>
<p class='stm mis'>3106</p>
<p class='stm mis'>3107</p>
<p class='stm mis'>3108</p>
<p class='stm mis'>3109</p>
<p class='stm mis'>3110</p>
<p class='pln'>3111</p>
<p class='stm mis'>3112</p>
<p class='stm mis'>3113</p>
<p class='stm mis'>3114</p>
<p class='stm mis'>3115</p>
<p class='stm mis'>3116</p>
<p class='stm mis'>3117</p>
<p class='pln'>3118</p>
<p class='stm mis'>3119</p>
<p class='stm mis'>3120</p>
<p class='pln'>3121</p>
<p class='stm run hide_run'>3122</p>
<p class='stm mis'>3123</p>
<p class='stm mis'>3124</p>
<p class='pln'>3125</p>
<p class='stm mis'>3126</p>
<p class='pln'>3127</p>
<p class='pln'>3128</p>
<p class='stm run hide_run'>3129</p>
<p class='pln'>3130</p>
<p class='pln'>3131</p>
<p class='pln'>3132</p>
<p class='pln'>3133</p>
<p class='pln'>3134</p>
<p class='pln'>3135</p>
<p class='pln'>3136</p>
<p class='pln'>3137</p>
<p class='pln'>3138</p>
<p class='pln'>3139</p>
<p class='pln'>3140</p>
<p class='pln'>3141</p>
<p class='pln'>3142</p>
<p class='pln'>3143</p>
<p class='pln'>3144</p>
<p class='pln'>3145</p>
<p class='pln'>3146</p>
<p class='pln'>3147</p>
<p class='pln'>3148</p>
<p class='pln'>3149</p>
<p class='pln'>3150</p>
<p class='pln'>3151</p>
<p class='pln'>3152</p>
<p class='pln'>3153</p>
<p class='pln'>3154</p>
<p class='pln'>3155</p>
<p class='pln'>3156</p>
<p class='stm mis'>3157</p>
<p class='stm mis'>3158</p>
<p class='stm mis'>3159</p>
<p class='stm mis'>3160</p>
<p class='pln'>3161</p>
<p class='stm mis'>3162</p>
<p class='stm mis'>3163</p>
<p class='stm mis'>3164</p>
<p class='pln'>3165</p>
<p class='stm mis'>3166</p>
<p class='pln'>3167</p>
<p class='stm mis'>3168</p>
<p class='stm mis'>3169</p>
<p class='stm mis'>3170</p>
<p class='stm mis'>3171</p>
<p class='stm mis'>3172</p>
<p class='pln'>3173</p>
<p class='stm mis'>3174</p>
<p class='stm mis'>3175</p>
<p class='stm mis'>3176</p>
<p class='stm mis'>3177</p>
<p class='stm mis'>3178</p>
<p class='stm mis'>3179</p>
<p class='pln'>3180</p>
<p class='stm mis'>3181</p>
<p class='stm mis'>3182</p>
<p class='pln'>3183</p>
<p class='stm run hide_run'>3184</p>
<p class='pln'>3185</p>
<p class='pln'>3186</p>
<p class='pln'>3187</p>
<p class='pln'>3188</p>
<p class='pln'>3189</p>
<p class='pln'>3190</p>
<p class='pln'>3191</p>
<p class='pln'>3192</p>
<p class='pln'>3193</p>
<p class='pln'>3194</p>
<p class='pln'>3195</p>
<p class='pln'>3196</p>
<p class='pln'>3197</p>
<p class='pln'>3198</p>
<p class='pln'>3199</p>
<p class='pln'>3200</p>
<p class='pln'>3201</p>
<p class='pln'>3202</p>
<p class='pln'>3203</p>
<p class='pln'>3204</p>
<p class='pln'>3205</p>
<p class='pln'>3206</p>
<p class='pln'>3207</p>
<p class='stm mis'>3208</p>
<p class='stm mis'>3209</p>
<p class='stm mis'>3210</p>
<p class='stm mis'>3211</p>
<p class='stm mis'>3212</p>
<p class='stm mis'>3213</p>
<p class='stm mis'>3214</p>
<p class='pln'>3215</p>
<p class='pln'>3216</p>
<p class='pln'>3217</p>
<p class='stm run hide_run'>3218</p>
<p class='stm run hide_run'>3219</p>
<p class='stm run hide_run'>3220</p>
<p class='stm run hide_run'>3221</p>
<p class='stm run hide_run'>3222</p>
<p class='stm run hide_run'>3223</p>
<p class='stm run hide_run'>3224</p>
<p class='stm run hide_run'>3225</p>
<p class='stm run hide_run'>3226</p>
<p class='pln'>3227</p>
<p class='stm run hide_run'>3228</p>
<p class='pln'>3229</p>
<p class='pln'>3230</p>
<p class='pln'>3231</p>
<p class='pln'>3232</p>
<p class='pln'>3233</p>
<p class='pln'>3234</p>
<p class='pln'>3235</p>
<p class='pln'>3236</p>
<p class='pln'>3237</p>
<p class='pln'>3238</p>
<p class='stm mis'>3239</p>
<p class='stm mis'>3240</p>
<p class='stm mis'>3241</p>
<p class='pln'>3242</p>
<p class='stm mis'>3243</p>
<p class='stm mis'>3244</p>
<p class='stm mis'>3245</p>
<p class='stm mis'>3246</p>
<p class='stm mis'>3247</p>
<p class='stm mis'>3248</p>
<p class='stm mis'>3249</p>
<p class='stm mis'>3250</p>
<p class='stm mis'>3251</p>
<p class='stm mis'>3252</p>
<p class='stm mis'>3253</p>
<p class='pln'>3254</p>
<p class='stm mis'>3255</p>
<p class='stm mis'>3256</p>
<p class='pln'>3257</p>
<p class='stm mis'>3258</p>
<p class='stm mis'>3259</p>
<p class='stm mis'>3260</p>
<p class='stm mis'>3261</p>
<p class='stm mis'>3262</p>
<p class='stm mis'>3263</p>
<p class='pln'>3264</p>
<p class='stm run hide_run'>3265</p>
<p class='pln'>3266</p>
<p class='pln'>3267</p>
<p class='pln'>3268</p>
<p class='pln'>3269</p>
<p class='pln'>3270</p>
<p class='pln'>3271</p>
<p class='pln'>3272</p>
<p class='pln'>3273</p>
<p class='pln'>3274</p>
<p class='pln'>3275</p>
<p class='pln'>3276</p>
<p class='pln'>3277</p>
<p class='pln'>3278</p>
<p class='pln'>3279</p>
<p class='pln'>3280</p>
<p class='pln'>3281</p>
<p class='pln'>3282</p>
<p class='pln'>3283</p>
<p class='pln'>3284</p>
<p class='pln'>3285</p>
<p class='pln'>3286</p>
<p class='pln'>3287</p>
<p class='stm mis'>3288</p>
<p class='pln'>3289</p>
<p class='stm run hide_run'>3290</p>
<p class='stm mis'>3291</p>
<p class='pln'>3292</p>
<p class='stm run hide_run'>3293</p>
<p class='pln'>3294</p>
<p class='pln'>3295</p>
<p class='pln'>3296</p>
<p class='pln'>3297</p>
<p class='pln'>3298</p>
<p class='pln'>3299</p>
<p class='pln'>3300</p>
<p class='pln'>3301</p>
<p class='pln'>3302</p>
<p class='pln'>3303</p>
<p class='pln'>3304</p>
<p class='pln'>3305</p>
<p class='pln'>3306</p>
<p class='pln'>3307</p>
<p class='pln'>3308</p>
<p class='pln'>3309</p>
<p class='pln'>3310</p>
<p class='pln'>3311</p>
<p class='pln'>3312</p>
<p class='pln'>3313</p>
<p class='pln'>3314</p>
<p class='pln'>3315</p>
<p class='pln'>3316</p>
<p class='pln'>3317</p>
<p class='pln'>3318</p>
<p class='pln'>3319</p>
<p class='pln'>3320</p>
<p class='pln'>3321</p>
<p class='pln'>3322</p>
<p class='pln'>3323</p>
<p class='pln'>3324</p>
<p class='stm mis'>3325</p>
<p class='pln'>3326</p>
<p class='stm mis'>3327</p>
<p class='stm mis'>3328</p>
<p class='stm mis'>3329</p>
<p class='pln'>3330</p>
<p class='stm mis'>3331</p>
<p class='pln'>3332</p>
<p class='stm mis'>3333</p>
<p class='pln'>3334</p>
<p class='stm mis'>3335</p>
<p class='stm mis'>3336</p>
<p class='stm mis'>3337</p>
<p class='pln'>3338</p>
<p class='pln'>3339</p>
<p class='stm run hide_run'>3340</p>
<p class='pln'>3341</p>
<p class='pln'>3342</p>
<p class='pln'>3343</p>
<p class='pln'>3344</p>
<p class='stm mis'>3345</p>
<p class='pln'>3346</p>
<p class='pln'>3347</p>
<p class='pln'>3348</p>
<p class='pln'>3349</p>
<p class='pln'>3350</p>
<p class='pln'>3351</p>
<p class='pln'>3352</p>
<p class='stm mis'>3353</p>
<p class='pln'>3354</p>
<p class='stm run hide_run'>3355</p>
<p class='pln'>3356</p>
<p class='pln'>3357</p>
<p class='pln'>3358</p>
<p class='pln'>3359</p>
<p class='pln'>3360</p>
<p class='pln'>3361</p>
<p class='pln'>3362</p>
<p class='pln'>3363</p>
<p class='pln'>3364</p>
<p class='pln'>3365</p>
<p class='pln'>3366</p>
<p class='stm mis'>3367</p>
<p class='stm mis'>3368</p>
<p class='stm mis'>3369</p>
<p class='stm mis'>3370</p>
<p class='pln'>3371</p>
<p class='stm run hide_run'>3372</p>
<p class='pln'>3373</p>
<p class='pln'>3374</p>
<p class='pln'>3375</p>
<p class='stm mis'>3376</p>
<p class='pln'>3377</p>
<p class='pln'>3378</p>
<p class='pln'>3379</p>
<p class='stm run hide_run'>3380</p>
<p class='stm mis'>3381</p>
<p class='stm mis'>3382</p>
<p class='stm mis'>3383</p>
<p class='stm mis'>3384</p>
<p class='stm mis'>3385</p>
<p class='stm mis'>3386</p>
<p class='pln'>3387</p>
<p class='pln'>3388</p>
<p class='stm run hide_run'>3389</p>
<p class='pln'>3390</p>
<p class='pln'>3391</p>
<p class='pln'>3392</p>
<p class='pln'>3393</p>
<p class='stm mis'>3394</p>
<p class='stm mis'>3395</p>
<p class='stm mis'>3396</p>
<p class='pln'>3397</p>
<p class='pln'>3398</p>
<p class='pln'>3399</p>
<p class='pln'>3400</p>
<p class='pln'>3401</p>
<p class='stm run hide_run'>3402</p>
<p class='pln'>3403</p>
<p class='stm mis'>3404</p>
<p class='stm run hide_run'>3405</p>
<p class='stm run hide_run'>3406</p>
<p class='pln'>3407</p>
<p class='pln'>3408</p>
<p class='stm run hide_run'>3409</p>
<p class='stm run hide_run'>3410</p>
<p class='pln'>3411</p>
<p class='stm run hide_run'>3412</p>
<p class='pln'>3413</p>
<p class='stm run hide_run'>3414</p>
<p class='pln'>3415</p>
<p class='pln'>3416</p>
<p class='pln'>3417</p>
<p class='pln'>3418</p>
<p class='pln'>3419</p>
<p class='pln'>3420</p>
<p class='pln'>3421</p>
<p class='pln'>3422</p>
<p class='pln'>3423</p>
<p class='pln'>3424</p>
<p class='pln'>3425</p>
<p class='pln'>3426</p>
<p class='stm mis'>3427</p>
<p class='pln'>3428</p>
<p class='pln'>3429</p>
<p class='stm run hide_run'>3430</p>
<p class='pln'>3431</p>
<p class='stm run hide_run'>3432</p>
<p class='pln'>3433</p>
<p class='stm mis'>3434</p>
<p class='stm mis'>3435</p>
<p class='stm mis'>3436</p>
<p class='stm mis'>3437</p>
<p class='stm mis'>3438</p>
<p class='stm mis'>3439</p>
<p class='pln'>3440</p>
<p class='pln'>3441</p>
<p class='pln'>3442</p>
<p class='pln'>3443</p>
<p class='pln'>3444</p>
<p class='stm run hide_run'>3445</p>
<p class='pln'>3446</p>
<p class='stm run hide_run'>3447</p>
<p class='pln'>3448</p>
<p class='stm mis'>3449</p>
<p class='stm mis'>3450</p>
<p class='stm mis'>3451</p>
<p class='pln'>3452</p>
<p class='stm run hide_run'>3453</p>
<p class='pln'>3454</p>
<p class='stm mis'>3455</p>
<p class='stm mis'>3456</p>
<p class='stm mis'>3457</p>
<p class='stm mis'>3458</p>
<p class='pln'>3459</p>
<p class='stm mis'>3460</p>
<p class='stm mis'>3461</p>
<p class='stm mis'>3462</p>
<p class='stm mis'>3463</p>
<p class='stm mis'>3464</p>
<p class='stm mis'>3465</p>
<p class='pln'>3466</p>
<p class='stm mis'>3467</p>
<p class='stm mis'>3468</p>
<p class='stm mis'>3469</p>
<p class='stm mis'>3470</p>
<p class='stm mis'>3471</p>
<p class='stm mis'>3472</p>
<p class='stm mis'>3473</p>
<p class='stm mis'>3474</p>
<p class='pln'>3475</p>
<p class='stm run hide_run'>3476</p>
<p class='pln'>3477</p>
<p class='stm mis'>3478</p>
<p class='stm mis'>3479</p>
<p class='stm mis'>3480</p>
<p class='stm mis'>3481</p>
<p class='pln'>3482</p>
<p class='stm mis'>3483</p>
<p class='stm mis'>3484</p>
<p class='stm mis'>3485</p>
<p class='stm mis'>3486</p>
<p class='stm mis'>3487</p>
<p class='stm mis'>3488</p>
<p class='stm mis'>3489</p>
<p class='stm mis'>3490</p>
<p class='pln'>3491</p>
<p class='pln'>3492</p>
<p class='stm run hide_run'>3493</p>
<p class='pln'>3494</p>
<p class='stm run hide_run'>3495</p>
<p class='pln'>3496</p>
<p class='pln'>3497</p>
<p class='pln'>3498</p>
<p class='stm run hide_run'>3499</p>
<p class='stm run hide_run'>3500</p>
<p class='stm run hide_run'>3501</p>
<p class='stm run hide_run'>3502</p>
<p class='pln'>3503</p>
<p class='pln'>3504</p>
<p class='stm run hide_run'>3505</p>
<p class='pln'>3506</p>
<p class='stm run hide_run'>3507</p>
<p class='pln'>3508</p>
<p class='pln'>3509</p>
<p class='pln'>3510</p>
<p class='stm run hide_run'>3511</p>
<p class='stm run hide_run'>3512</p>
<p class='stm run hide_run'>3513</p>
<p class='stm run hide_run'>3514</p>
<p class='pln'>3515</p>
<p class='pln'>3516</p>
<p class='stm run hide_run'>3517</p>
<p class='stm mis'>3518</p>
<p class='stm mis'>3519</p>
<p class='stm mis'>3520</p>
<p class='pln'>3521</p>
<p class='pln'>3522</p>
<p class='stm mis'>3523</p>
<p class='stm run hide_run'>3524</p>
<p class='pln'>3525</p>
<p class='stm run hide_run'>3526</p>
<p class='stm mis'>3527</p>
<p class='stm mis'>3528</p>
<p class='stm mis'>3529</p>
<p class='pln'>3530</p>
<p class='pln'>3531</p>
<p class='stm mis'>3532</p>
<p class='stm run hide_run'>3533</p>
<p class='pln'>3534</p>
<p class='stm run hide_run'>3535</p>
<p class='pln'>3536</p>
<p class='stm mis'>3537</p>
<p class='stm mis'>3538</p>
<p class='stm mis'>3539</p>
<p class='pln'>3540</p>
<p class='pln'>3541</p>
<p class='stm mis'>3542</p>
<p class='stm run hide_run'>3543</p>
<p class='pln'>3544</p>
<p class='pln'>3545</p>
<p class='pln'>3546</p>
<p class='pln'>3547</p>
<p class='pln'>3548</p>
<p class='stm run hide_run'>3549</p>
<p class='pln'>3550</p>
<p class='pln'>3551</p>
<p class='pln'>3552</p>
<p class='pln'>3553</p>
<p class='pln'>3554</p>
<p class='pln'>3555</p>
<p class='pln'>3556</p>
<p class='pln'>3557</p>
<p class='stm run hide_run'>3558</p>
<p class='stm run hide_run'>3559</p>
<p class='stm run hide_run'>3560</p>
<p class='stm run hide_run'>3561</p>
<p class='pln'>3562</p>
<p class='stm run hide_run'>3563</p>
<p class='stm run hide_run'>3564</p>
<p class='stm mis'>3565</p>
<p class='stm mis'>3566</p>
<p class='stm run hide_run'>3567</p>
<p class='stm mis'>3568</p>
<p class='stm mis'>3569</p>
<p class='pln'>3570</p>
<p class='pln'>3571</p>
<p class='pln'>3572</p>
<p class='pln'>3573</p>
<p class='pln'>3574</p>
<p class='pln'>3575</p>
<p class='stm mis'>3576</p>
<p class='stm mis'>3577</p>
<p class='stm mis'>3578</p>
<p class='stm mis'>3579</p>
<p class='stm mis'>3580</p>
<p class='pln'>3581</p>
<p class='stm run hide_run'>3582</p>
<p class='stm run hide_run'>3583</p>
<p class='stm run hide_run'>3584</p>
<p class='stm run hide_run'>3585</p>
<p class='stm run hide_run'>3586</p>
<p class='stm run hide_run'>3587</p>
<p class='stm run hide_run'>3588</p>
<p class='stm run hide_run'>3589</p>
<p class='stm run hide_run'>3590</p>
<p class='stm run hide_run'>3591</p>
<p class='stm run hide_run'>3592</p>
<p class='stm run hide_run'>3593</p>
<p class='stm run hide_run'>3594</p>
<p class='stm run hide_run'>3595</p>
<p class='stm run hide_run'>3596</p>
<p class='stm run hide_run'>3597</p>
<p class='stm run hide_run'>3598</p>
<p class='stm run hide_run'>3599</p>
<p class='stm run hide_run'>3600</p>
<p class='stm run hide_run'>3601</p>
<p class='stm run hide_run'>3602</p>
<p class='stm run hide_run'>3603</p>
<p class='pln'>3604</p>
<p class='pln'>3605</p>
<p class='stm run hide_run'>3606</p>
<p class='pln'>3607</p>
<p class='pln'>3608</p>
<p class='pln'>3609</p>
<p class='stm mis'>3610</p>
<p class='stm mis'>3611</p>
<p class='pln'>3612</p>
<p class='stm mis'>3613</p>
<p class='stm mis'>3614</p>
<p class='stm mis'>3615</p>
<p class='pln'>3616</p>
<p class='stm mis'>3617</p>
<p class='stm mis'>3618</p>
<p class='pln'>3619</p>
<p class='stm mis'>3620</p>
<p class='stm mis'>3621</p>
<p class='pln'>3622</p>
<p class='stm mis'>3623</p>
<p class='pln'>3624</p>
<p class='stm mis'>3625</p>
<p class='pln'>3626</p>
<p class='stm mis'>3627</p>
<p class='pln'>3628</p>
<p class='stm mis'>3629</p>
<p class='stm mis'>3630</p>
<p class='pln'>3631</p>
<p class='stm mis'>3632</p>
<p class='stm mis'>3633</p>
<p class='stm mis'>3634</p>
<p class='stm mis'>3635</p>
<p class='pln'>3636</p>
<p class='stm mis'>3637</p>
<p class='stm mis'>3638</p>
<p class='stm mis'>3639</p>
<p class='stm mis'>3640</p>
<p class='stm mis'>3641</p>
<p class='stm mis'>3642</p>
<p class='pln'>3643</p>
<p class='pln'>3644</p>
<p class='pln'>3645</p>
<p class='pln'>3646</p>
<p class='pln'>3647</p>
<p class='pln'>3648</p>
<p class='pln'>3649</p>
<p class='pln'>3650</p>
<p class='pln'>3651</p>
<p class='pln'>3652</p>
<p class='pln'>3653</p>
<p class='pln'>3654</p>
<p class='pln'>3655</p>
<p class='pln'>3656</p>
<p class='pln'>3657</p>
<p class='stm run hide_run'>3658</p>
<p class='pln'>3659</p>
<p class='stm mis'>3660</p>
<p class='stm mis'>3661</p>
<p class='stm mis'>3662</p>
<p class='stm mis'>3663</p>
<p class='stm mis'>3664</p>
<p class='stm mis'>3665</p>
<p class='stm run hide_run'>3666</p>
<p class='pln'>3667</p>
<p class='stm run hide_run'>3668</p>
<p class='pln'>3669</p>
<p class='stm mis'>3670</p>
<p class='stm mis'>3671</p>
<p class='stm mis'>3672</p>
<p class='stm mis'>3673</p>
<p class='stm run hide_run'>3674</p>
<p class='pln'>3675</p>
<p class='stm run hide_run'>3676</p>
<p class='pln'>3677</p>
<p class='stm mis'>3678</p>
<p class='stm mis'>3679</p>
<p class='stm mis'>3680</p>
<p class='stm mis'>3681</p>
<p class='stm mis'>3682</p>
<p class='stm mis'>3683</p>
<p class='stm mis'>3684</p>
<p class='stm mis'>3685</p>
<p class='stm run hide_run'>3686</p>
<p class='pln'>3687</p>
<p class='stm run hide_run'>3688</p>
<p class='pln'>3689</p>
<p class='stm mis'>3690</p>
<p class='stm mis'>3691</p>
<p class='stm mis'>3692</p>
<p class='stm mis'>3693</p>
<p class='stm mis'>3694</p>
<p class='stm mis'>3695</p>
<p class='stm mis'>3696</p>
<p class='pln'>3697</p>
<p class='stm mis'>3698</p>
<p class='pln'>3699</p>
<p class='stm mis'>3700</p>
<p class='pln'>3701</p>
<p class='stm mis'>3702</p>
<p class='stm mis'>3703</p>
<p class='stm mis'>3704</p>
<p class='stm run hide_run'>3705</p>
<p class='pln'>3706</p>
<p class='pln'>3707</p>
<p class='stm run hide_run'>3708</p>
<p class='pln'>3709</p>
<p class='stm mis'>3710</p>
<p class='stm mis'>3711</p>
<p class='pln'>3712</p>
<p class='stm mis'>3713</p>
<p class='pln'>3714</p>
<p class='stm run hide_run'>3715</p>
<p class='pln'>3716</p>
<p class='stm mis'>3717</p>
<p class='stm mis'>3718</p>
<p class='stm mis'>3719</p>
<p class='pln'>3720</p>
<p class='stm mis'>3721</p>
<p class='stm mis'>3722</p>
<p class='stm mis'>3723</p>
<p class='pln'>3724</p>
<p class='stm mis'>3725</p>
<p class='pln'>3726</p>
<p class='stm mis'>3727</p>
<p class='pln'>3728</p>
<p class='pln'>3729</p>
<p class='pln'>3730</p>
<p class='pln'>3731</p>
<p class='stm mis'>3732</p>
<p class='stm mis'>3733</p>
<p class='pln'>3734</p>
<p class='stm mis'>3735</p>
<p class='stm mis'>3736</p>
<p class='pln'>3737</p>
<p class='stm run hide_run'>3738</p>
<p class='stm mis'>3739</p>
<p class='stm mis'>3740</p>
<p class='stm mis'>3741</p>
<p class='stm run hide_run'>3742</p>
<p class='pln'>3743</p>
<p class='pln'>3744</p>
<p class='stm run hide_run'>3745</p>
<p class='pln'>3746</p>
<p class='pln'>3747</p>
<p class='pln'>3748</p>
<p class='pln'>3749</p>
<p class='stm mis'>3750</p>
<p class='stm mis'>3751</p>
<p class='stm mis'>3752</p>
<p class='stm mis'>3753</p>
<p class='stm mis'>3754</p>
<p class='stm mis'>3755</p>
<p class='stm mis'>3756</p>
<p class='stm mis'>3757</p>
<p class='pln'>3758</p>
<p class='pln'>3759</p>
<p class='stm run hide_run'>3760</p>
<p class='pln'>3761</p>
<p class='stm mis'>3762</p>
<p class='stm mis'>3763</p>
<p class='stm mis'>3764</p>
<p class='stm mis'>3765</p>
<p class='pln'>3766</p>
<p class='stm mis'>3767</p>
<p class='stm mis'>3768</p>
<p class='pln'>3769</p>
<p class='stm run hide_run'>3770</p>
<p class='pln'>3771</p>
<p class='stm mis'>3772</p>
<p class='stm mis'>3773</p>
<p class='stm mis'>3774</p>
<p class='stm mis'>3775</p>
<p class='pln'>3776</p>
<p class='stm mis'>3777</p>
<p class='stm mis'>3778</p>
<p class='pln'>3779</p>
<p class='pln'>3780</p>
<p class='stm run hide_run'>3781</p>
<p class='pln'>3782</p>
<p class='pln'>3783</p>
<p class='pln'>3784</p>
<p class='pln'>3785</p>
<p class='pln'>3786</p>
<p class='pln'>3787</p>
<p class='stm mis'>3788</p>
<p class='stm mis'>3789</p>
<p class='stm mis'>3790</p>
<p class='stm mis'>3791</p>
<p class='pln'>3792</p>
<p class='stm run hide_run'>3793</p>
<p class='pln'>3794</p>
<p class='pln'>3795</p>
<p class='pln'>3796</p>
<p class='pln'>3797</p>
<p class='pln'>3798</p>
<p class='pln'>3799</p>
<p class='pln'>3800</p>
<p class='pln'>3801</p>
<p class='pln'>3802</p>
<p class='pln'>3803</p>
<p class='pln'>3804</p>
<p class='stm mis'>3805</p>
<p class='stm mis'>3806</p>
<p class='stm mis'>3807</p>
<p class='stm mis'>3808</p>
<p class='stm mis'>3809</p>
<p class='stm mis'>3810</p>
<p class='stm mis'>3811</p>
<p class='stm mis'>3812</p>
<p class='stm mis'>3813</p>
<p class='stm mis'>3814</p>
<p class='stm mis'>3815</p>
<p class='stm mis'>3816</p>
<p class='stm mis'>3817</p>
<p class='pln'>3818</p>
<p class='stm mis'>3819</p>
<p class='stm mis'>3820</p>
<p class='stm mis'>3821</p>
<p class='stm mis'>3822</p>
<p class='stm mis'>3823</p>
<p class='pln'>3824</p>
<p class='stm run hide_run'>3825</p>
<p class='pln'>3826</p>
<p class='pln'>3827</p>
<p class='pln'>3828</p>
<p class='pln'>3829</p>
<p class='pln'>3830</p>
<p class='pln'>3831</p>
<p class='pln'>3832</p>
<p class='pln'>3833</p>
<p class='pln'>3834</p>
<p class='stm mis'>3835</p>
<p class='stm mis'>3836</p>
<p class='stm mis'>3837</p>
<p class='stm mis'>3838</p>
<p class='pln'>3839</p>
<p class='stm run hide_run'>3840</p>
<p class='pln'>3841</p>
<p class='pln'>3842</p>
<p class='stm mis'>3843</p>
<p class='stm mis'>3844</p>
<p class='stm mis'>3845</p>
<p class='stm mis'>3846</p>
<p class='stm mis'>3847</p>
<p class='pln'>3848</p>
<p class='stm run hide_run'>3849</p>
<p class='pln'>3850</p>
<p class='pln'>3851</p>
<p class='pln'>3852</p>
<p class='pln'>3853</p>
<p class='pln'>3854</p>
<p class='pln'>3855</p>
<p class='pln'>3856</p>
<p class='pln'>3857</p>
<p class='pln'>3858</p>
<p class='stm mis'>3859</p>
<p class='stm mis'>3860</p>
<p class='stm mis'>3861</p>
<p class='stm mis'>3862</p>
<p class='stm mis'>3863</p>
<p class='stm mis'>3864</p>
<p class='stm mis'>3865</p>
<p class='pln'>3866</p>
<p class='pln'>3867</p>
<p class='pln'>3868</p>
<p class='stm run hide_run'>3869</p>
<p class='pln'>3870</p>
<p class='stm mis'>3871</p>
<p class='stm run hide_run'>3872</p>
<p class='pln'>3873</p>
<p class='stm run hide_run'>3874</p>
<p class='pln'>3875</p>
<p class='stm mis'>3876</p>
<p class='stm run hide_run'>3877</p>
<p class='pln'>3878</p>
<p class='stm run hide_run'>3879</p>
<p class='pln'>3880</p>
<p class='stm mis'>3881</p>
<p class='stm run hide_run'>3882</p>
<p class='pln'>3883</p>
<p class='pln'>3884</p>
<p class='pln'>3885</p>
<p class='pln'>3886</p>
<p class='pln'>3887</p>
<p class='stm run hide_run'>3888</p>
<p class='pln'>3889</p>
<p class='pln'>3890</p>
<p class='pln'>3891</p>
<p class='pln'>3892</p>
<p class='pln'>3893</p>
<p class='pln'>3894</p>
<p class='pln'>3895</p>
<p class='pln'>3896</p>
<p class='pln'>3897</p>
<p class='pln'>3898</p>
<p class='pln'>3899</p>
<p class='pln'>3900</p>
<p class='pln'>3901</p>
<p class='pln'>3902</p>
<p class='pln'>3903</p>
<p class='pln'>3904</p>
<p class='pln'>3905</p>
<p class='pln'>3906</p>
<p class='stm mis'>3907</p>
<p class='stm mis'>3908</p>
<p class='stm mis'>3909</p>
<p class='stm mis'>3910</p>
<p class='pln'>3911</p>
<p class='stm mis'>3912</p>
<p class='stm mis'>3913</p>
<p class='pln'>3914</p>
<p class='stm mis'>3915</p>
<p class='stm mis'>3916</p>
<p class='stm mis'>3917</p>
<p class='stm mis'>3918</p>
<p class='stm mis'>3919</p>
<p class='stm mis'>3920</p>
<p class='pln'>3921</p>
<p class='stm mis'>3922</p>
<p class='pln'>3923</p>
<p class='stm mis'>3924</p>
<p class='stm mis'>3925</p>
<p class='stm mis'>3926</p>
<p class='stm mis'>3927</p>
<p class='pln'>3928</p>
<p class='stm mis'>3929</p>
<p class='stm mis'>3930</p>
<p class='stm mis'>3931</p>
<p class='stm mis'>3932</p>
<p class='stm mis'>3933</p>
<p class='stm mis'>3934</p>
<p class='stm mis'>3935</p>
<p class='pln'>3936</p>
<p class='stm run hide_run'>3937</p>
<p class='pln'>3938</p>
<p class='pln'>3939</p>
<p class='pln'>3940</p>
<p class='pln'>3941</p>
<p class='pln'>3942</p>
<p class='pln'>3943</p>
<p class='pln'>3944</p>
<p class='pln'>3945</p>
<p class='pln'>3946</p>
<p class='pln'>3947</p>
<p class='pln'>3948</p>
<p class='pln'>3949</p>
<p class='pln'>3950</p>
<p class='pln'>3951</p>
<p class='pln'>3952</p>
<p class='pln'>3953</p>
<p class='pln'>3954</p>
<p class='pln'>3955</p>
<p class='pln'>3956</p>
<p class='pln'>3957</p>
<p class='pln'>3958</p>
<p class='pln'>3959</p>
<p class='pln'>3960</p>
<p class='pln'>3961</p>
<p class='pln'>3962</p>
<p class='pln'>3963</p>
<p class='pln'>3964</p>
<p class='pln'>3965</p>
<p class='pln'>3966</p>
<p class='pln'>3967</p>
<p class='pln'>3968</p>
<p class='pln'>3969</p>
<p class='pln'>3970</p>
<p class='pln'>3971</p>
<p class='pln'>3972</p>
<p class='pln'>3973</p>
<p class='stm mis'>3974</p>
<p class='pln'>3975</p>
<p class='stm mis'>3976</p>
<p class='stm mis'>3977</p>
<p class='stm mis'>3978</p>
<p class='stm mis'>3979</p>
<p class='pln'>3980</p>
<p class='stm mis'>3981</p>
<p class='stm mis'>3982</p>
<p class='stm mis'>3983</p>
<p class='pln'>3984</p>
<p class='stm mis'>3985</p>
<p class='pln'>3986</p>
<p class='stm mis'>3987</p>
<p class='stm mis'>3988</p>
<p class='pln'>3989</p>
<p class='stm mis'>3990</p>
<p class='stm mis'>3991</p>
<p class='pln'>3992</p>
<p class='pln'>3993</p>
<p class='stm mis'>3994</p>
<p class='stm mis'>3995</p>
<p class='stm mis'>3996</p>
<p class='stm mis'>3997</p>
<p class='stm mis'>3998</p>
<p class='stm mis'>3999</p>
<p class='stm mis'>4000</p>
<p class='pln'>4001</p>
<p class='pln'>4002</p>
<p class='stm run hide_run'>4003</p>
<p class='pln'>4004</p>
<p class='pln'>4005</p>
<p class='pln'>4006</p>
<p class='pln'>4007</p>
<p class='pln'>4008</p>
<p class='pln'>4009</p>
<p class='pln'>4010</p>
<p class='pln'>4011</p>
<p class='pln'>4012</p>
<p class='pln'>4013</p>
<p class='pln'>4014</p>
<p class='pln'>4015</p>
<p class='pln'>4016</p>
<p class='pln'>4017</p>
<p class='pln'>4018</p>
<p class='pln'>4019</p>
<p class='pln'>4020</p>
<p class='pln'>4021</p>
<p class='pln'>4022</p>
<p class='pln'>4023</p>
<p class='pln'>4024</p>
<p class='pln'>4025</p>
<p class='stm mis'>4026</p>
<p class='stm mis'>4027</p>
<p class='pln'>4028</p>
<p class='stm mis'>4029</p>
<p class='stm mis'>4030</p>
<p class='stm mis'>4031</p>
<p class='stm mis'>4032</p>
<p class='pln'>4033</p>
<p class='pln'>4034</p>
<p class='stm run hide_run'>4035</p>
<p class='stm mis'>4036</p>
<p class='stm mis'>4037</p>
<p class='stm mis'>4038</p>
<p class='stm mis'>4039</p>
<p class='stm mis'>4040</p>
<p class='stm mis'>4041</p>
<p class='stm mis'>4042</p>
<p class='stm run hide_run'>4043</p>
<p class='pln'>4044</p>
<p class='stm run hide_run'>4045</p>
<p class='pln'>4046</p>
<p class='stm run hide_run'>4047</p>
<p class='pln'>4048</p>
<p class='stm mis'>4049</p>
<p class='stm mis'>4050</p>
<p class='stm mis'>4051</p>
<p class='stm mis'>4052</p>
<p class='stm mis'>4053</p>
<p class='stm mis'>4054</p>
<p class='stm mis'>4055</p>
<p class='stm mis'>4056</p>
<p class='stm mis'>4057</p>
<p class='stm mis'>4058</p>
<p class='stm mis'>4059</p>
<p class='stm run hide_run'>4060</p>
<p class='pln'>4061</p>
<p class='stm run hide_run'>4062</p>
<p class='pln'>4063</p>
<p class='stm run hide_run'>4064</p>
<p class='pln'>4065</p>
<p class='pln'>4066</p>
<p class='pln'>4067</p>
<p class='pln'>4068</p>
<p class='stm mis'>4069</p>
<p class='stm mis'>4070</p>
<p class='stm mis'>4071</p>
<p class='stm mis'>4072</p>
<p class='stm mis'>4073</p>
<p class='stm mis'>4074</p>
<p class='stm mis'>4075</p>
<p class='stm mis'>4076</p>
<p class='stm mis'>4077</p>
<p class='stm mis'>4078</p>
<p class='stm mis'>4079</p>
<p class='stm mis'>4080</p>
<p class='pln'>4081</p>
<p class='stm mis'>4082</p>
<p class='pln'>4083</p>
<p class='stm run hide_run'>4084</p>
<p class='pln'>4085</p>
<p class='pln'>4086</p>
<p class='pln'>4087</p>
<p class='pln'>4088</p>
<p class='pln'>4089</p>
<p class='pln'>4090</p>
<p class='pln'>4091</p>
<p class='pln'>4092</p>
<p class='pln'>4093</p>
<p class='pln'>4094</p>
<p class='stm mis'>4095</p>
<p class='stm mis'>4096</p>
<p class='stm mis'>4097</p>
<p class='stm mis'>4098</p>
<p class='stm mis'>4099</p>
<p class='stm mis'>4100</p>
<p class='stm mis'>4101</p>
<p class='pln'>4102</p>
<p class='pln'>4103</p>
<p class='stm run hide_run'>4104</p>
<p class='pln'>4105</p>
<p class='pln'>4106</p>
<p class='pln'>4107</p>
<p class='pln'>4108</p>
<p class='pln'>4109</p>
<p class='pln'>4110</p>
<p class='pln'>4111</p>
<p class='pln'>4112</p>
<p class='stm mis'>4113</p>
<p class='pln'>4114</p>
<p class='stm run hide_run'>4115</p>
<p class='pln'>4116</p>
<p class='pln'>4117</p>
<p class='pln'>4118</p>
<p class='pln'>4119</p>
<p class='pln'>4120</p>
<p class='pln'>4121</p>
<p class='pln'>4122</p>
<p class='pln'>4123</p>
<p class='stm mis'>4124</p>
<p class='pln'>4125</p>
<p class='pln'>4126</p>
<p class='pln'>4127</p>
<p class='pln'>4128</p>
<p class='pln'>4129</p>
<p class='stm run hide_run'>4130</p>
<p class='pln'>4131</p>
<p class='pln'>4132</p>
<p class='pln'>4133</p>
<p class='pln'>4134</p>
<p class='pln'>4135</p>
<p class='pln'>4136</p>
<p class='stm mis'>4137</p>
<p class='stm mis'>4138</p>
<p class='stm mis'>4139</p>
<p class='pln'>4140</p>
<p class='stm run hide_run'>4141</p>
<p class='pln'>4142</p>
<p class='pln'>4143</p>
<p class='pln'>4144</p>
<p class='pln'>4145</p>
<p class='stm mis'>4146</p>
<p class='pln'>4147</p>
<p class='stm run hide_run'>4148</p>
<p class='pln'>4149</p>
<p class='pln'>4150</p>
<p class='pln'>4151</p>
<p class='pln'>4152</p>
<p class='pln'>4153</p>
<p class='stm mis'>4154</p>
<p class='stm mis'>4155</p>
<p class='stm mis'>4156</p>
<p class='pln'>4157</p>
<p class='stm run hide_run'>4158</p>
<p class='pln'>4159</p>
<p class='stm mis'>4160</p>
<p class='pln'>4161</p>
<p class='pln'>4162</p>
<p class='stm run hide_run'>4163</p>
<p class='stm mis'>4164</p>
<p class='pln'>4165</p>
<p class='pln'>4166</p>
<p class='stm run hide_run'>4167</p>
<p class='pln'>4168</p>
<p class='pln'>4169</p>
<p class='pln'>4170</p>
<p class='pln'>4171</p>
<p class='pln'>4172</p>
<p class='pln'>4173</p>
<p class='pln'>4174</p>
<p class='pln'>4175</p>
<p class='stm run hide_run'>4176</p>
<p class='stm run hide_run'>4177</p>
<p class='stm run hide_run'>4178</p>
<p class='stm run hide_run'>4179</p>
<p class='stm run hide_run'>4180</p>
<p class='pln'>4181</p>
<p class='stm run hide_run'>4182</p>
<p class='stm run hide_run'>4183</p>
<p class='stm mis'>4184</p>
<p class='pln'>4185</p>
<p class='stm run hide_run'>4186</p>
<p class='stm run hide_run'>4187</p>
<p class='stm run hide_run'>4188</p>
<p class='stm run hide_run'>4189</p>
<p class='stm run hide_run'>4190</p>
<p class='stm run hide_run'>4191</p>
<p class='stm run hide_run'>4192</p>
<p class='stm run hide_run'>4193</p>
<p class='stm run hide_run'>4194</p>
<p class='stm run hide_run'>4195</p>
<p class='pln'>4196</p>
<p class='pln'>4197</p>
    
</td>
<td class='text' valign='top'>
<p class='pln'><span class='com'># pylint: disable-msg=E1002</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='str'>&quot;&quot;&quot;MA: a facility for dealing with missing observations</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>MA is generally used as a numpy.array look-alike.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>by Paul F. Dubois.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>Copyright 1999, 2000, 2001 Regents of the University of California.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>Released for unlimited redistribution.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>Adapted for numpy_core 2005 by Travis Oliphant and</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>(mainly) Paul Dubois.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>Subclassing of the base ndarray 2006 by Pierre Gerard-Marchant.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>pgmdevlist_AT_gmail_DOT_com</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>Improvements suggested by Reggie Dugard (reggie_AT_merfinllc_DOT_com)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>:author: Pierre Gerard-Marchant</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>:contact: pierregm_at_uga_dot_edu</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>__author__</span> <span class='op'>=</span> <span class='str'>&quot;Pierre GF Gerard-Marchant&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>__docformat__</span> <span class='op'>=</span> <span class='str'>&quot;restructuredtext en&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>__all__</span> <span class='op'>=</span> <span class='op'>[</span><span class='str'>&#39;MAError&#39;</span><span class='op'>,</span> <span class='str'>&#39;MaskType&#39;</span><span class='op'>,</span> <span class='str'>&#39;MaskedArray&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;bool_&#39;</span><span class='op'>,</span> <span class='str'>&#39;complex_&#39;</span><span class='op'>,</span> <span class='str'>&#39;float_&#39;</span><span class='op'>,</span> <span class='str'>&#39;int_&#39;</span><span class='op'>,</span> <span class='str'>&#39;object_&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;abs&#39;</span><span class='op'>,</span> <span class='str'>&#39;absolute&#39;</span><span class='op'>,</span> <span class='str'>&#39;add&#39;</span><span class='op'>,</span> <span class='str'>&#39;all&#39;</span><span class='op'>,</span> <span class='str'>&#39;allclose&#39;</span><span class='op'>,</span> <span class='str'>&#39;allequal&#39;</span><span class='op'>,</span> <span class='str'>&#39;alltrue&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;amax&#39;</span><span class='op'>,</span> <span class='str'>&#39;amin&#39;</span><span class='op'>,</span> <span class='str'>&#39;anom&#39;</span><span class='op'>,</span> <span class='str'>&#39;anomalies&#39;</span><span class='op'>,</span> <span class='str'>&#39;any&#39;</span><span class='op'>,</span> <span class='str'>&#39;arange&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;arccos&#39;</span><span class='op'>,</span> <span class='str'>&#39;arccosh&#39;</span><span class='op'>,</span> <span class='str'>&#39;arcsin&#39;</span><span class='op'>,</span> <span class='str'>&#39;arcsinh&#39;</span><span class='op'>,</span> <span class='str'>&#39;arctan&#39;</span><span class='op'>,</span> <span class='str'>&#39;arctan2&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;arctanh&#39;</span><span class='op'>,</span> <span class='str'>&#39;argmax&#39;</span><span class='op'>,</span> <span class='str'>&#39;argmin&#39;</span><span class='op'>,</span> <span class='str'>&#39;argsort&#39;</span><span class='op'>,</span> <span class='str'>&#39;around&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;array&#39;</span><span class='op'>,</span> <span class='str'>&#39;asarray&#39;</span><span class='op'>,</span><span class='str'>&#39;asanyarray&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;bitwise_and&#39;</span><span class='op'>,</span> <span class='str'>&#39;bitwise_or&#39;</span><span class='op'>,</span> <span class='str'>&#39;bitwise_xor&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;ceil&#39;</span><span class='op'>,</span> <span class='str'>&#39;choose&#39;</span><span class='op'>,</span> <span class='str'>&#39;clip&#39;</span><span class='op'>,</span> <span class='str'>&#39;common_fill_value&#39;</span><span class='op'>,</span> <span class='str'>&#39;compress&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;compressed&#39;</span><span class='op'>,</span> <span class='str'>&#39;concatenate&#39;</span><span class='op'>,</span> <span class='str'>&#39;conjugate&#39;</span><span class='op'>,</span> <span class='str'>&#39;cos&#39;</span><span class='op'>,</span> <span class='str'>&#39;cosh&#39;</span><span class='op'>,</span> <span class='str'>&#39;count&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;default_fill_value&#39;</span><span class='op'>,</span> <span class='str'>&#39;diagonal&#39;</span><span class='op'>,</span> <span class='str'>&#39;divide&#39;</span><span class='op'>,</span> <span class='str'>&#39;dump&#39;</span><span class='op'>,</span> <span class='str'>&#39;dumps&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;empty&#39;</span><span class='op'>,</span> <span class='str'>&#39;empty_like&#39;</span><span class='op'>,</span> <span class='str'>&#39;equal&#39;</span><span class='op'>,</span> <span class='str'>&#39;exp&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;fabs&#39;</span><span class='op'>,</span> <span class='str'>&#39;fmod&#39;</span><span class='op'>,</span> <span class='str'>&#39;filled&#39;</span><span class='op'>,</span> <span class='str'>&#39;floor&#39;</span><span class='op'>,</span> <span class='str'>&#39;floor_divide&#39;</span><span class='op'>,</span><span class='str'>&#39;fix_invalid&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;frombuffer&#39;</span><span class='op'>,</span> <span class='str'>&#39;fromfunction&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;getdata&#39;</span><span class='op'>,</span><span class='str'>&#39;getmask&#39;</span><span class='op'>,</span> <span class='str'>&#39;getmaskarray&#39;</span><span class='op'>,</span> <span class='str'>&#39;greater&#39;</span><span class='op'>,</span> <span class='str'>&#39;greater_equal&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;hypot&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;identity&#39;</span><span class='op'>,</span> <span class='str'>&#39;ids&#39;</span><span class='op'>,</span> <span class='str'>&#39;indices&#39;</span><span class='op'>,</span> <span class='str'>&#39;inner&#39;</span><span class='op'>,</span> <span class='str'>&#39;innerproduct&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;isMA&#39;</span><span class='op'>,</span> <span class='str'>&#39;isMaskedArray&#39;</span><span class='op'>,</span> <span class='str'>&#39;is_mask&#39;</span><span class='op'>,</span> <span class='str'>&#39;is_masked&#39;</span><span class='op'>,</span> <span class='str'>&#39;isarray&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;left_shift&#39;</span><span class='op'>,</span> <span class='str'>&#39;less&#39;</span><span class='op'>,</span> <span class='str'>&#39;less_equal&#39;</span><span class='op'>,</span> <span class='str'>&#39;load&#39;</span><span class='op'>,</span> <span class='str'>&#39;loads&#39;</span><span class='op'>,</span> <span class='str'>&#39;log&#39;</span><span class='op'>,</span> <span class='str'>&#39;log10&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;logical_and&#39;</span><span class='op'>,</span> <span class='str'>&#39;logical_not&#39;</span><span class='op'>,</span> <span class='str'>&#39;logical_or&#39;</span><span class='op'>,</span> <span class='str'>&#39;logical_xor&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;make_mask&#39;</span><span class='op'>,</span> <span class='str'>&#39;make_mask_descr&#39;</span><span class='op'>,</span> <span class='str'>&#39;make_mask_none&#39;</span><span class='op'>,</span> <span class='str'>&#39;mask_or&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;masked_array&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_equal&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_greater&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;masked_greater_equal&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_inside&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_invalid&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;masked_less&#39;</span><span class='op'>,</span><span class='str'>&#39;masked_less_equal&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_not_equal&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;masked_object&#39;</span><span class='op'>,</span><span class='str'>&#39;masked_outside&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_print_option&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;masked_singleton&#39;</span><span class='op'>,</span><span class='str'>&#39;masked_values&#39;</span><span class='op'>,</span> <span class='str'>&#39;masked_where&#39;</span><span class='op'>,</span> <span class='str'>&#39;max&#39;</span><span class='op'>,</span> <span class='str'>&#39;maximum&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;maximum_fill_value&#39;</span><span class='op'>,</span> <span class='str'>&#39;mean&#39;</span><span class='op'>,</span> <span class='str'>&#39;min&#39;</span><span class='op'>,</span> <span class='str'>&#39;minimum&#39;</span><span class='op'>,</span> <span class='str'>&#39;minimum_fill_value&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;multiply&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;negative&#39;</span><span class='op'>,</span> <span class='str'>&#39;nomask&#39;</span><span class='op'>,</span> <span class='str'>&#39;nonzero&#39;</span><span class='op'>,</span> <span class='str'>&#39;not_equal&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;ones&#39;</span><span class='op'>,</span> <span class='str'>&#39;outer&#39;</span><span class='op'>,</span> <span class='str'>&#39;outerproduct&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;power&#39;</span><span class='op'>,</span> <span class='str'>&#39;product&#39;</span><span class='op'>,</span> <span class='str'>&#39;ptp&#39;</span><span class='op'>,</span> <span class='str'>&#39;put&#39;</span><span class='op'>,</span> <span class='str'>&#39;putmask&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;rank&#39;</span><span class='op'>,</span> <span class='str'>&#39;ravel&#39;</span><span class='op'>,</span> <span class='str'>&#39;remainder&#39;</span><span class='op'>,</span> <span class='str'>&#39;repeat&#39;</span><span class='op'>,</span> <span class='str'>&#39;reshape&#39;</span><span class='op'>,</span> <span class='str'>&#39;resize&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;right_shift&#39;</span><span class='op'>,</span> <span class='str'>&#39;round_&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;set_fill_value&#39;</span><span class='op'>,</span> <span class='str'>&#39;shape&#39;</span><span class='op'>,</span> <span class='str'>&#39;sin&#39;</span><span class='op'>,</span> <span class='str'>&#39;sinh&#39;</span><span class='op'>,</span> <span class='str'>&#39;size&#39;</span><span class='op'>,</span> <span class='str'>&#39;sometrue&#39;</span><span class='op'>,</span> <span class='str'>&#39;sort&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;sqrt&#39;</span><span class='op'>,</span> <span class='str'>&#39;std&#39;</span><span class='op'>,</span> <span class='str'>&#39;subtract&#39;</span><span class='op'>,</span> <span class='str'>&#39;sum&#39;</span><span class='op'>,</span> <span class='str'>&#39;swapaxes&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;take&#39;</span><span class='op'>,</span> <span class='str'>&#39;tan&#39;</span><span class='op'>,</span> <span class='str'>&#39;tanh&#39;</span><span class='op'>,</span> <span class='str'>&#39;transpose&#39;</span><span class='op'>,</span> <span class='str'>&#39;true_divide&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;var&#39;</span><span class='op'>,</span> <span class='str'>&#39;where&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&#39;zeros&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>cPickle</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>operator</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>numpy</span> <span class='key'>as</span> <span class='nam'>np</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>from</span> <span class='nam'>numpy</span> <span class='key'>import</span> <span class='nam'>ndarray</span><span class='op'>,</span> <span class='nam'>amax</span><span class='op'>,</span> <span class='nam'>amin</span><span class='op'>,</span> <span class='nam'>iscomplexobj</span><span class='op'>,</span> <span class='nam'>bool_</span><span class='op'>,</span> <span class='nam'>complex_</span><span class='op'>,</span> <span class='nam'>float_</span><span class='op'>,</span><span class='xx'>\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>int_</span><span class='op'>,</span> <span class='nam'>object_</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>from</span> <span class='nam'>numpy</span> <span class='key'>import</span> <span class='nam'>array</span> <span class='key'>as</span> <span class='nam'>narray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>numpy</span><span class='op'>.</span><span class='nam'>core</span><span class='op'>.</span><span class='nam'>umath</span> <span class='key'>as</span> <span class='nam'>umath</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>numpy</span><span class='op'>.</span><span class='nam'>core</span><span class='op'>.</span><span class='nam'>numerictypes</span> <span class='key'>as</span> <span class='nam'>ntypes</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>from</span> <span class='nam'>numpy</span> <span class='key'>import</span> <span class='nam'>expand_dims</span> <span class='key'>as</span> <span class='nam'>n_expand_dims</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>import</span> <span class='nam'>warnings</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>MaskType</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>bool_</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>nomask</span> <span class='op'>=</span> <span class='nam'>MaskType</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>np</span><span class='op'>.</span><span class='nam'>seterr</span><span class='op'>(</span><span class='nam'>all</span><span class='op'>=</span><span class='str'>&#39;ignore&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>doc_note</span><span class='op'>(</span><span class='nam'>initialdoc</span><span class='op'>,</span> <span class='nam'>note</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>initialdoc</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>newdoc</span> <span class='op'>=</span> <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; %s</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; %s</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>newdoc</span> <span class='op'>%</span> <span class='op'>(</span><span class='nam'>initialdoc</span><span class='op'>,</span> <span class='nam'>note</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Exceptions ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>MAError</span><span class='op'>(</span><span class='nam'>Exception</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Class for MA related errors.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>args</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Creates an exception.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>Exception</span><span class='op'>.</span><span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>args</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>args</span> <span class='op'>=</span> <span class='nam'>args</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Calculates the string representation.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>args</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>__repr__</span> <span class='op'>=</span> <span class='nam'>__str__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Filling options ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># b: boolean - c: complex - f: floats - i: integer - O: object - S: string</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>default_filler</span> <span class='op'>=</span> <span class='op'>{</span><span class='str'>&#39;b&#39;</span><span class='op'>:</span> <span class='nam'>True</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;c&#39;</span> <span class='op'>:</span> <span class='num'>1.e20</span> <span class='op'>+</span> <span class='num'>0.0j</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;f&#39;</span> <span class='op'>:</span> <span class='num'>1.e20</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;i&#39;</span> <span class='op'>:</span> <span class='num'>999999</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;O&#39;</span> <span class='op'>:</span> <span class='str'>&#39;?&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;S&#39;</span> <span class='op'>:</span> <span class='str'>&#39;N/A&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;u&#39;</span> <span class='op'>:</span> <span class='num'>999999</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&#39;V&#39;</span> <span class='op'>:</span> <span class='str'>&#39;???&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>max_filler</span> <span class='op'>=</span> <span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>_minvals</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>max_filler</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='op'>[</span><span class='op'>(</span><span class='nam'>k</span><span class='op'>,</span> <span class='op'>-</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>inf</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>k</span> <span class='key'>in</span> <span class='op'>[</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>float32</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>float64</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>min_filler</span> <span class='op'>=</span> <span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>_maxvals</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>min_filler</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='op'>[</span><span class='op'>(</span><span class='nam'>k</span><span class='op'>,</span> <span class='op'>+</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>inf</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>k</span> <span class='key'>in</span> <span class='op'>[</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>float32</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>float64</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>if</span> <span class='str'>&#39;float128&#39;</span> <span class='key'>in</span> <span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>max_filler</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='op'>[</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>float128</span><span class='op'>,</span> <span class='op'>-</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>inf</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>min_filler</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='op'>[</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>float128</span><span class='op'>,</span> <span class='op'>+</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>inf</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Calculate the default fill value for the argument object.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span><span class='str'>&#39;dtype&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>kind</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>subdtype</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>subdtype</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='op'>.</span><span class='nam'>kind</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>kind</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>float</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='str'>&#39;f&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>int</span><span class='op'>)</span> <span class='key'>or</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>long</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='str'>&#39;i&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='str'>&#39;S&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>complex</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='str'>&#39;c&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>defval</span> <span class='op'>=</span> <span class='nam'>default_filler</span><span class='op'>[</span><span class='str'>&#39;O&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>defval</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>minimum_fill_value</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Calculate the default fill value suitable for taking the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; minimum of ``obj``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;dtype&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>objtype</span> <span class='op'>=</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>min_filler</span><span class='op'>[</span><span class='nam'>objtype</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>filler</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>,</span> <span class='str'>&#39;Unsuitable type for calculating minimum.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>filler</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>float</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>min_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;float_&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>int</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>min_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;int_&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>long</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>min_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;uint&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>min_filler</span><span class='op'>[</span><span class='nam'>obj</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>,</span> <span class='str'>&#39;Unsuitable type for calculating minimum.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>maximum_fill_value</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Calculate the default fill value suitable for taking the maximum</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; of ``obj``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;dtype&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>objtype</span> <span class='op'>=</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>max_filler</span><span class='op'>[</span><span class='nam'>objtype</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>filler</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>,</span> <span class='str'>&#39;Unsuitable type for calculating minimum.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>filler</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>float</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>max_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;float_&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>int</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>max_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;int_&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>long</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>max_filler</span><span class='op'>[</span><span class='nam'>ntypes</span><span class='op'>.</span><span class='nam'>typeDict</span><span class='op'>[</span><span class='str'>&#39;uint&#39;</span><span class='op'>]</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>max_filler</span><span class='op'>[</span><span class='nam'>obj</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>,</span> <span class='str'>&#39;Unsuitable type for calculating minimum.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>ndtype</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fields</span> <span class='op'>=</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>fields</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fields</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fdtype</span> <span class='op'>=</span> <span class='op'>[</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>_</span><span class='op'>[</span><span class='num'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>fields</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>]</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>fdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>fields</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fdtype</span> <span class='op'>=</span> <span class='op'>[</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>_</span><span class='op'>[</span><span class='num'>1</span><span class='op'>]</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>fdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>ValueError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>err_msg</span> <span class='op'>=</span> <span class='str'>&quot;Unable to transform %s to dtype %s&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>ValueError</span><span class='op'>(</span><span class='nam'>err_msg</span> <span class='op'>%</span> <span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span><span class='nam'>fdtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fval</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>asarray</span><span class='op'>(</span><span class='nam'>f</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>desc</span><span class='op'>[</span><span class='num'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>item</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='op'>(</span><span class='nam'>f</span><span class='op'>,</span> <span class='nam'>desc</span><span class='op'>)</span> <span class='key'>in</span> <span class='nam'>zip</span><span class='op'>(</span><span class='nam'>fval</span><span class='op'>,</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>)</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>tuple</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>fdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>basestring</span><span class='op'>)</span> <span class='key'>and</span> <span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>char</span> <span class='key'>not</span> <span class='key'>in</span> <span class='str'>&#39;SV&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># In case we want to convert 1e+20 to int...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>item</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>OverflowError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>set_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set the filling value of a, if a is a masked array.&nbsp; Otherwise,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; do nothing.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>get_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the filling value of a, if any.&nbsp; Otherwise, returns the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; default filling value for that type.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>common_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the common filling value of a and b, if any.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If a and b have different filling values, returns None.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>t1</span> <span class='op'>=</span> <span class='nam'>get_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>t2</span> <span class='op'>=</span> <span class='nam'>get_fill_value</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>t1</span> <span class='op'>==</span> <span class='nam'>t2</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>t1</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>value</span> <span class='op'>=</span> <span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a as an array with masked data replaced by value.&nbsp; If</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value is None, get_fill_value(a) is used instead.&nbsp; If a is already</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a ndarray, a itself is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : maskedarray or array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; An input object.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Filling value. If not given, the output of get_fill_value(a)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;filled&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Should we check for contiguity ? and a.flags[&#39;CONTIGUOUS&#39;]:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>dict</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;O&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>arrays</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the youngest subclass of MaskedArray from a list of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; (masked) arrays.&nbsp; In case of siblings, the first takes over.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>arrays</span><span class='op'>)</span> <span class='op'>==</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>arr</span> <span class='op'>=</span> <span class='nam'>arrays</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>arrcls</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>a</span> <span class='key'>in</span> <span class='nam'>arrays</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>arrcls</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>issubclass</span><span class='op'>(</span><span class='nam'>rcls</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>cls</span> <span class='key'>in</span> <span class='nam'>arrcls</span><span class='op'>[</span><span class='num'>1</span><span class='op'>:</span><span class='op'>]</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>issubclass</span><span class='op'>(</span><span class='nam'>cls</span><span class='op'>,</span> <span class='nam'>rcls</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>cls</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>rcls</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>get_data</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the _data part of a (if any), or a as a ndarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A ndarray or a subclass of.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; subok : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to force the output to a &#39;pure&#39; ndarray (False) or to</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; return a subclass of ndarray if approriate (True).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;_data&#39;</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>subok</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>subok</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>data</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>getdata</span> <span class='op'>=</span> <span class='nam'>get_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>fix_invalid</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>nomask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return (a copy of) a where invalid data (nan/inf) are masked</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; and replaced by fill_value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Note that a copy is performed by default (just in case...).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A (subclass of) ndarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to use a copy of a (True) or to fix a in place (False).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Value used for fixing invalid data.&nbsp; If not given, the output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; of get_fill_value(a) is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; b : MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#invalid = (numpy.isnan(a._data) | numpy.isinf(a._data))</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>invalid</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>isfinite</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>invalid</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>|=</span> <span class='nam'>invalid</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>[</span><span class='nam'>invalid</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Ufuncs ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ufunc_domain</span> <span class='op'>=</span> <span class='op'>{</span><span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ufunc_fills</span> <span class='op'>=</span> <span class='op'>{</span><span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainCheckInterval</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define a valid interval, so that :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ``domain_check_interval(a,b)(x) = true`` where</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ``x &lt; a`` or ``x &gt; b``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;domain_check_interval(a,b)(x) = true where x &lt; a or y &gt; b&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>a</span> <span class='op'>&gt;</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>b</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>a</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>b</span> <span class='op'>=</span> <span class='nam'>b</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Execute the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>greater</span> <span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainTan</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define a valid interval for the `tan` function, so that:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ``domain_tan(eps) = True`` where ``abs(cos(x)) &lt; eps``</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>eps</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;domain_tan(eps) = true where abs(cos(x)) &lt; eps)&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>eps</span> <span class='op'>=</span> <span class='nam'>eps</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Executes the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>cos</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>eps</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainSafeDivide</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define a domain for safe division.&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>tolerance</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>tolerance</span> <span class='op'>=</span> <span class='nam'>tolerance</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Delay the selection of the tolerance to here in order to reduce numpy</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># import times. The calculation of these parameters is a substantial</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># component of numpy&#39;s import time.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>tolerance</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>tolerance</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>finfo</span><span class='op'>(</span><span class='nam'>float</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tiny</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span> <span class='op'>*</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>tolerance</span> <span class='op'>&gt;=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainGreater</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;DomainGreater(v)(x) = true where x &lt;= v&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>critical_value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;DomainGreater(v)(x) = true where x &lt;= v&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>critical_value</span> <span class='op'>=</span> <span class='nam'>critical_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Executes the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>critical_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainGreaterEqual</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;DomainGreaterEqual(v)(x) = true where x &lt; v&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>critical_value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;DomainGreaterEqual(v)(x) = true where x &lt; v&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>critical_value</span> <span class='op'>=</span> <span class='nam'>critical_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Executes the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>critical_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Defines masked version of unary operations, where invalid</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; values are pre-masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; f : callable</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Default filling value (0).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; domain :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Default domain (None).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>mufunc</span><span class='op'>,</span> <span class='nam'>fill</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>domain</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot; _MaskedUnaryOperation(aufunc, fill=0, domain=None)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; aufunc(fill) must be defined</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self(x) returns aufunc(x)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with masked values where domain(x) is true or getmask(x) is true.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span> <span class='op'>=</span> <span class='nam'>mufunc</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill</span> <span class='op'>=</span> <span class='nam'>fill</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>domain</span> <span class='op'>=</span> <span class='nam'>domain</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>mufunc</span><span class='op'>,</span> <span class='str'>&quot;__doc__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>mufunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>mufunc</span><span class='op'>,</span> <span class='str'>&quot;__name__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>mufunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_domain</span><span class='op'>[</span><span class='nam'>mufunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>domain</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>mufunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>fill</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Execute the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d1</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>domain</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dm</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>domain</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>dm</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># The following two lines control the domain filling methods.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d1</span> <span class='op'>=</span> <span class='nam'>d1</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># We could use smart indexing : d1[dm] = self.fill ...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># ... but np.putmask looks more efficient, despite the copy.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>dm</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Take care of the masked singletong first ...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='key'>and</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the result class .......................</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>subtype</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>subtype</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the result&nbsp; as a view of the subtype ...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>subtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Fix the mask if we don&#39;t have a scalar</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='op'>&gt;</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='str'>&quot;Masked version of %s. [Invalid values are masked]&quot;</span> <span class='op'>%</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define masked version of binary operations, where invalid</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; values are pre-masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; f : callable</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fillx :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Default filling value for the first argument (0).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; filly :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Default filling value for the second argument (0).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; domain :</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Default domain (None).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>mbfunc</span><span class='op'>,</span> <span class='nam'>fillx</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>filly</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;abfunc(fillx, filly) must be defined.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; abfunc(x, filly) = x for all x to enable reduce.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span> <span class='op'>=</span> <span class='nam'>mbfunc</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fillx</span> <span class='op'>=</span> <span class='nam'>fillx</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span> <span class='op'>=</span> <span class='nam'>filly</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>mbfunc</span><span class='op'>,</span> <span class='str'>&quot;__doc__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>mbfunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>mbfunc</span><span class='op'>,</span> <span class='str'>&quot;__name__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>mbfunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_domain</span><span class='op'>[</span><span class='nam'>mbfunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>mbfunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>fillx</span><span class='op'>,</span> <span class='nam'>filly</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Execute the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>get_data</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>get_data</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>&gt;</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>target</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Reduce `target` along the given `axis`.&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tclass</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tclass</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>==</span> <span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='op'>(</span><span class='num'>1</span><span class='op'>,</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>tclass</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>tclass</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tr</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span> <span class='key'>or</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mr</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_and</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tr</span> <span class='op'>=</span> <span class='nam'>tr</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>tclass</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mr</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='op'>&gt;</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tr</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mr</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>tr</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>mr</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>tr</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>outer</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the function applied to the outer product of a and b.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ma</span> <span class='key'>is</span> <span class='nam'>nomask</span> <span class='key'>and</span> <span class='nam'>mb</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='nam'>ma</span><span class='op'>,</span> <span class='nam'>mb</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='key'>not</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>)</span> <span class='key'>and</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># We could fill the arguments first, butis it useful ?</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># d = self.f.outer(filled(a, self.fillx), filled(b, self.filly)).view(rcls)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>rcls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='op'>&gt;</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>accumulate</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>target</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Accumulate `target` along `axis` after filling with y fill</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tclass</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tclass</span> <span class='op'>=</span> <span class='nam'>masked_array</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>.</span><span class='nam'>accumulate</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>tclass</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='str'>&quot;Masked version of &quot;</span> <span class='op'>+</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define binary operations that have a domain, like divide.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; They have no reduce, outer or accumulate.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; f : function.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; domain : Default domain.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fillx : Default filling value for the first argument (0).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; filly : Default filling value for the second argument (0).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dbfunc</span><span class='op'>,</span> <span class='nam'>domain</span><span class='op'>,</span> <span class='nam'>fillx</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>filly</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;abfunc(fillx, filly) must be defined.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; abfunc(x, filly) = x for all x to enable reduce.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span> <span class='op'>=</span> <span class='nam'>dbfunc</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>domain</span> <span class='op'>=</span> <span class='nam'>domain</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fillx</span> <span class='op'>=</span> <span class='nam'>fillx</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span> <span class='op'>=</span> <span class='nam'>filly</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>dbfunc</span><span class='op'>,</span> <span class='str'>&quot;__doc__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>dbfunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>dbfunc</span><span class='op'>,</span> <span class='str'>&quot;__name__&quot;</span><span class='op'>,</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>dbfunc</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_domain</span><span class='op'>[</span><span class='nam'>dbfunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>domain</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>dbfunc</span><span class='op'>]</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>fillx</span><span class='op'>,</span> <span class='nam'>filly</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Execute the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d1</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d2</span> <span class='op'>=</span> <span class='nam'>get_data</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>domain</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>mb</span><span class='op'>,</span> <span class='nam'>t</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># The following line controls the domain filling</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>t</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>==</span> <span class='nam'>d2</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d2</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>where</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>,</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span><span class='op'>,</span><span class='nam'>d2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d2</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>where</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='op'>,</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>filly</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>ma</span><span class='op'>,</span> <span class='nam'>mb</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='key'>not</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>)</span> <span class='key'>and</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span>&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>d2</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='op'>&gt;</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='str'>&quot;Masked version of &quot;</span> <span class='op'>+</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># Unary ufuncs</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>exp</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>exp</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>conjugate</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>conjugate</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sin</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>sin</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>cos</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>cos</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>tan</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>tan</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arctan</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arctan</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arcsinh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arcsinh</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sinh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>sinh</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>cosh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>cosh</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>tanh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>tanh</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>abs</span> <span class='op'>=</span> <span class='nam'>absolute</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>fabs</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>fabs</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>negative</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>negative</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>floor</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>floor</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ceil</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>ceil</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>around</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>round_</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>logical_not</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># Domained unary ufuncs .......................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sqrt</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>sqrt</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_DomainGreaterEqual</span><span class='op'>(</span><span class='num'>0.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>log</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>log</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainGreater</span><span class='op'>(</span><span class='num'>0.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>log10</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>log10</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainGreater</span><span class='op'>(</span><span class='num'>0.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>tan</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>tan</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainTan</span><span class='op'>(</span><span class='num'>1.e-35</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arcsin</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arcsin</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_DomainCheckInterval</span><span class='op'>(</span><span class='op'>-</span><span class='num'>1.0</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arccos</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arccos</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_DomainCheckInterval</span><span class='op'>(</span><span class='op'>-</span><span class='num'>1.0</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arccosh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arccosh</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainGreaterEqual</span><span class='op'>(</span><span class='num'>1.0</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arctanh</span> <span class='op'>=</span> <span class='nam'>_MaskedUnaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arctanh</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainCheckInterval</span><span class='op'>(</span><span class='op'>-</span><span class='num'>1.0</span><span class='op'>+</span><span class='num'>1e-15</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>-</span><span class='num'>1e-15</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># Binary ufuncs ...............................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>add</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>add</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>subtract</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>subtract</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>multiply</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>multiply</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arctan2</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>arctan2</span><span class='op'>,</span> <span class='num'>0.0</span><span class='op'>,</span> <span class='num'>1.0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>equal</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>equal</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>not_equal</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>not_equal</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>not_equal</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>less_equal</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less_equal</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>less_equal</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>greater_equal</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>greater_equal</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>greater_equal</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>less</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>less</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>greater</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>greater</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>greater</span><span class='op'>.</span><span class='nam'>reduce</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>logical_and</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_and</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>alltrue</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_and</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>reduce</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>logical_or</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sometrue</span> <span class='op'>=</span> <span class='nam'>logical_or</span><span class='op'>.</span><span class='nam'>reduce</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>logical_xor</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_xor</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>bitwise_and</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>bitwise_and</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>bitwise_or</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>bitwise_or</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>bitwise_xor</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>bitwise_xor</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>hypot</span> <span class='op'>=</span> <span class='nam'>_MaskedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>hypot</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># Domained binary ufuncs ......................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>divide</span> <span class='op'>=</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>divide</span><span class='op'>,</span> <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>true_divide</span> <span class='op'>=</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>true_divide</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>floor_divide</span> <span class='op'>=</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>floor_divide</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>remainder</span> <span class='op'>=</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>remainder</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>fmod</span> <span class='op'>=</span> <span class='nam'>_DomainedBinaryOperation</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>fmod</span><span class='op'>,</span> <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Mask creation functions ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>make_mask_descr</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Constructs a dtype description list from a given dtype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Each field is set to a bool.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Make sure we do have a dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndtype</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Do we have some name fields ?</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdescr</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>list</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>m</span> <span class='key'>in</span> <span class='nam'>mdescr</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span><span class='op'>[</span><span class='num'>1</span><span class='op'>]</span> <span class='op'>=</span> <span class='str'>&#39;|b1&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>tuple</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>mdescr</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Is this some kind of composite a la (np.float,2)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>subdtype</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdescr</span> <span class='op'>=</span> <span class='nam'>list</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>.</span><span class='nam'>subdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdescr</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>bool</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>tuple</span><span class='op'>(</span><span class='nam'>mdescr</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>MaskType</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>get_mask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the mask of a, if any, or nomask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; To get a full array of booleans of the same shape as a, use</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; getmaskarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>getmask</span> <span class='op'>=</span> <span class='nam'>get_mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the mask of arr, if any, or a boolean array of the shape</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; of a, full of False.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>arr</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>is_mask</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return True if m is a legal mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Does not check contents, only type.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>type</span> <span class='key'>is</span> <span class='nam'>MaskType</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>AttributeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>flag</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return m as a mask, creating a copy if necessary or requested.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The function can accept any sequence of integers or nomask.&nbsp; Does</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; not check that contents must be 0s and 1s.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; m : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Potential mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a copy of m (True) or m itself (False).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; shrink : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to shrink m to nomask if all its values are False.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>flag</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>warnings</span><span class='op'>.</span><span class='nam'>warn</span><span class='op'>(</span><span class='str'>&quot;The flag &#39;flag&#39; is now called &#39;shrink&#39;!&quot;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>DeprecationWarning</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>shrink</span> <span class='op'>=</span> <span class='nam'>flag</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>type</span> <span class='key'>is</span> <span class='nam'>MaskType</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>copy</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>MaskType</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>True</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Bas les masques !</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>shrink</span> <span class='key'>and</span> <span class='key'>not</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a mask of shape s, filled with False.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; news : tuple</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A tuple indicating the shape of the final mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dtype: {None, dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A dtype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dtype</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>zeros</span><span class='op'>(</span><span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>zeros</span><span class='op'>(</span><span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>make_mask_descr</span><span class='op'>(</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>mask_or</span> <span class='op'>(</span><span class='nam'>m1</span><span class='op'>,</span> <span class='nam'>m2</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the combination of two masks m1 and m2.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The masks are combined with the *logical_or* operator, treating</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; nomask as False.&nbsp; The result may equal m1 or m2 if the other is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; nomask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; m1 : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; First mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; m2 : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Second mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : {False, True}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a copy.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; shrink : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to shrink m to nomask if all its values are False.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp;&nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m1</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>m2</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m2</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>m1</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m1</span> <span class='key'>is</span> <span class='nam'>m2</span> <span class='key'>and</span> <span class='nam'>is_mask</span><span class='op'>(</span><span class='nam'>m1</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>m1</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>(</span><span class='nam'>m1</span><span class='op'>,</span> <span class='nam'>m2</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#--- --- Masking functions ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return ``a`` as an array masked where ``condition`` is True.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Masked values of ``a`` or ``condition`` are kept.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; condition : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masking condition.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Array to mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a copy of ``a`` (True) or modify ``a`` in place (False).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>cond</span> <span class='op'>=</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='op'>(</span><span class='nam'>cshape</span><span class='op'>,</span> <span class='nam'>ashape</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>cond</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>cshape</span> <span class='key'>and</span> <span class='nam'>cshape</span> <span class='op'>!=</span> <span class='nam'>ashape</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>IndexError</span><span class='op'>(</span><span class='str'>&quot;Inconsistant shape between the condition and the input&quot;</span><span class='xx'>\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&quot; (got %s and %s)&quot;</span> <span class='op'>%</span> <span class='op'>(</span><span class='nam'>cshape</span><span class='op'>,</span> <span class='nam'>ashape</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cond</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>cond</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cls</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cls</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>cls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>cond</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_greater</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Shortcut to masked_where, with condition = (x &gt; value).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>greater</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_greater_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Shortcut to masked_where, with condition = (x &gt;= value).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>greater_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_less</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Shortcut to masked_where, with condition = (x &lt; value).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>less</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_less_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Shortcut to masked_where, with condition = (x &lt;= value).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>less_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_not_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Shortcut to masked_where, with condition = (x != value).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>not_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Shortcut to masked_where, with condition = (x == value).&nbsp; For</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; floating point, consider ``masked_values(x, value)`` instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># An alternative implementation relies on filling first: probably not needed.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># d = filled(x, 0)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># c = umath.equal(d, value)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># m = mask_or(c, getmask(x))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># return array(d, mask=m, copy=copy)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_inside</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>v1</span><span class='op'>,</span> <span class='nam'>v2</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Shortcut to masked_where, where ``condition`` is True for x inside</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the interval [v1,v2] (v1 &lt;= x &lt;= v2).&nbsp; The boundaries v1 and v2</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; can be given in either order.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The array x is prefilled with its filling value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>v2</span> <span class='op'>&lt;</span> <span class='nam'>v1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>v1</span><span class='op'>,</span> <span class='nam'>v2</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>v2</span><span class='op'>,</span> <span class='nam'>v1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>xf</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>xf</span> <span class='op'>&gt;=</span> <span class='nam'>v1</span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='op'>(</span><span class='nam'>xf</span> <span class='op'>&lt;=</span> <span class='nam'>v2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_outside</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>v1</span><span class='op'>,</span> <span class='nam'>v2</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Shortcut to ``masked_where``, where ``condition`` is True for x outside</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the interval [v1,v2] (x &lt; v1)|(x &gt; v2).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The boundaries v1 and v2 can be given in either order.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The array x is prefilled with its filling value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>v2</span> <span class='op'>&lt;</span> <span class='nam'>v1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>v1</span><span class='op'>,</span> <span class='nam'>v2</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>v2</span><span class='op'>,</span> <span class='nam'>v1</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>xf</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>xf</span> <span class='op'>&lt;</span> <span class='nam'>v1</span><span class='op'>)</span> <span class='op'>|</span> <span class='op'>(</span><span class='nam'>xf</span> <span class='op'>&gt;</span> <span class='nam'>v2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_where</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_object</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Mask the array `x` where the data are exactly equal to value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; This function is suitable only for object arrays: for floating</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; point, please use `masked_values`_ instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; x : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Array to mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value : var</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Comparison value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a copy of x.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; shrink : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to collapse a mask full of False to nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isMaskedArray</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>x</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>asarray</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_values</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>,</span> <span class='nam'>rtol</span><span class='op'>=</span><span class='num'>1.e-5</span><span class='op'>,</span> <span class='nam'>atol</span><span class='op'>=</span><span class='num'>1.e-8</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Mask the array x where the data are approximately equal in</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value, i.e.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; (abs(x - value) &lt;= atol+rtol*abs(value))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Suitable only for floating points. For integers, please use</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; :func:`masked_equal`.&nbsp; The mask is set to ``nomask`` if posible.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; x : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Array to fill.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value : float</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masking value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; rtol : {float}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Tolerance parameter.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; atol : {float}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Tolerance parameter (1e-8).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a copy of x.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; shrink : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to collapse a mask full of False to nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>abs</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>xnew</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>issubclass</span><span class='op'>(</span><span class='nam'>xnew</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>type</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>floating</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less_equal</span><span class='op'>(</span><span class='nam'>abs</span><span class='op'>(</span><span class='nam'>xnew</span><span class='op'>-</span><span class='nam'>value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>atol</span><span class='op'>+</span><span class='nam'>rtol</span><span class='op'>*</span><span class='nam'>abs</span><span class='op'>(</span><span class='nam'>value</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>xnew</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>xnew</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>masked_invalid</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Mask the array for invalid values (NaNs or infs).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Any preexisting mask is conserved.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='op'>~</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>isfinite</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cls</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cls</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>cls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>condition</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Printing options ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_MaskedPrintOption</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Handle the string used to represent missing data in a masked array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>display</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Create the masked_print_option object.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_display</span> <span class='op'>=</span> <span class='nam'>display</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_enabled</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>display</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Display the string to print for masked values.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_display</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>set_display</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>s</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Set the string to print for masked values.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_display</span> <span class='op'>=</span> <span class='nam'>s</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>enabled</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Is the use of the display value enabled?&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_enabled</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>enable</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='num'>1</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Set the enabling shrink to `shrink`.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_enabled</span> <span class='op'>=</span> <span class='nam'>shrink</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_display</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>__repr__</span> <span class='op'>=</span> <span class='nam'>__str__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#if you single index into a masked location you get this object.</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>masked_print_option</span> <span class='op'>=</span> <span class='nam'>_MaskedPrintOption</span><span class='op'>(</span><span class='str'>&#39;--&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- MaskedArray class ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#...............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='nam'>object</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Define a wrapper for basic array methods.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Upon call, returns a masked array, where the new _data array is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the output of the corresponding method called on the original</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; _data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If onmask is True, the new mask is the output of the method called</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; on the initial mask. Otherwise, the new mask is just a reference</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; to the initial mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; _name : String</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Name of the function to apply on data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; _onmask : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether the mask must be processed also (True) or left</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; alone (False). Default: True.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; obj : Object</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The object calling the arraymethod.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>funcname</span><span class='op'>,</span> <span class='nam'>onmask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span> <span class='op'>=</span> <span class='nam'>funcname</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_onmask</span> <span class='op'>=</span> <span class='nam'>onmask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>getdoc</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>getdoc</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Return the doc of the function (from the doc of the method).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>methdoc</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>,</span> <span class='nam'>None</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>methdoc</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>,</span> <span class='nam'>methdoc</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>methdoc</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>methdoc</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__get__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>objtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span> <span class='op'>=</span> <span class='nam'>obj</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>methodname</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cls</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>methodname</span><span class='op'>)</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>cls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>obj</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_onmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>methodname</span><span class='op'>)</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='key'>and</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..........................................................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>FlatIter</span><span class='op'>(</span><span class='nam'>object</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Define an interator.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>ma</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>ma</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ma_iter</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>asarray</span><span class='op'>(</span><span class='nam'>ma</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>flat</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ma</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>maskiter</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>maskiter</span> <span class='op'>=</span> <span class='nam'>ma</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>flat</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__iter__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>### This won&#39;t work is ravel makes a copy</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>index</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ma</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span><span class='op'>[</span><span class='nam'>index</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>next</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ma_iter</span><span class='op'>.</span><span class='nam'>next</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>maskiter</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span> <span class='key'>and</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>maskiter</span><span class='op'>.</span><span class='nam'>next</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>MaskedArray</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Arrays with possibly masked values.&nbsp; Masked values of True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; exclude the corresponding element from any computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Construction:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; x = MaskedArray(data, mask=nomask, dtype=None, copy=True,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value=None, keep_mask=True, hard_mask=False, shrink=True)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; data : {var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Input data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; mask : {nomask, sequence}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Mask.&nbsp; Must be convertible to an array of booleans with</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the same shape as data: True indicates a masked (eg.,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; invalid) data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dtype : dtype</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Data type of the output. If None, the type of the data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; argument is used.&nbsp; If dtype is not None and different from</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; data.dtype, a copy is performed.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; copy : bool</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to copy the input data (True), or to use a</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; reference instead.&nbsp; Note: data are NOT copied by default.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; subok : {True, boolean}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to return a subclass of MaskedArray (if possible)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; or a plain MaskedArray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ndmin : {0, int}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Minimum number of dimensions</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value : {var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values when necessary. If</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; None, a default based on the datatype is used.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; keep_mask : {True, boolean}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to combine mask with the mask of the input data,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; if any (True), or to use only mask for the output (False).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; hard_mask : {False, boolean}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to use a hard mask or not. With a hard mask,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; masked values cannot be unmasked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; shrink : {True, boolean}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether to force compression of an empty mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>__array_priority__</span> <span class='op'>=</span> <span class='num'>15</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>_defaultmask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>_defaulthardmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>_baseclass</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__new__</span><span class='op'>(</span><span class='nam'>cls</span><span class='op'>,</span> <span class='nam'>data</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>nomask</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>ndmin</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>keep_mask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>hard_mask</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>flag</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>**</span><span class='nam'>options</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Create a new masked array from scratch.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Note: you can also create an array with the .view(MaskedArray)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; method.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>flag</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>warnings</span><span class='op'>.</span><span class='nam'>warn</span><span class='op'>(</span><span class='str'>&quot;The flag &#39;flag&#39; is now called &#39;shrink&#39;!&quot;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>DeprecationWarning</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>shrink</span> <span class='op'>=</span> <span class='nam'>flag</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Process data............</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>ndmin</span><span class='op'>=</span><span class='nam'>ndmin</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_baseclass</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='str'>&#39;_baseclass&#39;</span><span class='op'>,</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Check that we&#39;ew not erasing the mask..........</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span><span class='nam'>MaskedArray</span><span class='op'>)</span> <span class='key'>and</span> <span class='op'>(</span><span class='nam'>data</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>!=</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>copy</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Careful, cls might not always be MaskedArray...</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>cls</span><span class='op'>)</span> <span class='key'>or</span> <span class='key'>not</span> <span class='nam'>subok</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>cls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Backwards compatibility w/ numpy.core.ma .......</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>)</span> <span class='key'>and</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>data</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Process mask ...............................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Number of named fields (or zero if none)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>names_</span> <span class='op'>=</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span> <span class='key'>or</span> <span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Type of the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>names_</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdtype</span> <span class='op'>=</span> <span class='nam'>make_mask_descr</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdtype</span> <span class='op'>=</span> <span class='nam'>MaskType</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Case 1. : no mask in input ............</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='com'># Erase the current mask ?</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>keep_mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># With a reduced version</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>shrink</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># With full version</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>zeros</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Check whether we missed something</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='op'>(</span><span class='nam'>tuple</span><span class='op'>,</span><span class='nam'>list</span><span class='op'>)</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>m</span> <span class='key'>in</span> <span class='nam'>data</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Force shrinking of the mask if needed (and possible)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>mdtype</span> <span class='op'>==</span> <span class='nam'>MaskType</span><span class='op'>)</span> <span class='key'>and</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>copy</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Reset the shape of the original mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>)</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>data</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Case 2. : With a mask in input ........</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Read the mask with the current mdtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Or assume it&#39;s a sequence of bool/int</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>TypeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>m</span><span class='op'>]</span><span class='op'>*</span><span class='nam'>len</span><span class='op'>(</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>m</span> <span class='key'>in</span> <span class='nam'>mask</span><span class='op'>]</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure the mask and the data have the same shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>!=</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>nd</span><span class='op'>,</span> <span class='nam'>nm</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>nm</span> <span class='op'>==</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>nm</span> <span class='op'>==</span> <span class='nam'>nd</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>msg</span> <span class='op'>=</span> <span class='str'>&quot;Mask and data not compatible: data size is %i, &quot;</span><span class='op'>+</span><span class='xx'>\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;mask size is %i.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>MAError</span><span class='op'>,</span> <span class='nam'>msg</span> <span class='op'>%</span> <span class='op'>(</span><span class='nam'>nd</span><span class='op'>,</span> <span class='nam'>nm</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>copy</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the mask to the new value</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='key'>not</span> <span class='nam'>copy</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>keep_mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='key'>not</span> <span class='nam'>copy</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>names_</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>names_</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span> <span class='op'>|=</span> <span class='nam'>mask</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_or</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Update fill_value.......</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='str'>&#39;_fill_value&#39;</span><span class='op'>,</span> <span class='nam'>None</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># But don&#39;t run the check unless we have something to check....</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Process extra options ..</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hard_mask</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_hardmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='str'>&#39;_hardmask&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_hardmask</span> <span class='op'>=</span> <span class='nam'>hard_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>_baseclass</span> <span class='op'>=</span> <span class='nam'>_baseclass</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Copies some attributes of obj to self.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>obj</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span> <span class='key'>and</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_baseclass</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_baseclass</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># We need to copy the _basedict to avoid backward propagation</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_optinfo</span> <span class='op'>=</span> <span class='op'>{</span><span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_optinfo</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_optinfo&#39;</span><span class='op'>,</span> <span class='op'>{</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_optinfo</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_basedict&#39;</span><span class='op'>,</span><span class='op'>{</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_optinfo</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;__dict__&#39;</span><span class='op'>,</span> <span class='op'>{</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_dict</span> <span class='op'>=</span> <span class='nam'>dict</span><span class='op'>(</span><span class='nam'>_fill_value</span><span class='op'>=</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_fill_value&#39;</span><span class='op'>,</span> <span class='nam'>None</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_hardmask</span><span class='op'>=</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_hardmask&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_sharedmask</span><span class='op'>=</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_sharedmask&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_isfield</span><span class='op'>=</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_isfield&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_baseclass</span><span class='op'>=</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span><span class='str'>&#39;_baseclass&#39;</span><span class='op'>,</span> <span class='nam'>_baseclass</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_optinfo</span><span class='op'>=</span><span class='nam'>_optinfo</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>_basedict</span><span class='op'>=</span><span class='nam'>_optinfo</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__dict__</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>_dict</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__dict__</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>_optinfo</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__array_finalize__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Finalizes the masked array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get main attributes .........</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>odtype</span> <span class='op'>=</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>odtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>odtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Finalize the mask ...........</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#..................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__array_wrap__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>context</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Special hook for ufuncs.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Wraps the numpy array and sets the mask according to context.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#..........</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>context</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>func</span><span class='op'>,</span> <span class='nam'>args</span><span class='op'>,</span> <span class='nam'>_</span><span class='op'>)</span> <span class='op'>=</span> <span class='nam'>context</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>mask_or</span><span class='op'>,</span> <span class='op'>[</span><span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>arg</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>arg</span> <span class='key'>in</span> <span class='nam'>args</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the domain mask................</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>domain</span> <span class='op'>=</span> <span class='nam'>ufunc_domain</span><span class='op'>.</span><span class='nam'>get</span><span class='op'>(</span><span class='nam'>func</span><span class='op'>,</span> <span class='nam'>None</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>domain</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>args</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='num'>2</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>domain</span><span class='op'>,</span> <span class='nam'>args</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>domain</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>args</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Fill the result where the domain is wrong</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Binary domain: take the last value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>func</span><span class='op'>]</span><span class='op'>[</span><span class='op'>-</span><span class='num'>1</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>TypeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Unary domain: just use this one</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>func</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>KeyError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Domain not recognized, use fill_value instead</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='nam'>d</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Update the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>d</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>|=</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure the mask has the proper size</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>==</span> <span class='op'>(</span><span class='op'>)</span> <span class='key'>and</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#.............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>type</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dtype</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>type</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>type</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>type</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>issubclass</span><span class='op'>(</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>TypeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>type</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Should we update the mask ?</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>output</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dtype</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span> <span class='op'>=</span> <span class='nam'>output</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdtype</span> <span class='op'>=</span> <span class='nam'>make_mask_descr</span><span class='op'>(</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>mdtype</span><span class='op'>,</span> <span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>output</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure to reset the _fill_value if needed</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>output</span><span class='op'>,</span> <span class='str'>&#39;_fill_value&#39;</span><span class='op'>,</span> <span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>output</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>view</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#.............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>astype</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>newtype</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns a copy of the MaskedArray cast to given newtype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; output : MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A copy of self cast to input newtype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The returned record shape matches self.shape.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2,3.1],[4,5,6],[7,8,9]], mask=[0] + [1,0]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1.0 -- 3.1]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5.0 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7.0 -- 9.0]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.astype(int32)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 9]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>newtype</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>newtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>newtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>names</span> <span class='op'>=</span> <span class='nam'>output</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>names</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>bool</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='op'>[</span><span class='op'>(</span><span class='nam'>n</span><span class='op'>,</span><span class='nam'>bool</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>names</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Don&#39;t check _fill_value if it&#39;s None, that&#39;ll speed things up</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>output</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span><span class='op'>,</span> <span class='nam'>newtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#.............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__getitem__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;x.__getitem__(y) &lt;==&gt; x[y]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the item described by i, as a masked array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># This test is useful, but we should keep things light...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; if getmask(indx) is not nomask:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; msg = &quot;Masked arrays must be filled before they can be used as indices!&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise IndexError, msg</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getitem__</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># We could directly use ndarray.__getitem__ on self...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># But then we would have to modify __array_finalize__ to prevent the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># mask of being reshaped if it hasn&#39;t been set up properly yet...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># So it&#39;s easier to stick to the current version</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>dout</span><span class='op'>,</span><span class='str'>&#39;ndim&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># A record ................</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>dout</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>void</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='op'>(</span><span class='nam'>bool</span><span class='op'>,</span><span class='nam'>len</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span> <span class='op'>=</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>dout</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>dout</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Just a scalar............</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span> <span class='key'>and</span> <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Force dout to MA ........</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span> <span class='op'>=</span> <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Inherit attributes from self</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Check the fill_value ....</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>basestring</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>_isfield</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Update the mask if needed</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dout</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Note: Don&#39;t try to check for m.any(), that&#39;ll take too long...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>dout</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;x.__setitem__(i, y) &lt;==&gt; x[i]=y</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Set item described by index. If value is masked, masks those</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; locations.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>MAError</span><span class='op'>,</span> <span class='str'>&#39;Cannot alter the masked element.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># This test is useful, but we should keep things light...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; if getmask(indx) is not nomask:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; msg = &quot;Masked arrays must be filled before they can be used as indices!&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise IndexError, msg</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>basestring</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>value</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#........................................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; ndgetattr = ndarray.__getattribute__</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_dtype</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span><span class='str'>&#39;dtype&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>nbfields</span> <span class='op'>=</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>_dtype</span><span class='op'>.</span><span class='nam'>names</span> <span class='key'>or</span> <span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#........................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>value</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># The mask wasn&#39;t set: create a full version...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>_dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Now, set the mask to its value.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>nbfields</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>True</span><span class='op'>,</span><span class='op'>]</span> <span class='op'>*</span> <span class='nam'>nbfields</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_isfield</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#........................................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the _data part of the new value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dval</span> <span class='op'>=</span> <span class='nam'>value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the _mask part of the new value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mval</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>value</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>nbfields</span> <span class='key'>and</span> <span class='nam'>mval</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mval</span> <span class='op'>=</span> <span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>False</span><span class='op'>]</span> <span class='op'>*</span> <span class='nam'>nbfields</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the data, then the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>dval</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mval</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>_dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>mval</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='key'>not</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Unshare the mask if necessary to avoid propagation</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_isfield</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>unshare_mask</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the data, then the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>dval</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>mval</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>indx</span><span class='op'>,</span> <span class='str'>&#39;dtype&#39;</span><span class='op'>)</span> <span class='key'>and</span> <span class='op'>(</span><span class='nam'>indx</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>==</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>indx</span> <span class='op'>=</span> <span class='nam'>indx</span> <span class='op'>*</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span><span class='nam'>indx</span><span class='op'>,</span><span class='nam'>dval</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>nbfields</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>err_msg</span> <span class='op'>=</span> <span class='str'>&quot;Flexible &#39;hard&#39; masks are not yet supported...&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>NotImplementedError</span><span class='op'>(</span><span class='nam'>err_msg</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mindx</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>mval</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dindx</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dindx</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>&gt;</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dindx</span><span class='op'>[</span><span class='op'>~</span><span class='nam'>mindx</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>dval</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>mindx</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dindx</span> <span class='op'>=</span> <span class='nam'>dval</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>indx</span><span class='op'>,</span> <span class='nam'>dindx</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>mindx</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__getslice__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>i</span><span class='op'>,</span> <span class='nam'>j</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;x.__getslice__(i, j) &lt;==&gt; x[i:j]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the slice described by (i, j).&nbsp; The use of negative</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; indices is not supported.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__getitem__</span><span class='op'>(</span><span class='nam'>slice</span><span class='op'>(</span><span class='nam'>i</span><span class='op'>,</span><span class='nam'>j</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__setslice__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>i</span><span class='op'>,</span> <span class='nam'>j</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;x.__setslice__(i, j, value) &lt;==&gt; x[i:j]=value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Set the slice (i,j) of a to value. If value is masked, mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; those locations.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__setitem__</span><span class='op'>(</span><span class='nam'>slice</span><span class='op'>(</span><span class='nam'>i</span><span class='op'>,</span><span class='nam'>j</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set the mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>idtype</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='str'>&#39;dtype&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure the mask is set</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>current_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Just don&#39;t do anything is there&#39;s nothing to do...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>idtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No named fields.........</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>idtype</span><span class='op'>.</span><span class='nam'>names</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Hardmask: don&#39;t unmask the data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span> <span class='op'>|=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Softmask: set everything to False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Named fields w/ ............</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdtype</span> <span class='op'>=</span> <span class='nam'>current_mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Mask is a singleton</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># It&#39;s a boolean : make a record</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>kind</span> <span class='op'>==</span> <span class='str'>&#39;b&#39;</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>mask</span><span class='op'>.</span><span class='nam'>item</span><span class='op'>(</span><span class='op'>)</span><span class='op'>]</span><span class='op'>*</span><span class='nam'>len</span><span class='op'>(</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># It&#39;s a record: make sure the dtype is correct</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Mask is a sequence</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure the new mask is a ndarray with the proper dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Or assume it&#39;s a sequence of bool/int</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>TypeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>m</span><span class='op'>]</span><span class='op'>*</span><span class='nam'>len</span><span class='op'>(</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>m</span> <span class='key'>in</span> <span class='nam'>mask</span><span class='op'>]</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Hardmask: don&#39;t unmask the data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>idtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span> <span class='op'>|=</span> <span class='nam'>mask</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Softmask: set everything to False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Reshape if needed</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>current_mask</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>current_mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>_set_mask</span> <span class='op'>=</span> <span class='nam'>__setmask__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_get_mask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the current mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># We could try to force a reshape, but that wouldn&#39;t work in some cases.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; return self._mask.reshape(self.shape)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>_get_mask</span><span class='op'>,</span> <span class='nam'>fset</span><span class='op'>=</span><span class='nam'>__setmask__</span><span class='op'>,</span> <span class='nam'>doc</span><span class='op'>=</span><span class='str'>&quot;Mask&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_getrecordmask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the mask of the records.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; A record is masked when all the fields are masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>&gt;</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>axis</span> <span class='op'>=</span> <span class='num'>1</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='op'>(</span><span class='nam'>bool_</span><span class='op'>,</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>ValueError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='op'>[</span><span class='op'>[</span><span class='nam'>f</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='key'>for</span> <span class='nam'>f</span> <span class='key'>in</span> <span class='nam'>_mask</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_setrecordmask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the mask of the records.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; A record is masked when all the fields are masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>NotImplementedError</span><span class='op'>(</span><span class='str'>&quot;Coming soon: setting the mask per records!&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>recordmask</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>_getrecordmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>harden_mask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Force the mask to hard.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>soften_mask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Force the mask to soft.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>unshare_mask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Copy the mask and set the sharedmask flag to False.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_sharedmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>shrink_mask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Reduce a mask to nomask when possible.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='key'>and</span> <span class='key'>not</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_get_data</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the current data, as a view of the original</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; underlying data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_baseclass</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>_get_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>_get_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>raw_data</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the _data part of the MaskedArray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; DEPRECATED: You should really use ``.data`` instead...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>warnings</span><span class='op'>.</span><span class='nam'>warn</span><span class='op'>(</span><span class='str'>&#39;Use .data instead.&#39;</span><span class='op'>,</span> <span class='nam'>DeprecationWarning</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_get_flat</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a flat iterator.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>FlatIter</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>_set_flat</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set a flattened version of self to value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>y</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>y</span><span class='op'>[</span><span class='op'>:</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>_get_flat</span><span class='op'>,</span> <span class='nam'>fset</span><span class='op'>=</span><span class='nam'>_set_flat</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>doc</span><span class='op'>=</span><span class='str'>&quot;Flat version of the array.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>get_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the filling value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>set_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set the filling value to value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If value is None, use a default based on the data type.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>value</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>get_fill_value</span><span class='op'>,</span> <span class='nam'>fset</span><span class='op'>=</span><span class='nam'>set_fill_value</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>doc</span><span class='op'>=</span><span class='str'>&quot;Filling value.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a copy of self._data, where masked values are filled</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; with fill_value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If fill_value is None, self.fill_value is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; + Subclassing is preserved</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; + The result is NOT a MaskedArray !</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([1,2,3,4,5], mask=[0,0,1,0,1], fill_value=-999)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x.filled()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; array([1,2,-999,4,-999])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; type(x.filled())</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &lt;type &#39;numpy.ndarray&#39;&gt;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>_check_fill_value</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span> <span class='key'>is</span> <span class='nam'>masked_singleton</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>n</span> <span class='key'>in</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>field</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>field</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>[</span><span class='nam'>n</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='key'>not</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='nam'>m</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='op'>(</span><span class='nam'>TypeError</span><span class='op'>,</span> <span class='nam'>AttributeError</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>object</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>object</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>choose</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='op'>(</span><span class='nam'>d</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>IndexError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#ok, if scalar</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>compressed</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return a 1-D array of all the non-masked data.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; data : ndarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new ndarray holding the non-masked data is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; + The result is NOT a MaskedArray !</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = array(arange(5), mask=[0]+[1]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.compressed()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [0]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print type(x.compressed())</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &lt;type &#39;numpy.ndarray&#39;&gt;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>data</span><span class='op'>.</span><span class='nam'>compress</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>compress</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return `a` where condition is ``True``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If condition is a `MaskedArray`, missing values are considered as ``False``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; condition : var</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Boolean 1-d array selecting which entries to return. If len(condition)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; is less than the size of a along the axis, then output is truncated</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; to length of condition array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : {None, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis along which the operation must be performed.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : {None, ndarray}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must have</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the same shape as the expected output but the type will be cast if</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; result : MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A :class:`MaskedArray` object.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Warnings</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Please note the difference with :meth:`compressed` !</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The output of :meth:`compress` has a mask, the output of :meth:`compressed` does not.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the basic components</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>_mask</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Force the condition to a regular ndarray (forget the missing values...)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>condition</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_new</span> <span class='op'>=</span> <span class='nam'>_data</span><span class='op'>.</span><span class='nam'>compress</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_new</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_new</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>compress</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>_new</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__str__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;String representation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>masked_print_option</span><span class='op'>.</span><span class='nam'>enabled</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>f</span> <span class='op'>=</span> <span class='nam'>masked_print_option</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>res</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>==</span> <span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='op'>(</span><span class='nam'>bool</span><span class='op'>,</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>object</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>r</span><span class='op'>,</span> <span class='nam'>m</span><span class='op'>,</span> <span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>tuple</span><span class='op'>(</span><span class='nam'>r</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># convert to object array to make filled work</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>names</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>names</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>res</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='str'>&quot;|O8&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>res</span><span class='op'>[</span><span class='nam'>m</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>f</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rdtype</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>list</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>descr</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>r</span> <span class='key'>in</span> <span class='nam'>rdtype</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span><span class='op'>[</span><span class='num'>1</span><span class='op'>]</span> <span class='op'>=</span> <span class='str'>&#39;|O8&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>rdtype</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>tuple</span><span class='op'>(</span><span class='nam'>_</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>_</span> <span class='key'>in</span> <span class='nam'>rdtype</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>res</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>rdtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>field</span> <span class='key'>in</span> <span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>res</span><span class='op'>[</span><span class='nam'>field</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>m</span><span class='op'>[</span><span class='nam'>field</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>f</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>res</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>str</span><span class='op'>(</span><span class='nam'>res</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__repr__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Literal string representation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>with_mask</span> <span class='op'>=</span> <span class='str'>&quot;&quot;&quot;\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>masked_%(name)s(data =</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'> %(data)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; mask =</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'> %(mask)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; fill_value=%(fill)s)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>with_mask1</span> <span class='op'>=</span> <span class='str'>&quot;&quot;&quot;\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>masked_%(name)s(data = %(data)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; mask = %(mask)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; fill_value=%(fill)s)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>with_mask_flx</span> <span class='op'>=</span> <span class='str'>&quot;&quot;&quot;\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>masked_%(name)s(data =</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'> %(data)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; mask =</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'> %(mask)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; fill_value=%(fill)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; dtype=%(dtype)s)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>with_mask1_flx</span> <span class='op'>=</span> <span class='str'>&quot;&quot;&quot;\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>masked_%(name)s(data = %(data)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; mask = %(mask)s,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; fill_value=%(fill)s</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; dtype=%(dtype)s)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>n</span> <span class='op'>=</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>name</span> <span class='op'>=</span> <span class='nam'>repr</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>split</span><span class='op'>(</span><span class='str'>&#39;(&#39;</span><span class='op'>)</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>parameters</span> <span class='op'>=</span>&nbsp; <span class='nam'>dict</span><span class='op'>(</span><span class='nam'>name</span><span class='op'>=</span><span class='nam'>name</span><span class='op'>,</span> <span class='nam'>data</span><span class='op'>=</span><span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>fill</span><span class='op'>=</span><span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>str</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>names</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>n</span><span class='op'>&lt;=</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>with_mask1_flx</span> <span class='op'>%</span> <span class='nam'>parameters</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span>&nbsp; <span class='nam'>with_mask_flx</span> <span class='op'>%</span> <span class='nam'>parameters</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>n</span> <span class='op'>&lt;=</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>with_mask1</span> <span class='op'>%</span> <span class='nam'>parameters</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>with_mask</span> <span class='op'>%</span> <span class='nam'>parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__add__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Add other to self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>add</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__radd__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Add other to self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>add</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__sub__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Subtract other to self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>subtract</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__rsub__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Subtract other to self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>subtract</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__mul__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Multiply other by self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>multiply</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__rmul__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Multiply other by self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>multiply</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__div__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Divide other into self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>divide</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__truediv__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Divide other into self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>true_divide</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__floordiv__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Divide other into self, and return a new masked array.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>floor_divide</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__pow__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Raise self to the power other, masking the potential NaNs/Infs&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>power</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__iadd__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Add other to self in-place.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__iadd__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>+=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__isub__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Subtract other from self in-place.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__isub__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>+=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__imul__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Multiply self by other in-place.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__imul__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>+=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__idiv__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Divide self by other in-place.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>other_data</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dom_mask</span> <span class='op'>=</span> <span class='nam'>_DomainSafeDivide</span><span class='op'>(</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>other_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>other_mask</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>new_mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>other_mask</span><span class='op'>,</span> <span class='nam'>dom_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># The following 3 lines control the domain filling</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dom_mask</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>_</span><span class='op'>,</span> <span class='nam'>fval</span><span class='op'>)</span> <span class='op'>=</span> <span class='nam'>ufunc_fills</span><span class='op'>[</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>divide</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>other_data</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>where</span><span class='op'>(</span><span class='nam'>dom_mask</span><span class='op'>,</span> <span class='nam'>fval</span><span class='op'>,</span> <span class='nam'>other_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__idiv__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>other_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>new_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#...</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__ipow__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>other</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Raise self to the power other, in place&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>other_data</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>other_mask</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>other</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__ipow__</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>other_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>invalid</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>isfinite</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>new_mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>other_mask</span><span class='op'>,</span> <span class='nam'>invalid</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>new_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># The following line is potentially problematic, as we change _data...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span><span class='nam'>invalid</span><span class='op'>,</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__float__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Convert to float.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>&gt;</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>(</span><span class='str'>&quot;Only length-1 arrays can be converted &quot;</span><span class='xx'>\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;to Python scalars&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>warnings</span><span class='op'>.</span><span class='nam'>warn</span><span class='op'>(</span><span class='str'>&quot;Warning: converting a masked element to nan.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>nan</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>float</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>item</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__int__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Convert to int.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>size</span> <span class='op'>&gt;</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>TypeError</span><span class='op'>(</span><span class='str'>&quot;Only length-1 arrays can be converted &quot;</span><span class='xx'>\</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;to Python scalars&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>MAError</span><span class='op'>,</span> <span class='str'>&#39;Cannot convert masked element to a Python int.&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>int</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>item</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>get_imag</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>imag</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>imag</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>get_imag</span><span class='op'>,</span><span class='nam'>doc</span><span class='op'>=</span><span class='str'>&quot;Imaginary part&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>get_real</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>real</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>real</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='nam'>get_real</span><span class='op'>,</span><span class='nam'>doc</span><span class='op'>=</span><span class='str'>&quot;Real part&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>count</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Count the non-masked elements of the array along the given</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : int, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis along which to count the non-masked elements. If</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; not given, all the non masked elements are counted.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; result : MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A masked array where the mask is True where all data are</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; masked.&nbsp; If axis is None, returns either a scalar ot the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; masked singleton if all values are masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>s</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ls</span> <span class='op'>=</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>s</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ls</span> <span class='op'>==</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='num'>1</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ls</span> <span class='op'>==</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>s</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>size</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>n</span> <span class='op'>=</span> <span class='nam'>s</span><span class='op'>[</span><span class='nam'>axis</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>list</span><span class='op'>(</span><span class='nam'>s</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>del</span> <span class='nam'>t</span><span class='op'>[</span><span class='nam'>axis</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>ones</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>)</span> <span class='op'>*</span> <span class='nam'>n</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>n1</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>n2</span> <span class='op'>=</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>int</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>n1</span><span class='op'>-</span><span class='nam'>n2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>n1</span> <span class='op'>-</span> <span class='nam'>n2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>flatten</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;flatten&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns a 1D version of self, as a view.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Output view is of shape ``(self.size,)`` (or</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ``(np.ma.product(self.shape),)``).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2,3],[4,5,6],[7,8,9]], mask=[0] + [1,0]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 9]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.ravel()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [1 -- 3 -- 5 -- 7 -- 9]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>r</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>r</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>r</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>repeat</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;repeat&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>reshape</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>s</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns a masked array containing the data of a, but with a new shape.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The result is a view to the original array; if this is not possible,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; a ValueError is raised.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; shape : shape tuple or int</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The new shape should be compatible with the original shape. If an</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; integer, then the result will be a 1D array of that length.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; order : {&#39;C&#39;, &#39;F&#39;}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Determines whether the array data should be viewed as in C</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (row-major) order or FORTRAN (column-major) order.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; reshaped_array : array</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new view to the array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If you want to modify the shape in place, please use ``a.shape = s``</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2],[3,4]], mask=[1,0,0,1])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[-- 2]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3 --]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = x.reshape((4,1))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[--]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [--]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>kwargs</span><span class='op'>.</span><span class='nam'>update</span><span class='op'>(</span><span class='nam'>order</span><span class='op'>=</span><span class='nam'>kwargs</span><span class='op'>.</span><span class='nam'>get</span><span class='op'>(</span><span class='str'>&#39;order&#39;</span><span class='op'>,</span><span class='str'>&#39;C&#39;</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>s</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>s</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kwargs</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>resize</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>refcheck</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Attempt to modify the size and the shape of the array in place.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The array must own its own memory and not be referenced by</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; other arrays.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; None.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>refcheck</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>newshape</span><span class='op'>,</span> <span class='nam'>refcheck</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>ValueError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>ValueError</span><span class='op'>(</span><span class='str'>&quot;Cannot resize an array that has been referenced &quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&quot;or is referencing another array in this way.\n&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&quot;Use the resize function.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>put</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='str'>&#39;raise&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Set storage-indexed locations to corresponding values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Sets self._data.flat[n] = values[n] for each n in indices.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If `values` is shorter than `indices` then it will repeat.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If `values` has some masked values, the initial mask is updated</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; in consequence, else the corresponding values are unmasked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; indicies : 1-D array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Target indices, interpreted as integers.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; values : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Values to place in self._data copy at target indices.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; mode : {&#39;raise&#39;, &#39;wrap&#39;, &#39;clip&#39;}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Specifies how out-of-bounds indices will behave.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;raise&#39; : raise an error.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;wrap&#39; : wrap around.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;clip&#39; : clip to the range.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; `values` can be a scalar or length 1 array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2,3],[4,5,6],[7,8,9]], mask=[0] + [1,0]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 9]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x.put([0,4,8],[10,20,30])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[10 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 20 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 30]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x.put(4,999)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[10 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 999 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 30]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Hard mask: Get rid of the values/indices that fall on masked data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_hardmask</span> <span class='key'>and</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>indices</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>indices</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>values</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>values</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>indices</span> <span class='op'>=</span> <span class='nam'>indices</span><span class='op'>[</span><span class='op'>~</span><span class='nam'>mask</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>values</span> <span class='op'>=</span> <span class='nam'>values</span><span class='op'>[</span><span class='op'>~</span><span class='nam'>mask</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>put</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#....</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>)</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span><span class='op'>.</span><span class='nam'>put</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span><span class='op'>.</span><span class='nam'>put</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>ids</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the addresses of the data and mask areas.&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>ctypes</span><span class='op'>.</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>id</span><span class='op'>(</span><span class='nam'>nomask</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>ctypes</span><span class='op'>.</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>ctypes</span><span class='op'>.</span><span class='nam'>data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>iscontiguous</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Is the data contiguous?&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>flags</span><span class='op'>[</span><span class='str'>&#39;CONTIGUOUS&#39;</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>all</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Check if all of the elements of `a` are true.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Performs a :func:`logical_and` over the given axis and returns the result.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masked values are considered as True during computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; For convenience, the output array is masked where ALL the values along the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; current axis are masked: if the output would have been a scalar and that</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; all the values are masked, then the output is `masked`.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, integer}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis to perform the operation over.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, perform over flattened array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Array into which the result can be placed. Its type is preserved</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and it must be of the right shape to hold the output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; all : equivalent function</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; np.ma.array([1,2,3]).all()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; a = np.ma.array([1,2,3], mask=True)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; (a.all() is np.ma.masked)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; True</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='key'>or</span> <span class='nam'>mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>any</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Check if any of the elements of `a` are true.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Performs a logical_or over the given axis and returns the result.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masked values are considered as False during computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, integer}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis to perform the operation over.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, perform over flattened array and return a scalar.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Array into which the result can be placed. Its type is preserved</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and it must be of the right shape to hold the output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; any : equivalent function</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>ndim</span> <span class='key'>or</span> <span class='nam'>mask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>nonzero</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the indices of the elements of a that are not zero</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; nor masked, as a tuple of arrays.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; There are as many tuples as dimensions of a, each tuple</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; contains the indices of the non-zero elements in that</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; dimension.&nbsp; The corresponding non-zero values can be obtained</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; with ``a[a.nonzero()]``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; To group the indices by element, rather than dimension, use</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; instead: ``transpose(a.nonzero())``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The result of this is always a 2d array, with a row for each</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; non-zero element.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>nonzero</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>trace</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>offset</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>axis1</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>axis2</span><span class='op'>=</span><span class='num'>1</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the sum along the offset diagonal of the array&#39;s</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; indicated `axis1` and `axis2`.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#!!!: implement out + test!</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>super</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>trace</span><span class='op'>(</span><span class='nam'>offset</span><span class='op'>=</span><span class='nam'>offset</span><span class='op'>,</span> <span class='nam'>axis1</span><span class='op'>=</span><span class='nam'>axis1</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>axis2</span><span class='op'>=</span><span class='nam'>axis2</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>D</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>diagonal</span><span class='op'>(</span><span class='nam'>offset</span><span class='op'>=</span><span class='nam'>offset</span><span class='op'>,</span> <span class='nam'>axis1</span><span class='op'>=</span><span class='nam'>axis1</span><span class='op'>,</span> <span class='nam'>axis2</span><span class='op'>=</span><span class='nam'>axis2</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>D</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>sum</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the sum of the array elements over the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masked elements are set to 0 internally.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, -1, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis along which the sum is computed. The default</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (`axis` = None) is to compute over the flattened array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; dtype : {None, dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Determines the type of the returned array and of the accumulator</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where the elements are summed. If dtype has the value None and</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the type of a is an integer type of precision less than the default</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; platform integer, then the default platform integer precision is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; used.&nbsp; Otherwise, the dtype is the same as that of a.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out :&nbsp; {None, ndarray}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; have the same shape and buffer length as the expected output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; but the type will be cast if necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; sum_along_axis : MaskedArray or scalar</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; An array with the same shape as self, with the specified</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; axis removed.&nbsp;&nbsp; If self is a 0-d array, or if `axis` is None, a scalar</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is returned.&nbsp; If an output array is specified, a reference to</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `out` is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2,3],[4,5,6],[7,8,9]], mask=[0] + [1,0]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 9]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.sum()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; 25</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.sum(axis=1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [4 5 16]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.sum(axis=0)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [8 5 12]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print type(x.sum(axis=0, dtype=np.int64)[0])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &lt;type &#39;numpy.int64&#39;&gt;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>newmask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>newmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>newmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>outmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>newmask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>cumsum</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return the cumulative sum of the elements along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The cumulative sum is calculated over the flattened array by</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; default, otherwise over the specified axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Masked values are set to 0 internally during the computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; However, their position is saved, and the result will be masked at</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the same locations.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : {None, -1, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis along which the sum is computed. The default (`axis` = None) is to</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; compute over the flattened array. `axis` may be negative, in which case</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; it counts from the&nbsp;&nbsp; last to the first axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dtype : {None, dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Type of the returned array and of the accumulator in which the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; elements are summed.&nbsp; If `dtype` is not specified, it defaults</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; to the dtype of `a`, unless `a` has an integer dtype with a</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; precision less than that of the default platform integer.&nbsp; In</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; that case, the default platform integer is used.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : ndarray, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; have the same shape and buffer length as the expected output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; but the type will be cast if necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Warning</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The mask is lost if out is not a valid :class:`MaskedArray` !</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; cumsum : ndarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A new array holding the result is returned unless ``out`` is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; specified, in which case a reference to ``out`` is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Example</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &gt;&gt;&gt; marr = np.ma.array(np.arange(10), mask=[0,0,0,1,1,1,0,0,0,0])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &gt;&gt;&gt; print marr.cumsum()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; [0 1 3 -- -- -- 9 16 24 33]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Arithmetic is modular when using integer types, and no error is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; raised on overflow.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>cumsum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>prod</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the product of the array elements over the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masked elements are set to 1 internally for computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis over which the product is taken. If None is used, then the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; product is over all the array elements.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; dtype : {None, dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Determines the type of the returned array and of the accumulator</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where the elements are multiplied. If ``dtype`` has the value ``None``</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and the type of a is an integer type of precision less than the default</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; platform integer, then the default platform integer precision is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; used.&nbsp; Otherwise, the dtype is the same as that of a.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must have</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the same shape as the expected output but the type will be cast if</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; product_along_axis : {array, scalar}, see dtype parameter above.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returns an array whose shape is the same as a with the specified</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; axis removed. Returns a 0d array when a is 1d or axis=None.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returns a reference to the specified output array if specified.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; prod : equivalent function</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Arithmetic is modular when using integer types, and no error is raised</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; on overflow.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; np.prod([1.,2.])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; 2.0</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; np.prod([1.,2.], dtype=np.int32)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; 2</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; np.prod([[1.,2.],[3.,4.]])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; 24.0</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; np.prod([[1.,2.],[3.,4.]], axis=1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; array([&nbsp; 2.,&nbsp; 12.])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>newmask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>1</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>prod</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>newmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>newmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>1</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>prod</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>outmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>newmask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>product</span> <span class='op'>=</span> <span class='nam'>prod</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>cumprod</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return the cumulative product of the elements along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The cumulative product is taken over the flattened array by</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; default, otherwise over the specified axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Masked values are set to 1 internally during the computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; However, their position is saved, and the result will be masked at</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the same locations.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : {None, -1, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis along which the product is computed. The default</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; (`axis` = None) is to compute over the flattened array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dtype : {None, dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Determines the type of the returned array and of the accumulator</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; where the elements are multiplied. If ``dtype`` has the value ``None`` and</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the type of ``a`` is an integer type of precision less than the default</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; platform integer, then the default platform integer precision is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; used.&nbsp; Otherwise, the dtype is the same as that of ``a``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : ndarray, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; have the same shape and buffer length as the expected output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; but the type will be cast if necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Warning</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The mask is lost if out is not a valid MaskedArray !</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; cumprod : ndarray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A new array holding the result is returned unless out is specified,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; in which case a reference to out is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Arithmetic is modular when using integer types, and no error is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; raised on overflow.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='num'>1</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>cumprod</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>mean</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>super</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>mean</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dsum</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cnt</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>count</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>dsum</span><span class='op'>*</span><span class='num'>1.</span><span class='op'>/</span><span class='nam'>cnt</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>outmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>mean</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>mean</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>anom</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return the anomalies (deviations from the average) along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : int, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis along which to perform the operation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If None, applies to a flattened version of the array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dtype : {dtype}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Datatype for the intermediary computation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If not given, the current dtype is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>mean</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>axis</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>self</span> <span class='op'>-</span> <span class='nam'>m</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>self</span> <span class='op'>-</span> <span class='nam'>expand_dims</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>var</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>ddof</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Easy case: nomask, business as usual</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>var</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>ddof</span><span class='op'>=</span><span class='nam'>ddof</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Some data are masked, yay!</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>cnt</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>count</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>-</span><span class='nam'>ddof</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>danom</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>anom</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>iscomplexobj</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>danom</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>danom</span><span class='op'>)</span><span class='op'>**</span><span class='num'>2</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>danom</span> <span class='op'>*=</span> <span class='nam'>danom</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span> <span class='op'>=</span> <span class='nam'>divide</span><span class='op'>(</span><span class='nam'>danom</span><span class='op'>.</span><span class='nam'>sum</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>cnt</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Apply the mask if it&#39;s not a scalar</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dvar</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>,</span> <span class='op'>(</span><span class='nam'>cnt</span><span class='op'>&lt;=</span><span class='nam'>ddof</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>dvar</span><span class='op'>,</span><span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>False</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure that masked is returned when the scalar is masked.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>nan</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># In case with have an explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>dvar</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the mask if needed</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>dvar</span><span class='op'>.</span><span class='nam'>mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>dvar</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>var</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>var</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>std</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>ddof</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>var</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span><span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span><span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>ddof</span><span class='op'>=</span><span class='nam'>ddof</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dvar</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dvar</span> <span class='op'>=</span> <span class='nam'>sqrt</span><span class='op'>(</span><span class='nam'>dvar</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span> <span class='op'>**=</span> <span class='num'>0.5</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>dvar</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>std</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>std</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>round</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>decimals</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return an array rounded a to the given number of decimals.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Refer to `numpy.around` for full documentation.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; numpy.around : equivalent function</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>round</span><span class='op'>(</span><span class='nam'>decimals</span><span class='op'>=</span><span class='nam'>decimals</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No explicit output: we&#39;re done</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>round</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>round</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='str'>&#39;quicksort&#39;</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>order</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return an ndarray of indices that sort the array along the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; specified axis.&nbsp; Masked values are filled beforehand to</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : int, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis to be indirectly sorted.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If not given, uses a flatten version of the array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If not given, self.fill_value is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; kind : {string}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Sorting algorithm (default &#39;quicksort&#39;)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Possible values: &#39;quicksort&#39;, &#39;mergesort&#39;, or &#39;heapsort&#39;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; This method executes an indirect sort along the given axis</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; using the algorithm specified by the kind keyword. It returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; an array of indices of the same shape as &#39;a&#39; that index data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; along the given axis in sorted order.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The various sorts are characterized by average speed, worst</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; case performance need for work space, and whether they are</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; stable.&nbsp; A stable sort keeps items with the same key in the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; same relative order. The three available algorithms have the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; following properties:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; kind&nbsp;&nbsp; | speed |&nbsp; worst case | work space | stable|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |&#39;quicksort&#39;|&nbsp;&nbsp; 1&nbsp;&nbsp; | O(n^2)&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;&nbsp; 0&nbsp; &nbsp; &nbsp; |&nbsp;&nbsp; no&nbsp; |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |&#39;mergesort&#39;|&nbsp;&nbsp; 2&nbsp;&nbsp; | O(n*log(n)) |&nbsp; &nbsp; ~n/2&nbsp; &nbsp; |&nbsp;&nbsp; yes |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |&#39;heapsort&#39; |&nbsp;&nbsp; 3&nbsp;&nbsp; | O(n*log(n)) |&nbsp; &nbsp;&nbsp; 0&nbsp; &nbsp; &nbsp; |&nbsp;&nbsp; no&nbsp; |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; All the sort algorithms make temporary copies of the data when</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the sort is not along the last axis. Consequently, sorts along</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the last axis are faster and use less space than sorts along</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; other axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>argmin</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return array of indices to the minimum values along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, integer}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, the index is into the flattened array, otherwise along</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the specified axis</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.&nbsp; If None, the output of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; minimum_fill_value(self._data) is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Array into which the result can be placed. Its type is preserved</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and it must be of the right shape to hold the output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; {ndarray, scalar}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If multi-dimension input, returns a new ndarray of indices to the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; minimum values along the given axis.&nbsp; Otherwise, returns a scalar</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; of index to the minimum values along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array(arange(4), mask=[1,1,0,0])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x.shape = (2,2)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[-- --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2 3]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.argmin(axis=0, fill_value=-1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [0 0]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.argmin(axis=0, fill_value=9)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [1 1]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>minimum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argmin</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>argmax</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns array of indices of the maximum values along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Masked values are treated as if they had the value fill_value.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, integer}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, the index is into the flattened array, otherwise along</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the specified axis</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.&nbsp; If None, the output of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maximum_fill_value(self._data) is used instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Array into which the result can be placed. Its type is preserved</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; and it must be of the right shape to hold the output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; index_array : {integer_array}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; a = np.arange(6).reshape(2,3)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; a.argmax()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; 5</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; a.argmax(0)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; array([1, 1, 1])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; a.argmax(1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; array([2, 2])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>maximum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argmax</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>sort</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='op'>-</span><span class='num'>1</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='str'>&#39;quicksort&#39;</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>endwith</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Sort along the given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : {int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis to be indirectly sorted.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; kind : {&#39;quicksort&#39;, &#39;mergesort&#39;, or &#39;heapsort&#39;}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Sorting algorithm (default &#39;quicksort&#39;)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Possible values: &#39;quicksort&#39;, &#39;mergesort&#39;, or &#39;heapsort&#39;.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; order : {None, var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If a has fields defined, then the order keyword can be the field name</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; to sort on or a list (or tuple) of field names to indicate&nbsp; the order</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; that fields should be used to define the sort.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; endwith : {True, False}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Whether missing values (if any) should be forced in the upper indices</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; (at the end of the array) (True) or lower indices (at the beginning).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value : {var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.&nbsp; If None, use</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the the output of minimum_fill_value().</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; - When used as method, returns None.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; - When used as a function, returns an array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; This method sorts &#39;a&#39; in place along the given axis using</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the algorithm specified by the kind keyword.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The various sorts may characterized by average speed,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; worst case performance need for work space, and whether</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; they are stable.&nbsp; A stable sort keeps items with the same</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; key in the same relative order and is most useful when</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; used w/ argsort where the key might differ from the items</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; being sorted.&nbsp; The three available algorithms have the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; following properties:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |&nbsp; &nbsp; kind&nbsp;&nbsp; | speed |&nbsp; worst case | work space | stable|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |&#39;quicksort&#39;|&nbsp;&nbsp; 1&nbsp;&nbsp; | O(n^2)&nbsp; &nbsp; &nbsp; |&nbsp; &nbsp;&nbsp; 0&nbsp; &nbsp; &nbsp; |&nbsp;&nbsp; no&nbsp; |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |&#39;mergesort&#39;|&nbsp;&nbsp; 2&nbsp;&nbsp; | O(n*log(n)) |&nbsp; &nbsp; ~n/2&nbsp; &nbsp; |&nbsp;&nbsp; yes |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |&#39;heapsort&#39; |&nbsp;&nbsp; 3&nbsp;&nbsp; | O(n*log(n)) |&nbsp; &nbsp;&nbsp; 0&nbsp; &nbsp; &nbsp; |&nbsp;&nbsp; no&nbsp; |</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; |------------------------------------------------------|</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>sort</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>endwith</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>minimum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>maximum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>idx</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>indices</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>idx</span><span class='op'>[</span><span class='nam'>axis</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>filler</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span><span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span><span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>idx_l</span> <span class='op'>=</span> <span class='nam'>idx</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tmp_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>[</span><span class='nam'>idx_l</span><span class='op'>]</span><span class='op'>.</span><span class='nam'>flat</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tmp_data</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>[</span><span class='nam'>idx_l</span><span class='op'>]</span><span class='op'>.</span><span class='nam'>flat</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>tmp_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>tmp_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#............................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>min</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return the minimum along a given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; axis : {None, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Axis along which to operate.&nbsp; By default, ``axis`` is None and the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; flattened input is used.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : array_like, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result.&nbsp; Must be of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; the same shape and buffer length as the expected output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If None, use the output of `minimum_fill_value`.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; amin : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; New array holding the result.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If ``out`` was specified, ``out`` is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; minimum_fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns the minimum filling value for a given datatype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>newmask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>minimum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>newmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get rid of Infs</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>newmask</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='nam'>newmask</span><span class='op'>,</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>newmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>outmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>newmask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>newmask</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>nan</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>mini</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>minimum</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>minimum</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>max</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return the maximum along a given axis.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis along which to operate.&nbsp; By default, ``axis`` is None and the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flattened input is used.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : array_like, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result.&nbsp; Must</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; be of the same shape and buffer length as the expected output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, use the output of maximum_fill_value().</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; amax : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; New array holding the result.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If ``out`` was specified, ``out`` is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; maximum_fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returns the maximum filling value for a given datatype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__getattribute__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>newmask</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>maximum_fill_value</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># No explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>newmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get rid of Infs</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>newmask</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='nam'>newmask</span><span class='op'>,</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>newmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Explicit output</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>,</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='op'>(</span><span class='nam'>outmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span> <span class='op'>=</span> <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>outmask</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>newmask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>newmask</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>nan</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>ptp</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return (maximum - minimum) along the the given dimension</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; (i.e. peak-to-peak value).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; axis : {None, int}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Axis along which to find the peaks.&nbsp; If None (default) the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flattened array is used.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; out : {None, array_like}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Alternative output array in which to place the result. It must</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; have the same shape and buffer length as the expected output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; but the type will be cast if necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ptp : ndarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new array holding the result, unless ``out`` was</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; specified, in which case a reference to ``out`` is returned.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>-=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>flat</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span> <span class='op'>-=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Array methods ---------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>copy</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;copy&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>diagonal</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;diagonal&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>take</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;take&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>transpose</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;transpose&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>T</span> <span class='op'>=</span> <span class='nam'>property</span><span class='op'>(</span><span class='nam'>fget</span><span class='op'>=</span><span class='key'>lambda</span> <span class='nam'>self</span><span class='op'>:</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>transpose</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>swapaxes</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;swapaxes&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>clip</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;clip&#39;</span><span class='op'>,</span> <span class='nam'>onmask</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>copy</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;copy&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>squeeze</span> <span class='op'>=</span> <span class='nam'>_arraymethod</span><span class='op'>(</span><span class='str'>&#39;squeeze&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#--------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>tolist</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Copy the data portion of the array to a hierarchical python</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; list and returns that list.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Data items are converted to the nearest compatible Python</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; type.&nbsp; Masked values are converted to fill_value. If</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value is None, the corresponding entries in the output</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; list will be ``None``.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Set temps to save time when dealing w/ mrecarrays...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>nbdims</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ndim</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtypesize</span> <span class='op'>=</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>nbdims</span> <span class='op'>==</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>None</span><span class='op'>]</span><span class='op'>*</span><span class='nam'>dtypesize</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>nbdims</span> <span class='op'>==</span> <span class='num'>1</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>maskedidx</span> <span class='op'>=</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>nonzero</span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span><span class='num'>0</span><span class='op'>]</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>dtypesize</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>nodata</span> <span class='op'>=</span> <span class='nam'>tuple</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>None</span><span class='op'>]</span><span class='op'>*</span><span class='nam'>dtypesize</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>nodata</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>[</span><span class='nam'>operator</span><span class='op'>.</span><span class='nam'>setitem</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span><span class='nam'>i</span><span class='op'>,</span><span class='nam'>nodata</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>i</span> <span class='key'>in</span> <span class='nam'>maskedidx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>idx</span> <span class='key'>in</span> <span class='nam'>zip</span><span class='op'>(</span><span class='op'>*</span><span class='op'>[</span><span class='nam'>i</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>i</span> <span class='key'>in</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>nonzero</span><span class='op'>(</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tmp</span> <span class='op'>=</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>i</span> <span class='key'>in</span> <span class='nam'>idx</span><span class='op'>[</span><span class='op'>:</span><span class='op'>-</span><span class='num'>1</span><span class='op'>]</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tmp</span> <span class='op'>=</span> <span class='nam'>tmp</span><span class='op'>[</span><span class='nam'>i</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>tmp</span><span class='op'>[</span><span class='nam'>idx</span><span class='op'>[</span><span class='op'>-</span><span class='num'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>tostring</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='str'>&#39;C&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Return a copy of array data as a Python string containing the raw bytes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; in the array.&nbsp; The array is filled beforehand.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; fill_value : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value used to fill in the masked values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; If None, uses self.fill_value instead.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; order : {string}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Order of the data item in the copy {&#39;C&#39;,&#39;F&#39;,&#39;A&#39;}.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;C&#39;&nbsp; &nbsp; &nbsp;&nbsp; -- C order (row major)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;Fortran&#39; -- Fortran order (column major)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;Any&#39;&nbsp; &nbsp;&nbsp; -- Current order of array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; None&nbsp; &nbsp; &nbsp; -- Same as &quot;Any&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; As for method:`ndarray.tostring`, information about the shape, dtype...,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; but also fill_value will be lost.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tostring</span><span class='op'>(</span><span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#........................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>tofile</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>fid</span><span class='op'>,</span> <span class='nam'>sep</span><span class='op'>=</span><span class='str'>&quot;&quot;</span><span class='op'>,</span> <span class='nam'>format</span><span class='op'>=</span><span class='str'>&quot;%s&quot;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>NotImplementedError</span><span class='op'>(</span><span class='str'>&quot;Not implemented yet, sorry...&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>torecords</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Transforms a MaskedArray into a flexible-type array with two fields:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; * the ``_data`` field stores the ``_data`` part of the array;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; * the ``_mask`` field stores the ``_mask`` part of the array;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; record : ndarray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A new flexible-type ndarray with two fields: the first element</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; containing a value, the second element containing the corresponding</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mask boolean.&nbsp; The returned record shape matches self.shape.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; A side-effect of transforming a masked array into a flexible ndarray is</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; that meta information (``fill_value``, ...) will be lost.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Examples</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; x = np.ma.array([[1,2,3],[4,5,6],[7,8,9]], mask=[0] + [1,0]*4)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[1 -- 3]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-- 5 --]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [7 -- 9]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt;&gt; print x.torecords()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; [[(1, False) (2, True) (3, False)]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [(4, True) (5, False) (6, True)]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [(7, False) (8, True) (9, False)]]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Get the basic dtype ....</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ddtype</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># Make sure we have a mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>_mask</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>ddtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># And get its dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mdtype</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>record</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>ndarray</span><span class='op'>(</span><span class='nam'>shape</span><span class='op'>=</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dtype</span><span class='op'>=</span><span class='op'>[</span><span class='op'>(</span><span class='str'>&#39;_data&#39;</span><span class='op'>,</span><span class='nam'>ddtype</span><span class='op'>)</span><span class='op'>,</span><span class='op'>(</span><span class='str'>&#39;_mask&#39;</span><span class='op'>,</span><span class='nam'>mdtype</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>record</span><span class='op'>[</span><span class='str'>&#39;_data&#39;</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>record</span><span class='op'>[</span><span class='str'>&#39;_mask&#39;</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>record</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#--------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Pickling</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__getstate__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return the internal state of the masked array, for pickling</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; purposes.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>state</span> <span class='op'>=</span> <span class='op'>(</span><span class='num'>1</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>flags</span><span class='op'>.</span><span class='nam'>fnc</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>.</span><span class='nam'>tostring</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tostring</span><span class='op'>(</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_fill_value</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>state</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__setstate__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>state</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Restore the internal state of the masked array, for</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; pickling purposes.&nbsp; ``state`` is typically the output of the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; ``__getstate__`` output, and is a 5-tuple:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; - class name</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; - a tuple giving the shape of the data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; - a typecode for the data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; - a binary string for the data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; - a binary string for the mask.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>ver</span><span class='op'>,</span> <span class='nam'>shp</span><span class='op'>,</span> <span class='nam'>typ</span><span class='op'>,</span> <span class='nam'>isf</span><span class='op'>,</span> <span class='nam'>raw</span><span class='op'>,</span> <span class='nam'>msk</span><span class='op'>,</span> <span class='nam'>flv</span><span class='op'>)</span> <span class='op'>=</span> <span class='nam'>state</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__setstate__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='op'>(</span><span class='nam'>shp</span><span class='op'>,</span> <span class='nam'>typ</span><span class='op'>,</span> <span class='nam'>isf</span><span class='op'>,</span> <span class='nam'>raw</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>__setstate__</span><span class='op'>(</span><span class='op'>(</span><span class='nam'>shp</span><span class='op'>,</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>(</span><span class='nam'>bool</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>isf</span><span class='op'>,</span> <span class='nam'>msk</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>flv</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__reduce__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a 3-tuple for pickling a MaskedArray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='op'>(</span><span class='nam'>_mareconstruct</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>__class__</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_baseclass</span><span class='op'>,</span> <span class='op'>(</span><span class='num'>0</span><span class='op'>,</span><span class='op'>)</span><span class='op'>,</span> <span class='str'>&#39;b&#39;</span><span class='op'>,</span> <span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__getstate__</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__deepcopy__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>memo</span><span class='op'>=</span><span class='op'>{</span><span class='op'>}</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>from</span> <span class='nam'>copy</span> <span class='key'>import</span> <span class='nam'>deepcopy</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>copied</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>__new__</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>memo</span><span class='op'>[</span><span class='nam'>id</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>copied</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>for</span> <span class='op'>(</span><span class='nam'>k</span><span class='op'>,</span><span class='nam'>v</span><span class='op'>)</span> <span class='key'>in</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__dict__</span><span class='op'>.</span><span class='nam'>iteritems</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>copied</span><span class='op'>.</span><span class='nam'>__dict__</span><span class='op'>[</span><span class='nam'>k</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>deepcopy</span><span class='op'>(</span><span class='nam'>v</span><span class='op'>,</span> <span class='nam'>memo</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>copied</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>_mareconstruct</span><span class='op'>(</span><span class='nam'>subtype</span><span class='op'>,</span> <span class='nam'>baseclass</span><span class='op'>,</span> <span class='nam'>baseshape</span><span class='op'>,</span> <span class='nam'>basetype</span><span class='op'>,</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Internal function that builds a new MaskedArray from the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; information stored in a pickle.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__new__</span><span class='op'>(</span><span class='nam'>baseclass</span><span class='op'>,</span> <span class='nam'>baseshape</span><span class='op'>,</span> <span class='nam'>basetype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>ndarray</span><span class='op'>.</span><span class='nam'>__new__</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>,</span> <span class='nam'>baseshape</span><span class='op'>,</span> <span class='str'>&#39;b1&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>subtype</span><span class='op'>.</span><span class='nam'>__new__</span><span class='op'>(</span><span class='nam'>subtype</span><span class='op'>,</span> <span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>basetype</span><span class='op'>,</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Shortcuts ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####---------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>isMaskedArray</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Is x a masked array, that is, an instance of MaskedArray?&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>isarray</span> <span class='op'>=</span> <span class='nam'>isMaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>isMA</span> <span class='op'>=</span> <span class='nam'>isMaskedArray</span>&nbsp; <span class='com'>#backward compatibility</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># We define the masked singleton as a float for higher precedence...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'># Note that it can be tricky sometimes w/ type comparison</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>masked_singleton</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>(</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>float_</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>masked</span> <span class='op'>=</span> <span class='nam'>masked_singleton</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>masked_array</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>array</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>nomask</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>keep_mask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>hard_mask</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>ndmin</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;array(data, dtype=None, copy=False, order=False, mask=nomask,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fill_value=None, keep_mask=True, hard_mask=False, shrink=True,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; subok=True, ndmin=0)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Acts as shortcut to MaskedArray, with options in a different order</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; for convenience.&nbsp; And backwards compatibility...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#!!!: we should try to put &#39;order&#39; somwehere</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>MaskedArray</span><span class='op'>(</span><span class='nam'>data</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>copy</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>subok</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>keep_mask</span><span class='op'>=</span><span class='nam'>keep_mask</span><span class='op'>,</span> <span class='nam'>hard_mask</span><span class='op'>=</span><span class='nam'>hard_mask</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>ndmin</span><span class='op'>=</span><span class='nam'>ndmin</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>shrink</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>array</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>masked_array</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>is_masked</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Does x have masked values?&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####---------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Extrema functions ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####---------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_extrema_operation</span><span class='op'>(</span><span class='nam'>object</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Generic class for maximum/minimum functions.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Executes the call behavior.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>b</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>where</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>compare</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#.........</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>target</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Reduce target along the given axis.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>target</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>kargs</span> <span class='op'>=</span> <span class='op'>{</span> <span class='str'>&#39;axis&#39;</span> <span class='op'>:</span> <span class='nam'>axis</span> <span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>kargs</span> <span class='op'>=</span> <span class='op'>{</span><span class='op'>}</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>target</span> <span class='op'>=</span> <span class='nam'>target</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='op'>(</span><span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>m</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ufunc</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kargs</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>target</span> <span class='op'>=</span> <span class='nam'>target</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value_func</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>type</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ufunc</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>target</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kargs</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>logical_and</span><span class='op'>.</span><span class='nam'>reduce</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>kargs</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>t</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>m</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>t</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>t</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#.........</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>outer</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Return the function applied to the outer product of a and b.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ma</span> <span class='key'>is</span> <span class='nam'>nomask</span> <span class='key'>and</span> <span class='nam'>mb</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>logical_or</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='nam'>ma</span><span class='op'>,</span> <span class='nam'>mb</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ufunc</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_minimum_operation</span><span class='op'>(</span><span class='nam'>_extrema_operation</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Object to calculate minima&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;minimum(a, b) or minimum(a)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>In one argument case, returns the scalar minimum.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ufunc</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>minimum</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>afunc</span> <span class='op'>=</span> <span class='nam'>amin</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>compare</span> <span class='op'>=</span> <span class='nam'>less</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value_func</span> <span class='op'>=</span> <span class='nam'>minimum_fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#............................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_maximum_operation</span><span class='op'>(</span><span class='nam'>_extrema_operation</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Object to calculate maxima&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span> <span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;maximum(a, b) or maximum(a)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; In one argument case returns the scalar maximum.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>ufunc</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>maximum</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>afunc</span> <span class='op'>=</span> <span class='nam'>amax</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>compare</span> <span class='op'>=</span> <span class='nam'>greater</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>fill_value_func</span> <span class='op'>=</span> <span class='nam'>maximum_fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..........................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>min</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='op'>(</span><span class='nam'>AttributeError</span><span class='op'>,</span> <span class='nam'>TypeError</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># If obj doesn&#39;t have a max method,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># ...or if the method doesn&#39;t accept a fill_value argument</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>min</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>min</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>max</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='op'>(</span><span class='nam'>AttributeError</span><span class='op'>,</span> <span class='nam'>TypeError</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># If obj doesn&#39;t have a max method,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># ...or if the method doesn&#39;t accept a fill_value argument</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>max</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>ptp</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;a.ptp(axis=None) =&nbsp; a.max(axis)-a.min(axis)&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>obj</span><span class='op'>.</span><span class='nam'>ptp</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='op'>(</span><span class='nam'>AttributeError</span><span class='op'>,</span> <span class='nam'>TypeError</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># If obj doesn&#39;t have a max method,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'># ...or if the method doesn&#39;t accept a fill_value argument</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>ptp</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>fill_value</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ptp</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>ptp</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####---------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Definition of functions from the corresponding methods ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####---------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_frommethod</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Define functions from existing MaskedArray methods.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; _methodname : string</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name of the method to transform.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>methodname</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span> <span class='op'>=</span> <span class='nam'>methodname</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>getdoc</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>getdoc</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Return the doc of the function (from the doc of the method).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>__call__</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#FIXME ----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#As x is not a MaskedArray, we transform it to a ndarray with asarray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#... and call the corresponding method.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#Except that sometimes it doesn&#39;t work (try reshape([1,2,3,4],(2,2)))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#we end up with a &quot;SystemError: NULL result without error in PyObject_Call&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='com'>#A dirty trick is then to call the initial numpy function...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>method</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>narray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>method</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>SystemError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>,</span><span class='nam'>self</span><span class='op'>.</span><span class='nam'>__name__</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>all</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;all&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>anomalies</span> <span class='op'>=</span> <span class='nam'>anom</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;anom&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>any</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;any&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>conjugate</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;conjugate&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ids</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;ids&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>nonzero</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;nonzero&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>diagonal</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;diagonal&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>maximum</span> <span class='op'>=</span> <span class='nam'>_maximum_operation</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>mean</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;mean&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>minimum</span> <span class='op'>=</span> <span class='nam'>_minimum_operation</span> <span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>product</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;prod&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ptp</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;ptp&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ravel</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;ravel&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>repeat</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;repeat&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>round</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;round&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>std</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;std&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sum</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;sum&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>swapaxes</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;swapaxes&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>take</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;take&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>trace</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;trace&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>var</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;var&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>compress</span> <span class='op'>=</span> <span class='nam'>_frommethod</span><span class='op'>(</span><span class='str'>&#39;compress&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>power</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>,</span> <span class='nam'>third</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Computes a**b elementwise.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>third</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>MAError</span><span class='op'>,</span> <span class='str'>&quot;3-argument power not supported.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the masks</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>ma</span><span class='op'>,</span> <span class='nam'>mb</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the rawdata</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fa</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fb</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the type of the result (so that we preserve subclasses)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>basetype</span> <span class='op'>=</span> <span class='nam'>type</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>basetype</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the result and view it as a (subclass of) MaskedArray</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>power</span><span class='op'>(</span><span class='nam'>fa</span><span class='op'>,</span><span class='nam'>fb</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>basetype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Find where we&#39;re in trouble w/ NaNs and Infs</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>invalid</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>isfinite</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>ndarray</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Retrieve some extra attributes if needed</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>,</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_update_from</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Add the initial mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>isscalar</span><span class='op'>(</span><span class='nam'>result</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Fix the invalid parts</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>invalid</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>[</span><span class='nam'>invalid</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>masked</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>[</span><span class='nam'>invalid</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; if fb.dtype.char in typecodes[&quot;Integer&quot;]:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; return masked_array(umath.power(fa, fb), m)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; m = mask_or(m, (fa &lt; 0) &amp; (fb != fb.astype(int)))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; if m is nomask:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; return masked_array(umath.power(fa, fb))</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; else:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; fa = fa.copy()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; if m.all():</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fa.flat = 1</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; else:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; np.putmask(fa,m,1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; &nbsp; &nbsp; return masked_array(umath.power(fa, fb), m)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='str'>&#39;quicksort&#39;</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Function version of the eponymous method.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>argsort</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>argmin</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Function version of the eponymous method.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argmin</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>argmin</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>argmin</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>argmax</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Function version of the eponymous method.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='nam'>default_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fill_value</span> <span class='op'>=</span> <span class='op'>-</span> <span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>except</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>pass</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>argmax</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>argmin</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>argmax</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>sort</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='op'>-</span><span class='num'>1</span><span class='op'>,</span> <span class='nam'>kind</span><span class='op'>=</span><span class='str'>&#39;quicksort&#39;</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>endwith</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Function version of the eponymous method.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>axis</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>flatten</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>axis</span> <span class='op'>=</span> <span class='num'>0</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>fill_value</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>endwith</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>minimum_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>maximum_fill_value</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>filler</span> <span class='op'>=</span> <span class='nam'>fill_value</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; return</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>indx</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>indices</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>tolist</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>indx</span><span class='op'>[</span><span class='nam'>axis</span><span class='op'>]</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span><span class='nam'>filler</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>argsort</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>=</span><span class='nam'>axis</span><span class='op'>,</span><span class='nam'>kind</span><span class='op'>=</span><span class='nam'>kind</span><span class='op'>,</span><span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>[</span><span class='nam'>indx</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>sort</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>sort</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>compressed</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a 1-D array of all the non-masked data.&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>x</span><span class='op'>.</span><span class='nam'>compressed</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>concatenate</span><span class='op'>(</span><span class='nam'>arrays</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Concatenate the arrays along the given axis.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>concatenate</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>a</span> <span class='key'>in</span> <span class='nam'>arrays</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>rcls</span> <span class='op'>=</span> <span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='op'>*</span><span class='nam'>arrays</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>rcls</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Check whether one of the arrays has a non-empty mask...</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>for</span> <span class='nam'>x</span> <span class='key'>in</span> <span class='nam'>arrays</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>break</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># OK, so we have to concatenate the masks</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>dm</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>concatenate</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>a</span> <span class='key'>in</span> <span class='nam'>arrays</span><span class='op'>]</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># If we decide to keep a &#39;_shrinkmask&#39; option, we want to check that ...</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># ... all of them are True, and then check for dm.any()</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; shrink = numpy.logical_or.reduce([getattr(a,&#39;_shrinkmask&#39;,True) for a in arrays])</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#&nbsp; &nbsp; if shrink and not dm.any():</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>dm</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>.</span><span class='nam'>fields</span> <span class='key'>and</span> <span class='key'>not</span> <span class='nam'>dm</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>data</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>dm</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>data</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>count</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axis</span> <span class='op'>=</span> <span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>count</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>count</span><span class='op'>(</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>count</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>MaskedArray</span><span class='op'>.</span><span class='nam'>count</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>expand_dims</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span><span class='nam'>axis</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Expand the shape of the array by including a new axis before</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the given one.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>n_expand_dims</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span><span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>new_shape</span> <span class='op'>=</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>x</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>new_shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='nam'>new_shape</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#......................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>left_shift</span> <span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Left shift n bits.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>left_shift</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>left_shift</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>right_shift</span> <span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Right shift n bits.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>right_shift</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>right_shift</span><span class='op'>(</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>n</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#......................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>put</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='str'>&#39;raise&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set storage-indexed locations to corresponding values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Values and indices are filled if necessary.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># We can&#39;t use &#39;frommethod&#39;, the order of arguments is different</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>put</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>AttributeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>put</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>values</span><span class='op'>)</span><span class='op'>:</span> <span class='com'>#, mode=&#39;raise&#39;):</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Set a.flat[n] = values[n] for each n where mask.flat[n] is true.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If values is not the same size of a and mask then it will repeat</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; as necessary.&nbsp; This gives different behavior than</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a[mask] = values.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Note: Using a masked array as values will NOT transform a ndarray in</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a maskedarray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># We can&#39;t use &#39;frommethod&#39;, the order of arguments is different</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='op'>(</span><span class='nam'>valdata</span><span class='op'>,</span> <span class='nam'>valmask</span><span class='op'>)</span> <span class='op'>=</span> <span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>valmask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_sharedmask</span> <span class='op'>=</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>make_mask_none</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>valmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_hardmask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>valmask</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>copy</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>valmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>a</span><span class='op'>.</span><span class='nam'>mask</span> <span class='op'>|=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>valmask</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>valmask</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>values</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>valmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>.</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>,</span> <span class='nam'>valdata</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>transpose</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>axes</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return a view of the array with dimensions permuted according to axes,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; as a masked array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If ``axes`` is None (default), the output view has reversed</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; dimensions compared to the original.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#We can&#39;t use &#39;frommethod&#39;, as &#39;transpose&#39; doesn&#39;t take keywords</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>transpose</span><span class='op'>(</span><span class='nam'>axes</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>AttributeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>transpose</span><span class='op'>(</span><span class='nam'>axes</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>new_shape</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='str'>&#39;C&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Change the shape of the array a to new_shape.&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'>#We can&#39;t use &#39;frommethod&#39;, it whine about some parameters. Dmmit.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>try</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>a</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>new_shape</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>except</span> <span class='nam'>AttributeError</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>_tmp</span> <span class='op'>=</span> <span class='nam'>narray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>reshape</span><span class='op'>(</span><span class='nam'>new_shape</span><span class='op'>,</span> <span class='nam'>order</span><span class='op'>=</span><span class='nam'>order</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>_tmp</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>resize</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>new_shape</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a new array with the specified shape.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The total size of the original array can be any size.&nbsp; The new</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; array is filled with repeated copies of a. If a was masked, the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; new array will be masked, and the new mask will be a repetition of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the old one.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># We can&#39;t use _frommethods here, as N.resize is notoriously whiny.</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>new_shape</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>result</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>resize</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>new_shape</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>get_masked_subclass</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>result</span><span class='op'>.</span><span class='nam'>ndim</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>result</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>m</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>result</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>rank</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;maskedarray version of the numpy function.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>rank</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>rank</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>rank</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>shape</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;maskedarray version of the numpy function.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>shape</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>size</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;maskedarray version of the numpy function.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>obj</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>axis</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>size</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>size</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#................................................</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Extra functions ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>where</span> <span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='nam'>x</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>y</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;where(condition | x, y)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns a (subclass of) masked array, shaped like condition, where</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the elements are x when condition is True, and y otherwise.&nbsp; If</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; neither x nor y are given, returns a tuple of indices where</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; condition is True (a la condition.nonzero()).</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; condition : {var}</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; The condition to meet. Must be convertible to an integer</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; x : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Values of the output when the condition is met</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; y : {var}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Values of the output when the condition is not met.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>x</span> <span class='key'>is</span> <span class='nam'>None</span> <span class='key'>and</span> <span class='nam'>y</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>nonzero</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>x</span> <span class='key'>is</span> <span class='nam'>None</span> <span class='key'>or</span> <span class='nam'>y</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>ValueError</span><span class='op'>,</span> <span class='str'>&quot;Either both or neither x and y should be given.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the condition ...............</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fc</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>notfc</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>logical_not</span><span class='op'>(</span><span class='nam'>fc</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the data ......................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>xv</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>yv</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>y</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>x</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndtype</span> <span class='op'>=</span> <span class='nam'>yv</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>y</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndtype</span> <span class='op'>=</span> <span class='nam'>xv</span><span class='op'>.</span><span class='nam'>dtype</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>ndtype</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>max</span><span class='op'>(</span><span class='op'>[</span><span class='nam'>xv</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>yv</span><span class='op'>.</span><span class='nam'>dtype</span><span class='op'>]</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Construct an empty array and fill it</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>empty</span><span class='op'>(</span><span class='nam'>fc</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>_data</span> <span class='op'>=</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>_data</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>fc</span><span class='op'>,</span> <span class='nam'>xv</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>_data</span><span class='op'>,</span> <span class='nam'>notfc</span><span class='op'>,</span> <span class='nam'>yv</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>ndtype</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Create an empty mask and fill it</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>zeros</span><span class='op'>(</span><span class='nam'>fc</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>MaskType</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>fc</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>putmask</span><span class='op'>(</span><span class='nam'>_mask</span><span class='op'>,</span> <span class='nam'>notfc</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>y</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>_mask</span> <span class='op'>|=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>condition</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>_mask</span><span class='op'>.</span><span class='nam'>any</span><span class='op'>(</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>nomask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>choose</span> <span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='nam'>choices</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='str'>&#39;raise&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; choose(a, choices, out=None, mode=&#39;raise&#39;)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Use an index array to construct a new array from a set of choices.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Given an array of integers and a set of n choice arrays, this method</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; will create a new array that merges each of the choice arrays.&nbsp; Where a</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; value in `a` is i, the new array will have the value that choices[i]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; contains in the same place.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; a : int array</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; This array must contain integers in [0, n-1], where n is the number</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; of choices.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; choices : sequence of arrays</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Choice arrays. The index array and all of the choices should be</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; broadcastable to the same shape.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : array, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If provided, the result will be inserted into this array. It should</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; be of the appropriate shape and dtype</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; mode : {&#39;raise&#39;, &#39;wrap&#39;, &#39;clip&#39;}, optional</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Specifies how out-of-bounds indices will behave.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &#39;raise&#39; : raise an error</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &#39;wrap&#39; : wrap around</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &#39;clip&#39; : clip to the range</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Returns</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; merged_array : array</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; See Also</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; --------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; choose : equivalent function</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>fmask</span> <span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Returns the filled array, or True if masked.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>x</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>nmask</span> <span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Returns the mask, True if ``masked``, False if ``nomask``.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>x</span> <span class='key'>is</span> <span class='nam'>masked</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>True</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the indices......</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>c</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the masks........</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>masks</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>nmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>x</span> <span class='key'>in</span> <span class='nam'>choices</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>data</span> <span class='op'>=</span> <span class='op'>[</span><span class='nam'>fmask</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>)</span> <span class='key'>for</span> <span class='nam'>x</span> <span class='key'>in</span> <span class='nam'>choices</span><span class='op'>]</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Construct the mask</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>outputmask</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>choose</span><span class='op'>(</span><span class='nam'>c</span><span class='op'>,</span> <span class='nam'>masks</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>outputmask</span> <span class='op'>=</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>outputmask</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>indices</span><span class='op'>)</span><span class='op'>)</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='nam'>copy</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>shrink</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='com'># Get the choices......</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>choose</span><span class='op'>(</span><span class='nam'>c</span><span class='op'>,</span> <span class='nam'>data</span><span class='op'>,</span> <span class='nam'>mode</span><span class='op'>=</span><span class='nam'>mode</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>out</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='key'>not</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>isinstance</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='nam'>MaskedArray</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>outputmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span><span class='op'>.</span><span class='nam'>__setmask__</span><span class='op'>(</span><span class='nam'>outputmask</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>round_</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>decimals</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return a copy of a, rounded to &#39;decimals&#39; places.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; When &#39;decimals&#39; is negative, it specifies the number of positions</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; to the left of the decimal point.&nbsp; The real and imaginary parts of</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; complex numbers are rounded separately. Nothing is done if the</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; array is not of float type and &#39;decimals&#39; is greater than or equal</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; to 0.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; decimals : int</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Number of decimals to round to. May be negative.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; out : array_like</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; Existing array to use for output.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; If not given, returns a default copy of a.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Notes</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; -----</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If out is given and does not have a mask attribute, the mask of a</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; is lost!</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>out</span> <span class='key'>is</span> <span class='nam'>None</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>round_</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>decimals</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>np</span><span class='op'>.</span><span class='nam'>round_</span><span class='op'>(</span><span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>decimals</span><span class='op'>,</span> <span class='nam'>out</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>out</span><span class='op'>,</span> <span class='str'>&#39;_mask&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>out</span><span class='op'>.</span><span class='nam'>_mask</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>out</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>inner</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fa</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fb</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>fa</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span> <span class='op'>==</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fa</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='op'>(</span><span class='num'>1</span><span class='op'>,</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>len</span><span class='op'>(</span><span class='nam'>fb</span><span class='op'>.</span><span class='nam'>shape</span><span class='op'>)</span> <span class='op'>==</span> <span class='num'>0</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>fb</span><span class='op'>.</span><span class='nam'>shape</span> <span class='op'>=</span> <span class='op'>(</span><span class='num'>1</span><span class='op'>,</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>inner</span><span class='op'>(</span><span class='nam'>fa</span><span class='op'>,</span> <span class='nam'>fb</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>inner</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>doc_note</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>inner</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&quot;Masked values are replaced by 0.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>innerproduct</span> <span class='op'>=</span> <span class='nam'>inner</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>outer</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;maskedarray version of the numpy function.&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fa</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>fb</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>,</span> <span class='num'>0</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='nam'>fa</span><span class='op'>,</span> <span class='nam'>fb</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>ma</span> <span class='key'>is</span> <span class='nam'>nomask</span> <span class='key'>and</span> <span class='nam'>mb</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>ma</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>mb</span> <span class='op'>=</span> <span class='nam'>getmaskarray</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>make_mask</span><span class='op'>(</span><span class='num'>1</span><span class='op'>-</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>(</span><span class='num'>1</span><span class='op'>-</span><span class='nam'>ma</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>-</span><span class='nam'>mb</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='num'>0</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>outer</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>doc_note</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>outer</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='op'>,</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class='str'>&quot;Masked values are replaced by 0.&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>outerproduct</span> <span class='op'>=</span> <span class='nam'>outer</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>allequal</span> <span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Return True if all entries of a and b are equal, using</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; fill_value as a truth value where either or both are masked.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='nam'>m</span> <span class='key'>is</span> <span class='nam'>nomask</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>x</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>y</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>y</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>d</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>elif</span> <span class='nam'>fill_value</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>x</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>y</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>equal</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>,</span> <span class='nam'>y</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>dm</span> <span class='op'>=</span> <span class='nam'>array</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>dm</span><span class='op'>.</span><span class='nam'>filled</span><span class='op'>(</span><span class='nam'>True</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>all</span><span class='op'>(</span><span class='nam'>None</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='key'>else</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>False</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>allclose</span> <span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>b</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>rtol</span><span class='op'>=</span><span class='num'>1.e-5</span><span class='op'>,</span> <span class='nam'>atol</span><span class='op'>=</span><span class='num'>1.e-8</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot; Return True if all elements of a and b are equal subject to</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; given tolerances.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If fill_value is True, masked values are considered equal.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If fill_value is False, masked values considered unequal.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The relative error rtol should be positive and &lt;&lt; 1.0</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; The absolute error atol comes into play for those elements of b</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; that are very small or zero; it says how small `a` must be also.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>m</span> <span class='op'>=</span> <span class='nam'>mask_or</span><span class='op'>(</span><span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>getmask</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d1</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d2</span> <span class='op'>=</span> <span class='nam'>getdata</span><span class='op'>(</span><span class='nam'>b</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>x</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>d1</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>fill_value</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>float</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>y</span> <span class='op'>=</span> <span class='nam'>filled</span><span class='op'>(</span><span class='nam'>array</span><span class='op'>(</span><span class='nam'>d2</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='num'>0</span><span class='op'>,</span> <span class='nam'>mask</span><span class='op'>=</span><span class='nam'>m</span><span class='op'>)</span><span class='op'>,</span> <span class='num'>1</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>astype</span><span class='op'>(</span><span class='nam'>float</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='nam'>d</span> <span class='op'>=</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>less_equal</span><span class='op'>(</span><span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>x</span><span class='op'>-</span><span class='nam'>y</span><span class='op'>)</span><span class='op'>,</span> <span class='nam'>atol</span> <span class='op'>+</span> <span class='nam'>rtol</span> <span class='op'>*</span> <span class='nam'>umath</span><span class='op'>.</span><span class='nam'>absolute</span><span class='op'>(</span><span class='nam'>y</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>alltrue</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>.</span><span class='nam'>ravel</span><span class='op'>(</span><span class='nam'>d</span><span class='op'>)</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#..............................................................................</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>asarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;asarray(data, dtype) = array(data, dtype, copy=0, subok=0)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return a as a MaskedArray object of the given dtype.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If dtype is not given or None, is is set to the dtype of a.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; No copy is performed if a is already an array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Subclasses are converted to the base class MaskedArray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>keep_mask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>asanyarray</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>None</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;asanyarray(data, dtype) = array(data, dtype, copy=0, subok=1)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return a as an masked array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; If dtype is not given or None, is is set to the dtype of a.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; No copy is performed if a is already an array.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Subclasses are conserved.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>masked_array</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>dtype</span><span class='op'>,</span> <span class='nam'>copy</span><span class='op'>=</span><span class='nam'>False</span><span class='op'>,</span> <span class='nam'>keep_mask</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>,</span> <span class='nam'>subok</span><span class='op'>=</span><span class='nam'>True</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#---- --- Pickling ---</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>#####--------------------------------------------------------------------------</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>dump</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span><span class='nam'>F</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Pickle the MaskedArray `a` to the file `F`.&nbsp; `F` can either be</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; the handle of an exiting file, or a string representing a file</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; name.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>,</span><span class='str'>&#39;readline&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>F</span> <span class='op'>=</span> <span class='nam'>open</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>,</span><span class='str'>&#39;w&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>cPickle</span><span class='op'>.</span><span class='nam'>dump</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span><span class='nam'>F</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>dumps</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Return a string corresponding to the pickling of the MaskedArray.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>cPickle</span><span class='op'>.</span><span class='nam'>dumps</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>load</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Wrapper around ``cPickle.load`` which accepts either a file-like object</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; or a filename.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>if</span> <span class='key'>not</span> <span class='nam'>hasattr</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>,</span> <span class='str'>&#39;readline&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>F</span> <span class='op'>=</span> <span class='nam'>open</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>,</span><span class='str'>&#39;r&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>cPickle</span><span class='op'>.</span><span class='nam'>load</span><span class='op'>(</span><span class='nam'>F</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>loads</span><span class='op'>(</span><span class='nam'>strg</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;Load a pickle from the current string.&quot;</span><span class='str'>&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>cPickle</span><span class='op'>.</span><span class='nam'>loads</span><span class='op'>(</span><span class='nam'>strg</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>################################################################################</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>def</span> <span class='nam'>fromfile</span><span class='op'>(</span><span class='nam'>file</span><span class='op'>,</span> <span class='nam'>dtype</span><span class='op'>=</span><span class='nam'>float</span><span class='op'>,</span> <span class='nam'>count</span><span class='op'>=</span><span class='op'>-</span><span class='num'>1</span><span class='op'>,</span> <span class='nam'>sep</span><span class='op'>=</span><span class='str'>&#39;&#39;</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; <span class='key'>raise</span> <span class='nam'>NotImplementedError</span><span class='op'>(</span><span class='str'>&quot;Not yet implemented. Sorry&quot;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='key'>class</span> <span class='nam'>_convert2ma</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; <span class='str'>&quot;&quot;&quot;Convert functions from numpy to numpy.ma.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; Parameters</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; ----------</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; _methodname : string</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name of the method to transform.</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='str'>&nbsp; &nbsp; &quot;&quot;&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>None</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__init__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>funcname</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_func</span> <span class='op'>=</span> <span class='nam'>getattr</span><span class='op'>(</span><span class='nam'>np</span><span class='op'>,</span> <span class='nam'>funcname</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='nam'>self</span><span class='op'>.</span><span class='nam'>__doc__</span> <span class='op'>=</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>getdoc</span><span class='op'>(</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>getdoc</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='pln'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='str'>&quot;Return the doc of the function (from the doc of the method).&quot;</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_func</span><span class='op'>.</span><span class='nam'>__doc__</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'>&nbsp; &nbsp; <span class='key'>def</span> <span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>self</span><span class='op'>,</span> <span class='nam'>a</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>:</span><span class='strut'>&nbsp;</span></p>
<p class='stm mis'>&nbsp; &nbsp; &nbsp; &nbsp; <span class='key'>return</span> <span class='nam'>self</span><span class='op'>.</span><span class='nam'>_func</span><span class='op'>.</span><span class='nam'>__call__</span><span class='op'>(</span><span class='nam'>a</span><span class='op'>,</span> <span class='op'>*</span><span class='nam'>args</span><span class='op'>,</span> <span class='op'>**</span><span class='nam'>params</span><span class='op'>)</span><span class='op'>.</span><span class='nam'>view</span><span class='op'>(</span><span class='nam'>MaskedArray</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>arange</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;arange&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>clip</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>clip</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>empty</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;empty&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>empty_like</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;empty_like&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>frombuffer</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;frombuffer&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>fromfunction</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;fromfunction&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>identity</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;identity&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>indices</span> <span class='op'>=</span> <span class='nam'>np</span><span class='op'>.</span><span class='nam'>indices</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>ones</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;ones&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='stm run hide_run'><span class='nam'>zeros</span> <span class='op'>=</span> <span class='nam'>_convert2ma</span><span class='op'>(</span><span class='str'>&#39;zeros&#39;</span><span class='op'>)</span><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='strut'>&nbsp;</span></p>
<p class='pln'><span class='com'>###############################################################################</span><span class='strut'>&nbsp;</span></p>
    
</td>
</tr>
</table>
</div>

</body>
</html>
