
Test 
====


    >>> from arboris.core import simplearm
    >>> w = simplearm()
    >>> joints  = w.getjoints()
    >>> joints[0].gpos[0]=0.5
    >>> joints[0].gvel[0]=2.5
    >>> joints[1].gpos[0]=1.0
    >>> joints[1].gvel[0]=-1.0
    >>> joints[2].gpos[0]=2.0/3.0
    >>> joints[2].gvel[0]=-0.5
    >>> w.update_dynamic()
    >>> bodies = w.getbodies()
    >>> bodies['Arm'].pose
    array([[ 0.87758256, -0.47942554,  0.        ,  0.        ],
           [ 0.47942554,  0.87758256,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  1.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ,  1.        ]])
    >>> bodies['ForeArm'].pose
    array([[ 0.0707372 , -0.99749499,  0.        , -0.23971277],
           [ 0.99749499,  0.0707372 ,  0.        ,  0.43879128],
           [ 0.        ,  0.        ,  1.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ,  1.        ]])
    >>> bodies['Hand'].pose
    array([[-0.56122931, -0.82766035,  0.        , -0.63871076],
           [ 0.82766035, -0.56122931,  0.        ,  0.46708616],
           [ 0.        ,  0.        ,  1.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ,  1.        ]])
    >>> bodies['ground'].jacobian
    array([[ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.]])
    >>> bodies['Arm'].jacobian
    array([[ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 1.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.]])
    >>> bodies['ForeArm'].jacobian
    array([[ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [ 1.        ,  1.        ,  0.        ],
           [-0.27015115,  0.        ,  0.        ],
           [ 0.42073549,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ]])
    >>> bodies['Hand'].jacobian
    array([[ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [ 1.        ,  1.        ,  1.        ],
           [-0.26649313, -0.3143549 ,  0.        ],
           [ 0.7450519 ,  0.24734792,  0.        ],
           [ 0.        ,  0.        ,  0.        ]])
    >>> bodies['ground'].twist
    array([ 0.,  0.,  0.,  0.,  0.,  0.])
    >>> bodies['Arm'].twist
    array([ 0. ,  0. ,  2.5,  0. ,  0. ,  0. ])
    >>> bodies['ForeArm'].twist
    array([ 0.        ,  0.        ,  1.5       , -0.67537788,  1.05183873,  0.        ])
    >>> bodies['Hand'].twist
    array([ 0.        ,  0.        ,  1.        , -0.35187792,  1.61528183,  0.        ])
    >>> w.viscosity
    array([[ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.]])
    >>> bodies['Arm'].mass
    array([[  8.35416667e-02,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   2.50000000e-01],
           [  0.00000000e+00,   4.16666667e-04,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   8.35416667e-02,
             -2.50000000e-01,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -2.50000000e-01,
              1.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   1.00000000e+00,   0.00000000e+00],
           [  2.50000000e-01,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   1.00000000e+00]])
    >>> bodies['ForeArm'].mass
    array([[  4.27733333e-02,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   1.60000000e-01],
           [  0.00000000e+00,   2.13333333e-04,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   4.27733333e-02,
             -1.60000000e-01,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -1.60000000e-01,
              8.00000000e-01,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   8.00000000e-01,   0.00000000e+00],
           [  1.60000000e-01,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   8.00000000e-01]])
    >>> bodies['Hand'].mass
    array([[  2.67333333e-03,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   2.00000000e-02],
           [  0.00000000e+00,   1.33333333e-05,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   2.67333333e-03,
             -2.00000000e-02,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -2.00000000e-02,
              2.00000000e-01,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   2.00000000e-01,   0.00000000e+00],
           [  2.00000000e-02,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   2.00000000e-01]])
    >>> w.mass
    array([[ 0.55132061,  0.1538999 ,  0.0080032 ],
           [ 0.1538999 ,  0.09002086,  0.00896043],
           [ 0.0080032 ,  0.00896043,  0.00267333]])
    >>> bodies['ground'].djacobian
    array([[ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.]])
    >>> bodies['Arm'].djacobian
    array([[ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.],
           [ 0.,  0.,  0.]])
    >>> bodies['ForeArm'].djacobian
    array([[ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [-0.42073549,  0.        ,  0.        ],
           [-0.27015115,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ]])
    >>> bodies['Hand'].djacobian
    array([[ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [ 0.        ,  0.        ,  0.        ],
           [-0.87022993, -0.12367396,  0.        ],
           [-0.08538479, -0.15717745,  0.        ],
           [ 0.        ,  0.        ,  0.        ]])
    >>> bodies['ground'].nleffects
    array([[ 0.,  0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.,  0.]])
    >>> bodies['Arm'].nleffects
    array([[  0.00000000e+00,  -1.04166667e-03,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  5.26041667e-02,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   6.25000000e-01,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,  -2.50000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -6.25000000e-01,
              2.50000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00]])
    >>> bodies['ForeArm'].nleffects
    array([[  0.00000000e+00,  -3.20000000e-04,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  1.61600000e-02,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,  -2.22261445e-18],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   2.40000000e-01,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,  -1.20000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -2.40000000e-01,
              1.20000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00]])
    >>> bodies['Hand'].nleffects
    array([[  0.00000000e+00,  -1.33333333e-05,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
           [  6.73333333e-04,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,  -1.10961316e-18],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   2.00000000e-02,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,  -2.00000000e-01,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,  -2.00000000e-02,
              2.00000000e-01,   0.00000000e+00,   0.00000000e+00],
           [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,
              0.00000000e+00,   0.00000000e+00,   0.00000000e+00]])
    >>> w.nleffects
    array([[ 0.11838112, -0.15894538, -0.01490104],
           [ 0.27979997,  0.00247348, -0.00494696],
           [ 0.03230564,  0.00742044,  0.        ]])


